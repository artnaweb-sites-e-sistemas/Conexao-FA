function B1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Iv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ib={exports:{}},vm={},Tb={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md=Symbol.for("react.element"),z1=Symbol.for("react.portal"),$1=Symbol.for("react.fragment"),q1=Symbol.for("react.strict_mode"),W1=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),H1=Symbol.for("react.context"),K1=Symbol.for("react.forward_ref"),Q1=Symbol.for("react.suspense"),Y1=Symbol.for("react.memo"),X1=Symbol.for("react.lazy"),nE=Symbol.iterator;function J1(t){return t===null||typeof t!="object"?null:(t=nE&&t[nE]||t["@@iterator"],typeof t=="function"?t:null)}var xb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bb=Object.assign,Sb={};function Gl(t,e,n){this.props=t,this.context=e,this.refs=Sb,this.updater=n||xb}Gl.prototype.isReactComponent={};Gl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ab(){}Ab.prototype=Gl.prototype;function Tv(t,e,n){this.props=t,this.context=e,this.refs=Sb,this.updater=n||xb}var xv=Tv.prototype=new Ab;xv.constructor=Tv;bb(xv,Gl.prototype);xv.isPureReactComponent=!0;var rE=Array.isArray,Rb=Object.prototype.hasOwnProperty,bv={current:null},kb={key:!0,ref:!0,__self:!0,__source:!0};function Cb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Rb.call(e,r)&&!kb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:md,type:t,key:i,ref:o,props:s,_owner:bv.current}}function Z1(t,e){return{$$typeof:md,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sv(t){return typeof t=="object"&&t!==null&&t.$$typeof===md}function eD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sE=/\/+/g;function Lp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eD(""+t.key):e.toString(36)}function Uh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case md:case z1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Lp(o,0):r,rE(s)?(n="",t!=null&&(n=t.replace(sE,"$&/")+"/"),Uh(s,e,n,"",function(c){return c})):s!=null&&(Sv(s)&&(s=Z1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sE,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",rE(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Lp(i,a);o+=Uh(i,e,n,l,s)}else if(l=J1(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Lp(i,a++),o+=Uh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rh(t,e,n){if(t==null)return t;var r=[],s=0;return Uh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},Bh={transition:null},nD={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:Bh,ReactCurrentOwner:bv};function Pb(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:rh,forEach:function(t,e,n){rh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rh(t,function(){e++}),e},toArray:function(t){return rh(t,function(e){return e})||[]},only:function(t){if(!Sv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=Gl;be.Fragment=$1;be.Profiler=W1;be.PureComponent=Tv;be.StrictMode=q1;be.Suspense=Q1;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nD;be.act=Pb;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Rb.call(e,l)&&!kb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:md,type:t.type,key:s,ref:i,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:H1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G1,_context:t},t.Consumer=t};be.createElement=Cb;be.createFactory=function(t){var e=Cb.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:K1,render:t}};be.isValidElement=Sv;be.lazy=function(t){return{$$typeof:X1,_payload:{_status:-1,_result:t},_init:tD}};be.memo=function(t,e){return{$$typeof:Y1,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Bh.transition;Bh.transition={};try{t()}finally{Bh.transition=e}};be.unstable_act=Pb;be.useCallback=function(t,e){return Rn.current.useCallback(t,e)};be.useContext=function(t){return Rn.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};be.useEffect=function(t,e){return Rn.current.useEffect(t,e)};be.useId=function(){return Rn.current.useId()};be.useImperativeHandle=function(t,e,n){return Rn.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return Rn.current.useMemo(t,e)};be.useReducer=function(t,e,n){return Rn.current.useReducer(t,e,n)};be.useRef=function(t){return Rn.current.useRef(t)};be.useState=function(t){return Rn.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return Rn.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return Rn.current.useTransition()};be.version="18.3.1";Tb.exports=be;var R=Tb.exports;const G=Iv(R),Av=B1({__proto__:null,default:G},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD=R,sD=Symbol.for("react.element"),iD=Symbol.for("react.fragment"),oD=Object.prototype.hasOwnProperty,aD=rD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lD={key:!0,ref:!0,__self:!0,__source:!0};function Nb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)oD.call(e,r)&&!lD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:sD,type:t,key:i,ref:o,props:s,_owner:aD.current}}vm.Fragment=iD;vm.jsx=Nb;vm.jsxs=Nb;Ib.exports=vm;var m=Ib.exports,Db={exports:{}},ir={},Ob={exports:{}},Vb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,K){var ae=J.length;J.push(K);e:for(;0<ae;){var $e=ae-1>>>1,me=J[$e];if(0<s(me,K))J[$e]=K,J[ae]=me,ae=$e;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var K=J[0],ae=J.pop();if(ae!==K){J[0]=ae;e:for(var $e=0,me=J.length,ge=me>>>1;$e<ge;){var Se=2*($e+1)-1,Je=J[Se],Bt=Se+1,De=J[Bt];if(0>s(Je,ae))Bt<me&&0>s(De,Je)?(J[$e]=De,J[Bt]=ae,$e=Bt):(J[$e]=Je,J[Se]=ae,$e=Se);else if(Bt<me&&0>s(De,ae))J[$e]=De,J[Bt]=ae,$e=Bt;else break e}}return K}function s(J,K){var ae=J.sortIndex-K.sortIndex;return ae!==0?ae:J.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,g=!1,T=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(J){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=J)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function O(J){if(_=!1,E(J),!T)if(n(l)!==null)T=!0,Me(L);else{var K=n(c);K!==null&&Ne(O,K.startTime-J)}}function L(J,K){T=!1,_&&(_=!1,w(I),I=-1),g=!0;var ae=p;try{for(E(K),h=n(l);h!==null&&(!(h.expirationTime>K)||J&&!D());){var $e=h.callback;if(typeof $e=="function"){h.callback=null,p=h.priorityLevel;var me=$e(h.expirationTime<=K);K=t.unstable_now(),typeof me=="function"?h.callback=me:h===n(l)&&r(l),E(K)}else r(l);h=n(l)}if(h!==null)var ge=!0;else{var Se=n(c);Se!==null&&Ne(O,Se.startTime-K),ge=!1}return ge}finally{h=null,p=ae,g=!1}}var j=!1,S=null,I=-1,C=5,A=-1;function D(){return!(t.unstable_now()-A<C)}function N(){if(S!==null){var J=t.unstable_now();A=J;var K=!0;try{K=S(!0,J)}finally{K?k():(j=!1,S=null)}}else j=!1}var k;if(typeof v=="function")k=function(){v(N)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Le=pe.port2;pe.port1.onmessage=N,k=function(){Le.postMessage(null)}}else k=function(){b(N,0)};function Me(J){S=J,j||(j=!0,k())}function Ne(J,K){I=b(function(){J(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,Me(L))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(J){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var ae=p;p=K;try{return J()}finally{p=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,K){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ae=p;p=J;try{return K()}finally{p=ae}},t.unstable_scheduleCallback=function(J,K,ae){var $e=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?$e+ae:$e):ae=$e,J){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ae+me,J={id:d++,callback:K,priorityLevel:J,startTime:ae,expirationTime:me,sortIndex:-1},ae>$e?(J.sortIndex=ae,e(c,J),n(l)===null&&J===n(c)&&(_?(w(I),I=-1):_=!0,Ne(O,ae-$e))):(J.sortIndex=me,e(l,J),T||g||(T=!0,Me(L))),J},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(J){var K=p;return function(){var ae=p;p=K;try{return J.apply(this,arguments)}finally{p=ae}}}})(Vb);Ob.exports=Vb;var uD=Ob.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cD=R,tr=uD;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lb=new Set,xc={};function ua(t,e){gl(t,e),gl(t+"Capture",e)}function gl(t,e){for(xc[t]=e,t=0;t<e.length;t++)Lb.add(e[t])}var Rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ug=Object.prototype.hasOwnProperty,dD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iE={},oE={};function hD(t){return Ug.call(oE,t)?!0:Ug.call(iE,t)?!1:dD.test(t)?oE[t]=!0:(iE[t]=!0,!1)}function fD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mD(t,e,n,r){if(e===null||typeof e>"u"||fD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rv=/[\-:]([a-z])/g;function kv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rv,kv);cn[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rv,kv);cn[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rv,kv);cn[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cv(t,e,n,r){var s=cn.hasOwnProperty(e)?cn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mD(e,n,s,r)&&(n=null),r||s===null?hD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fs=cD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sh=Symbol.for("react.element"),Ga=Symbol.for("react.portal"),Ha=Symbol.for("react.fragment"),Pv=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),Mb=Symbol.for("react.provider"),Fb=Symbol.for("react.context"),Nv=Symbol.for("react.forward_ref"),zg=Symbol.for("react.suspense"),$g=Symbol.for("react.suspense_list"),Dv=Symbol.for("react.memo"),oi=Symbol.for("react.lazy"),jb=Symbol.for("react.offscreen"),aE=Symbol.iterator;function ku(t){return t===null||typeof t!="object"?null:(t=aE&&t[aE]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,Mp;function Gu(t){if(Mp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mp=e&&e[1]||""}return`
`+Mp+t}var Fp=!1;function jp(t,e){if(!t||Fp)return"";Fp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gu(t):""}function pD(t){switch(t.tag){case 5:return Gu(t.type);case 16:return Gu("Lazy");case 13:return Gu("Suspense");case 19:return Gu("SuspenseList");case 0:case 2:case 15:return t=jp(t.type,!1),t;case 11:return t=jp(t.type.render,!1),t;case 1:return t=jp(t.type,!0),t;default:return""}}function qg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ha:return"Fragment";case Ga:return"Portal";case Bg:return"Profiler";case Pv:return"StrictMode";case zg:return"Suspense";case $g:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fb:return(t.displayName||"Context")+".Consumer";case Mb:return(t._context.displayName||"Context")+".Provider";case Nv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dv:return e=t.displayName||null,e!==null?e:qg(t.type)||"Memo";case oi:e=t._payload,t=t._init;try{return qg(t(e))}catch{}}return null}function gD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qg(e);case 8:return e===Pv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ub(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yD(t){var e=Ub(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ih(t){t._valueTracker||(t._valueTracker=yD(t))}function Bb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ub(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wg(t,e){var n=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zb(t,e){e=e.checked,e!=null&&Cv(t,"checked",e,!1)}function Gg(t,e){zb(t,e);var n=Fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hg(t,e.type,Fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hg(t,e,n){(e!=="number"||mf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hu=Array.isArray;function sl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Hu(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fi(n)}}function $b(t,e){var n=Fi(e.value),r=Fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var oh,Wb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(oh=oh||document.createElement("div"),oh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vD=["Webkit","ms","Moz","O"];Object.keys(sc).forEach(function(t){vD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sc[e]=sc[t]})});function Gb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sc.hasOwnProperty(t)&&sc[t]?(""+e).trim():e+"px"}function Hb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _D=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yg(t,e){if(e){if(_D[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Xg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jg=null;function Ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zg=null,il=null,ol=null;function hE(t){if(t=yd(t)){if(typeof Zg!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Tm(e),Zg(t.stateNode,t.type,e))}}function Kb(t){il?ol?ol.push(t):ol=[t]:il=t}function Qb(){if(il){var t=il,e=ol;if(ol=il=null,hE(t),e)for(t=0;t<e.length;t++)hE(e[t])}}function Yb(t,e){return t(e)}function Xb(){}var Up=!1;function Jb(t,e,n){if(Up)return t(e,n);Up=!0;try{return Yb(t,e,n)}finally{Up=!1,(il!==null||ol!==null)&&(Xb(),Qb())}}function Sc(t,e){var n=t.stateNode;if(n===null)return null;var r=Tm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var ey=!1;if(Rs)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){ey=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{ey=!1}function wD(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ic=!1,pf=null,gf=!1,ty=null,ED={onError:function(t){ic=!0,pf=t}};function ID(t,e,n,r,s,i,o,a,l){ic=!1,pf=null,wD.apply(ED,arguments)}function TD(t,e,n,r,s,i,o,a,l){if(ID.apply(this,arguments),ic){if(ic){var c=pf;ic=!1,pf=null}else throw Error(H(198));gf||(gf=!0,ty=c)}}function ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Zb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fE(t){if(ca(t)!==t)throw Error(H(188))}function xD(t){var e=t.alternate;if(!e){if(e=ca(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fE(s),t;if(i===r)return fE(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function eS(t){return t=xD(t),t!==null?tS(t):null}function tS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tS(t);if(e!==null)return e;t=t.sibling}return null}var nS=tr.unstable_scheduleCallback,mE=tr.unstable_cancelCallback,bD=tr.unstable_shouldYield,SD=tr.unstable_requestPaint,kt=tr.unstable_now,AD=tr.unstable_getCurrentPriorityLevel,Vv=tr.unstable_ImmediatePriority,rS=tr.unstable_UserBlockingPriority,yf=tr.unstable_NormalPriority,RD=tr.unstable_LowPriority,sS=tr.unstable_IdlePriority,_m=null,Qr=null;function kD(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(_m,t,void 0,(t.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:ND,CD=Math.log,PD=Math.LN2;function ND(t){return t>>>=0,t===0?32:31-(CD(t)/PD|0)|0}var ah=64,lh=4194304;function Ku(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ku(a):(i&=o,i!==0&&(r=Ku(i)))}else o=n&~s,o!==0?r=Ku(o):i!==0&&(r=Ku(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kr(e),s=1<<n,r|=t[n],e&=~s;return r}function DD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-kr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=DD(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ny(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iS(){var t=ah;return ah<<=1,!(ah&4194240)&&(ah=64),t}function Bp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kr(e),t[e]=n}function VD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-kr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Lv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ge=0;function oS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aS,Mv,lS,uS,cS,ry=!1,uh=[],Ii=null,Ti=null,xi=null,Ac=new Map,Rc=new Map,ui=[],LD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pE(t,e){switch(t){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Ac.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(e.pointerId)}}function Pu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yd(e),e!==null&&Mv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function MD(t,e,n,r,s){switch(e){case"focusin":return Ii=Pu(Ii,t,e,n,r,s),!0;case"dragenter":return Ti=Pu(Ti,t,e,n,r,s),!0;case"mouseover":return xi=Pu(xi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ac.set(i,Pu(Ac.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rc.set(i,Pu(Rc.get(i)||null,t,e,n,r,s)),!0}return!1}function dS(t){var e=Do(t.target);if(e!==null){var n=ca(e);if(n!==null){if(e=n.tag,e===13){if(e=Zb(n),e!==null){t.blockedOn=e,cS(t.priority,function(){lS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jg=r,n.target.dispatchEvent(r),Jg=null}else return e=yd(n),e!==null&&Mv(e),t.blockedOn=n,!1;e.shift()}return!0}function gE(t,e,n){zh(t)&&n.delete(e)}function FD(){ry=!1,Ii!==null&&zh(Ii)&&(Ii=null),Ti!==null&&zh(Ti)&&(Ti=null),xi!==null&&zh(xi)&&(xi=null),Ac.forEach(gE),Rc.forEach(gE)}function Nu(t,e){t.blockedOn===e&&(t.blockedOn=null,ry||(ry=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,FD)))}function kc(t){function e(s){return Nu(s,t)}if(0<uh.length){Nu(uh[0],t);for(var n=1;n<uh.length;n++){var r=uh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ii!==null&&Nu(Ii,t),Ti!==null&&Nu(Ti,t),xi!==null&&Nu(xi,t),Ac.forEach(e),Rc.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)dS(n),n.blockedOn===null&&ui.shift()}var al=Fs.ReactCurrentBatchConfig,_f=!0;function jD(t,e,n,r){var s=Ge,i=al.transition;al.transition=null;try{Ge=1,Fv(t,e,n,r)}finally{Ge=s,al.transition=i}}function UD(t,e,n,r){var s=Ge,i=al.transition;al.transition=null;try{Ge=4,Fv(t,e,n,r)}finally{Ge=s,al.transition=i}}function Fv(t,e,n,r){if(_f){var s=sy(t,e,n,r);if(s===null)Xp(t,e,r,wf,n),pE(t,r);else if(MD(s,t,e,n,r))r.stopPropagation();else if(pE(t,r),e&4&&-1<LD.indexOf(t)){for(;s!==null;){var i=yd(s);if(i!==null&&aS(i),i=sy(t,e,n,r),i===null&&Xp(t,e,r,wf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xp(t,e,r,null,n)}}var wf=null;function sy(t,e,n,r){if(wf=null,t=Ov(r),t=Do(t),t!==null)if(e=ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Zb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wf=t,null}function hS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AD()){case Vv:return 1;case rS:return 4;case yf:case RD:return 16;case sS:return 536870912;default:return 16}default:return 16}}var gi=null,jv=null,$h=null;function fS(){if($h)return $h;var t,e=jv,n=e.length,r,s="value"in gi?gi.value:gi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $h=s.slice(t,1<r?1-r:void 0)}function qh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ch(){return!0}function yE(){return!1}function or(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ch:yE,this.isPropagationStopped=yE,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ch)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ch)},persist:function(){},isPersistent:ch}),e}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uv=or(Hl),gd=wt({},Hl,{view:0,detail:0}),BD=or(gd),zp,$p,Du,wm=wt({},gd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Du&&(Du&&t.type==="mousemove"?(zp=t.screenX-Du.screenX,$p=t.screenY-Du.screenY):$p=zp=0,Du=t),zp)},movementY:function(t){return"movementY"in t?t.movementY:$p}}),vE=or(wm),zD=wt({},wm,{dataTransfer:0}),$D=or(zD),qD=wt({},gd,{relatedTarget:0}),qp=or(qD),WD=wt({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),GD=or(WD),HD=wt({},Hl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KD=or(HD),QD=wt({},Hl,{data:0}),_E=or(QD),YD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JD[t])?!!e[t]:!1}function Bv(){return ZD}var eO=wt({},gd,{key:function(t){if(t.key){var e=YD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bv,charCode:function(t){return t.type==="keypress"?qh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tO=or(eO),nO=wt({},wm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wE=or(nO),rO=wt({},gd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bv}),sO=or(rO),iO=wt({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),oO=or(iO),aO=wt({},wm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lO=or(aO),uO=[9,13,27,32],zv=Rs&&"CompositionEvent"in window,oc=null;Rs&&"documentMode"in document&&(oc=document.documentMode);var cO=Rs&&"TextEvent"in window&&!oc,mS=Rs&&(!zv||oc&&8<oc&&11>=oc),EE=" ",IE=!1;function pS(t,e){switch(t){case"keyup":return uO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ka=!1;function dO(t,e){switch(t){case"compositionend":return gS(e);case"keypress":return e.which!==32?null:(IE=!0,EE);case"textInput":return t=e.data,t===EE&&IE?null:t;default:return null}}function hO(t,e){if(Ka)return t==="compositionend"||!zv&&pS(t,e)?(t=fS(),$h=jv=gi=null,Ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mS&&e.locale!=="ko"?null:e.data;default:return null}}var fO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fO[t.type]:e==="textarea"}function yS(t,e,n,r){Kb(r),e=Ef(e,"onChange"),0<e.length&&(n=new Uv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ac=null,Cc=null;function mO(t){RS(t,0)}function Em(t){var e=Xa(t);if(Bb(e))return t}function pO(t,e){if(t==="change")return e}var vS=!1;if(Rs){var Wp;if(Rs){var Gp="oninput"in document;if(!Gp){var xE=document.createElement("div");xE.setAttribute("oninput","return;"),Gp=typeof xE.oninput=="function"}Wp=Gp}else Wp=!1;vS=Wp&&(!document.documentMode||9<document.documentMode)}function bE(){ac&&(ac.detachEvent("onpropertychange",_S),Cc=ac=null)}function _S(t){if(t.propertyName==="value"&&Em(Cc)){var e=[];yS(e,Cc,t,Ov(t)),Jb(mO,e)}}function gO(t,e,n){t==="focusin"?(bE(),ac=e,Cc=n,ac.attachEvent("onpropertychange",_S)):t==="focusout"&&bE()}function yO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Em(Cc)}function vO(t,e){if(t==="click")return Em(e)}function _O(t,e){if(t==="input"||t==="change")return Em(e)}function wO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nr=typeof Object.is=="function"?Object.is:wO;function Pc(t,e){if(Nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ug.call(e,s)||!Nr(t[s],e[s]))return!1}return!0}function SE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function AE(t,e){var n=SE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=SE(n)}}function wS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ES(){for(var t=window,e=mf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mf(t.document)}return e}function $v(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function EO(t){var e=ES(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wS(n.ownerDocument.documentElement,n)){if(r!==null&&$v(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=AE(n,i);var o=AE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IO=Rs&&"documentMode"in document&&11>=document.documentMode,Qa=null,iy=null,lc=null,oy=!1;function RE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oy||Qa==null||Qa!==mf(r)||(r=Qa,"selectionStart"in r&&$v(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lc&&Pc(lc,r)||(lc=r,r=Ef(iy,"onSelect"),0<r.length&&(e=new Uv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qa)))}function dh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ya={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},Hp={},IS={};Rs&&(IS=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Im(t){if(Hp[t])return Hp[t];if(!Ya[t])return t;var e=Ya[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IS)return Hp[t]=e[n];return t}var TS=Im("animationend"),xS=Im("animationiteration"),bS=Im("animationstart"),SS=Im("transitionend"),AS=new Map,kE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){AS.set(t,e),ua(e,[t])}for(var Kp=0;Kp<kE.length;Kp++){var Qp=kE[Kp],TO=Qp.toLowerCase(),xO=Qp[0].toUpperCase()+Qp.slice(1);to(TO,"on"+xO)}to(TS,"onAnimationEnd");to(xS,"onAnimationIteration");to(bS,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(SS,"onTransitionEnd");gl("onMouseEnter",["mouseout","mouseover"]);gl("onMouseLeave",["mouseout","mouseover"]);gl("onPointerEnter",["pointerout","pointerover"]);gl("onPointerLeave",["pointerout","pointerover"]);ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ua("onBeforeInput",["compositionend","keypress","textInput","paste"]);ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qu));function CE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TD(r,e,void 0,t),t.currentTarget=null}function RS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;CE(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;CE(s,a,c),i=l}}}if(gf)throw t=ty,gf=!1,ty=null,t}function nt(t,e){var n=e[dy];n===void 0&&(n=e[dy]=new Set);var r=t+"__bubble";n.has(r)||(kS(e,t,2,!1),n.add(r))}function Yp(t,e,n){var r=0;e&&(r|=4),kS(n,t,r,e)}var hh="_reactListening"+Math.random().toString(36).slice(2);function Nc(t){if(!t[hh]){t[hh]=!0,Lb.forEach(function(n){n!=="selectionchange"&&(bO.has(n)||Yp(n,!1,t),Yp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hh]||(e[hh]=!0,Yp("selectionchange",!1,e))}}function kS(t,e,n,r){switch(hS(e)){case 1:var s=jD;break;case 4:s=UD;break;default:s=Fv}n=s.bind(null,e,n,t),s=void 0,!ey||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Do(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Jb(function(){var c=i,d=Ov(n),h=[];e:{var p=AS.get(t);if(p!==void 0){var g=Uv,T=t;switch(t){case"keypress":if(qh(n)===0)break e;case"keydown":case"keyup":g=tO;break;case"focusin":T="focus",g=qp;break;case"focusout":T="blur",g=qp;break;case"beforeblur":case"afterblur":g=qp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=$D;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=sO;break;case TS:case xS:case bS:g=GD;break;case SS:g=oO;break;case"scroll":g=BD;break;case"wheel":g=lO;break;case"copy":case"cut":case"paste":g=KD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=wE}var _=(e&4)!==0,b=!_&&t==="scroll",w=_?p!==null?p+"Capture":null:p;_=[];for(var v=c,E;v!==null;){E=v;var O=E.stateNode;if(E.tag===5&&O!==null&&(E=O,w!==null&&(O=Sc(v,w),O!=null&&_.push(Dc(v,O,E)))),b)break;v=v.return}0<_.length&&(p=new g(p,T,null,n,d),h.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Jg&&(T=n.relatedTarget||n.fromElement)&&(Do(T)||T[ks]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=c,T=T?Do(T):null,T!==null&&(b=ca(T),T!==b||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=c),g!==T)){if(_=vE,O="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(_=wE,O="onPointerLeave",w="onPointerEnter",v="pointer"),b=g==null?p:Xa(g),E=T==null?p:Xa(T),p=new _(O,v+"leave",g,n,d),p.target=b,p.relatedTarget=E,O=null,Do(d)===c&&(_=new _(w,v+"enter",T,n,d),_.target=E,_.relatedTarget=b,O=_),b=O,g&&T)t:{for(_=g,w=T,v=0,E=_;E;E=Ra(E))v++;for(E=0,O=w;O;O=Ra(O))E++;for(;0<v-E;)_=Ra(_),v--;for(;0<E-v;)w=Ra(w),E--;for(;v--;){if(_===w||w!==null&&_===w.alternate)break t;_=Ra(_),w=Ra(w)}_=null}else _=null;g!==null&&PE(h,p,g,_,!1),T!==null&&b!==null&&PE(h,b,T,_,!0)}}e:{if(p=c?Xa(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var L=pO;else if(TE(p))if(vS)L=_O;else{L=yO;var j=gO}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=vO);if(L&&(L=L(t,c))){yS(h,L,n,d);break e}j&&j(t,p,c),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&Hg(p,"number",p.value)}switch(j=c?Xa(c):window,t){case"focusin":(TE(j)||j.contentEditable==="true")&&(Qa=j,iy=c,lc=null);break;case"focusout":lc=iy=Qa=null;break;case"mousedown":oy=!0;break;case"contextmenu":case"mouseup":case"dragend":oy=!1,RE(h,n,d);break;case"selectionchange":if(IO)break;case"keydown":case"keyup":RE(h,n,d)}var S;if(zv)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ka?pS(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(mS&&n.locale!=="ko"&&(Ka||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ka&&(S=fS()):(gi=d,jv="value"in gi?gi.value:gi.textContent,Ka=!0)),j=Ef(c,I),0<j.length&&(I=new _E(I,t,null,n,d),h.push({event:I,listeners:j}),S?I.data=S:(S=gS(n),S!==null&&(I.data=S)))),(S=cO?dO(t,n):hO(t,n))&&(c=Ef(c,"onBeforeInput"),0<c.length&&(d=new _E("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}RS(h,e)})}function Dc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ef(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sc(t,n),i!=null&&r.unshift(Dc(t,i,s)),i=Sc(t,e),i!=null&&r.push(Dc(t,i,s))),t=t.return}return r}function Ra(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Sc(n,i),l!=null&&o.unshift(Dc(n,l,a))):s||(l=Sc(n,i),l!=null&&o.push(Dc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SO=/\r\n?/g,AO=/\u0000|\uFFFD/g;function NE(t){return(typeof t=="string"?t:""+t).replace(SO,`
`).replace(AO,"")}function fh(t,e,n){if(e=NE(e),NE(t)!==e&&n)throw Error(H(425))}function If(){}var ay=null,ly=null;function uy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cy=typeof setTimeout=="function"?setTimeout:void 0,RO=typeof clearTimeout=="function"?clearTimeout:void 0,DE=typeof Promise=="function"?Promise:void 0,kO=typeof queueMicrotask=="function"?queueMicrotask:typeof DE<"u"?function(t){return DE.resolve(null).then(t).catch(CO)}:cy;function CO(t){setTimeout(function(){throw t})}function Jp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),kc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);kc(e)}function bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function OE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),$r="__reactFiber$"+Kl,Oc="__reactProps$"+Kl,ks="__reactContainer$"+Kl,dy="__reactEvents$"+Kl,PO="__reactListeners$"+Kl,NO="__reactHandles$"+Kl;function Do(t){var e=t[$r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ks]||n[$r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=OE(t);t!==null;){if(n=t[$r])return n;t=OE(t)}return e}t=n,n=t.parentNode}return null}function yd(t){return t=t[$r]||t[ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Tm(t){return t[Oc]||null}var hy=[],Ja=-1;function no(t){return{current:t}}function it(t){0>Ja||(t.current=hy[Ja],hy[Ja]=null,Ja--)}function Ze(t,e){Ja++,hy[Ja]=t.current,t.current=e}var ji={},En=no(ji),zn=no(!1),qo=ji;function yl(t,e){var n=t.type.contextTypes;if(!n)return ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $n(t){return t=t.childContextTypes,t!=null}function Tf(){it(zn),it(En)}function VE(t,e,n){if(En.current!==ji)throw Error(H(168));Ze(En,e),Ze(zn,n)}function CS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,gD(t)||"Unknown",s));return wt({},n,r)}function xf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ji,qo=En.current,Ze(En,t),Ze(zn,zn.current),!0}function LE(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=CS(t,e,qo),r.__reactInternalMemoizedMergedChildContext=t,it(zn),it(En),Ze(En,t)):it(zn),Ze(zn,n)}var ms=null,xm=!1,Zp=!1;function PS(t){ms===null?ms=[t]:ms.push(t)}function DO(t){xm=!0,PS(t)}function ro(){if(!Zp&&ms!==null){Zp=!0;var t=0,e=Ge;try{var n=ms;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ms=null,xm=!1}catch(s){throw ms!==null&&(ms=ms.slice(t+1)),nS(Vv,ro),s}finally{Ge=e,Zp=!1}}return null}var Za=[],el=0,bf=null,Sf=0,lr=[],ur=0,Wo=null,_s=1,ws="";function To(t,e){Za[el++]=Sf,Za[el++]=bf,bf=t,Sf=e}function NS(t,e,n){lr[ur++]=_s,lr[ur++]=ws,lr[ur++]=Wo,Wo=t;var r=_s;t=ws;var s=32-kr(r)-1;r&=~(1<<s),n+=1;var i=32-kr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_s=1<<32-kr(e)+s|n<<s|r,ws=i+t}else _s=1<<i|n<<s|r,ws=t}function qv(t){t.return!==null&&(To(t,1),NS(t,1,0))}function Wv(t){for(;t===bf;)bf=Za[--el],Za[el]=null,Sf=Za[--el],Za[el]=null;for(;t===Wo;)Wo=lr[--ur],lr[ur]=null,ws=lr[--ur],lr[ur]=null,_s=lr[--ur],lr[ur]=null}var er=null,Xn=null,dt=!1,br=null;function DS(t,e){var n=hr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ME(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,er=t,Xn=bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,er=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wo!==null?{id:_s,overflow:ws}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,er=t,Xn=null,!0):!1;default:return!1}}function fy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function my(t){if(dt){var e=Xn;if(e){var n=e;if(!ME(t,e)){if(fy(t))throw Error(H(418));e=bi(n.nextSibling);var r=er;e&&ME(t,e)?DS(r,n):(t.flags=t.flags&-4097|2,dt=!1,er=t)}}else{if(fy(t))throw Error(H(418));t.flags=t.flags&-4097|2,dt=!1,er=t}}}function FE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;er=t}function mh(t){if(t!==er)return!1;if(!dt)return FE(t),dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uy(t.type,t.memoizedProps)),e&&(e=Xn)){if(fy(t))throw OS(),Error(H(418));for(;e;)DS(t,e),e=bi(e.nextSibling)}if(FE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xn=bi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=er?bi(t.stateNode.nextSibling):null;return!0}function OS(){for(var t=Xn;t;)t=bi(t.nextSibling)}function vl(){Xn=er=null,dt=!1}function Gv(t){br===null?br=[t]:br.push(t)}var OO=Fs.ReactCurrentBatchConfig;function Ou(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function ph(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jE(t){var e=t._init;return e(t._payload)}function VS(t){function e(w,v){if(t){var E=w.deletions;E===null?(w.deletions=[v],w.flags|=16):E.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=ki(w,v),w.index=0,w.sibling=null,w}function i(w,v,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<v?(w.flags|=2,v):E):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,E,O){return v===null||v.tag!==6?(v=og(E,w.mode,O),v.return=w,v):(v=s(v,E),v.return=w,v)}function l(w,v,E,O){var L=E.type;return L===Ha?d(w,v,E.props.children,O,E.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===oi&&jE(L)===v.type)?(O=s(v,E.props),O.ref=Ou(w,v,E),O.return=w,O):(O=Xh(E.type,E.key,E.props,null,w.mode,O),O.ref=Ou(w,v,E),O.return=w,O)}function c(w,v,E,O){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=ag(E,w.mode,O),v.return=w,v):(v=s(v,E.children||[]),v.return=w,v)}function d(w,v,E,O,L){return v===null||v.tag!==7?(v=jo(E,w.mode,O,L),v.return=w,v):(v=s(v,E),v.return=w,v)}function h(w,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=og(""+v,w.mode,E),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case sh:return E=Xh(v.type,v.key,v.props,null,w.mode,E),E.ref=Ou(w,null,v),E.return=w,E;case Ga:return v=ag(v,w.mode,E),v.return=w,v;case oi:var O=v._init;return h(w,O(v._payload),E)}if(Hu(v)||ku(v))return v=jo(v,w.mode,E,null),v.return=w,v;ph(w,v)}return null}function p(w,v,E,O){var L=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:a(w,v,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case sh:return E.key===L?l(w,v,E,O):null;case Ga:return E.key===L?c(w,v,E,O):null;case oi:return L=E._init,p(w,v,L(E._payload),O)}if(Hu(E)||ku(E))return L!==null?null:d(w,v,E,O,null);ph(w,E)}return null}function g(w,v,E,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(E)||null,a(v,w,""+O,L);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case sh:return w=w.get(O.key===null?E:O.key)||null,l(v,w,O,L);case Ga:return w=w.get(O.key===null?E:O.key)||null,c(v,w,O,L);case oi:var j=O._init;return g(w,v,E,j(O._payload),L)}if(Hu(O)||ku(O))return w=w.get(E)||null,d(v,w,O,L,null);ph(v,O)}return null}function T(w,v,E,O){for(var L=null,j=null,S=v,I=v=0,C=null;S!==null&&I<E.length;I++){S.index>I?(C=S,S=null):C=S.sibling;var A=p(w,S,E[I],O);if(A===null){S===null&&(S=C);break}t&&S&&A.alternate===null&&e(w,S),v=i(A,v,I),j===null?L=A:j.sibling=A,j=A,S=C}if(I===E.length)return n(w,S),dt&&To(w,I),L;if(S===null){for(;I<E.length;I++)S=h(w,E[I],O),S!==null&&(v=i(S,v,I),j===null?L=S:j.sibling=S,j=S);return dt&&To(w,I),L}for(S=r(w,S);I<E.length;I++)C=g(S,w,I,E[I],O),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?I:C.key),v=i(C,v,I),j===null?L=C:j.sibling=C,j=C);return t&&S.forEach(function(D){return e(w,D)}),dt&&To(w,I),L}function _(w,v,E,O){var L=ku(E);if(typeof L!="function")throw Error(H(150));if(E=L.call(E),E==null)throw Error(H(151));for(var j=L=null,S=v,I=v=0,C=null,A=E.next();S!==null&&!A.done;I++,A=E.next()){S.index>I?(C=S,S=null):C=S.sibling;var D=p(w,S,A.value,O);if(D===null){S===null&&(S=C);break}t&&S&&D.alternate===null&&e(w,S),v=i(D,v,I),j===null?L=D:j.sibling=D,j=D,S=C}if(A.done)return n(w,S),dt&&To(w,I),L;if(S===null){for(;!A.done;I++,A=E.next())A=h(w,A.value,O),A!==null&&(v=i(A,v,I),j===null?L=A:j.sibling=A,j=A);return dt&&To(w,I),L}for(S=r(w,S);!A.done;I++,A=E.next())A=g(S,w,I,A.value,O),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?I:A.key),v=i(A,v,I),j===null?L=A:j.sibling=A,j=A);return t&&S.forEach(function(N){return e(w,N)}),dt&&To(w,I),L}function b(w,v,E,O){if(typeof E=="object"&&E!==null&&E.type===Ha&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case sh:e:{for(var L=E.key,j=v;j!==null;){if(j.key===L){if(L=E.type,L===Ha){if(j.tag===7){n(w,j.sibling),v=s(j,E.props.children),v.return=w,w=v;break e}}else if(j.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===oi&&jE(L)===j.type){n(w,j.sibling),v=s(j,E.props),v.ref=Ou(w,j,E),v.return=w,w=v;break e}n(w,j);break}else e(w,j);j=j.sibling}E.type===Ha?(v=jo(E.props.children,w.mode,O,E.key),v.return=w,w=v):(O=Xh(E.type,E.key,E.props,null,w.mode,O),O.ref=Ou(w,v,E),O.return=w,w=O)}return o(w);case Ga:e:{for(j=E.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(w,v.sibling),v=s(v,E.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=ag(E,w.mode,O),v.return=w,w=v}return o(w);case oi:return j=E._init,b(w,v,j(E._payload),O)}if(Hu(E))return T(w,v,E,O);if(ku(E))return _(w,v,E,O);ph(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,E),v.return=w,w=v):(n(w,v),v=og(E,w.mode,O),v.return=w,w=v),o(w)):n(w,v)}return b}var _l=VS(!0),LS=VS(!1),Af=no(null),Rf=null,tl=null,Hv=null;function Kv(){Hv=tl=Rf=null}function Qv(t){var e=Af.current;it(Af),t._currentValue=e}function py(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ll(t,e){Rf=t,Hv=tl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fn=!0),t.firstContext=null)}function mr(t){var e=t._currentValue;if(Hv!==t)if(t={context:t,memoizedValue:e,next:null},tl===null){if(Rf===null)throw Error(H(308));tl=t,Rf.dependencies={lanes:0,firstContext:t}}else tl=tl.next=t;return e}var Oo=null;function Yv(t){Oo===null?Oo=[t]:Oo.push(t)}function MS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yv(e)):(n.next=s.next,s.next=n),e.interleaved=n,Cs(t,r)}function Cs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ai=!1;function Xv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Cs(t,n)}return s=r.interleaved,s===null?(e.next=e,Yv(r)):(e.next=s.next,s.next=e),r.interleaved=e,Cs(t,n)}function Wh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lv(t,n)}}function UE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kf(t,e,n,r){var s=t.updateQueue;ai=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,_=a;switch(p=e,g=n,_.tag){case 1:if(T=_.payload,typeof T=="function"){h=T.call(g,h,p);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=_.payload,p=typeof T=="function"?T.call(g,h,p):T,p==null)break e;h=wt({},h,p);break e;case 2:ai=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ho|=o,t.lanes=o,t.memoizedState=h}}function BE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var vd={},Yr=no(vd),Vc=no(vd),Lc=no(vd);function Vo(t){if(t===vd)throw Error(H(174));return t}function Jv(t,e){switch(Ze(Lc,e),Ze(Vc,t),Ze(Yr,vd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qg(e,t)}it(Yr),Ze(Yr,e)}function wl(){it(Yr),it(Vc),it(Lc)}function jS(t){Vo(Lc.current);var e=Vo(Yr.current),n=Qg(e,t.type);e!==n&&(Ze(Vc,t),Ze(Yr,n))}function Zv(t){Vc.current===t&&(it(Yr),it(Vc))}var vt=no(0);function Cf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eg=[];function e_(){for(var t=0;t<eg.length;t++)eg[t]._workInProgressVersionPrimary=null;eg.length=0}var Gh=Fs.ReactCurrentDispatcher,tg=Fs.ReactCurrentBatchConfig,Go=0,_t=null,$t=null,Kt=null,Pf=!1,uc=!1,Mc=0,VO=0;function fn(){throw Error(H(321))}function t_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nr(t[n],e[n]))return!1;return!0}function n_(t,e,n,r,s,i){if(Go=i,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gh.current=t===null||t.memoizedState===null?jO:UO,t=n(r,s),uc){i=0;do{if(uc=!1,Mc=0,25<=i)throw Error(H(301));i+=1,Kt=$t=null,e.updateQueue=null,Gh.current=BO,t=n(r,s)}while(uc)}if(Gh.current=Nf,e=$t!==null&&$t.next!==null,Go=0,Kt=$t=_t=null,Pf=!1,e)throw Error(H(300));return t}function r_(){var t=Mc!==0;return Mc=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?_t.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function pr(){if($t===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=Kt===null?_t.memoizedState:Kt.next;if(e!==null)Kt=e,$t=t;else{if(t===null)throw Error(H(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Kt===null?_t.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function Fc(t,e){return typeof e=="function"?e(t):e}function ng(t){var e=pr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=$t,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Go&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,_t.lanes|=d,Ho|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Nr(r,e.memoizedState)||(Fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_t.lanes|=i,Ho|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rg(t){var e=pr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Nr(i,e.memoizedState)||(Fn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function US(){}function BS(t,e){var n=_t,r=pr(),s=e(),i=!Nr(r.memoizedState,s);if(i&&(r.memoizedState=s,Fn=!0),r=r.queue,s_(qS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Kt!==null&&Kt.memoizedState.tag&1){if(n.flags|=2048,jc(9,$S.bind(null,n,r,s,e),void 0,null),Yt===null)throw Error(H(349));Go&30||zS(n,e,s)}return s}function zS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $S(t,e,n,r){e.value=n,e.getSnapshot=r,WS(e)&&GS(t)}function qS(t,e,n){return n(function(){WS(e)&&GS(t)})}function WS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nr(t,n)}catch{return!0}}function GS(t){var e=Cs(t,1);e!==null&&Cr(e,t,1,-1)}function zE(t){var e=Br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:t},e.queue=t,t=t.dispatch=FO.bind(null,_t,t),[e.memoizedState,t]}function jc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function HS(){return pr().memoizedState}function Hh(t,e,n,r){var s=Br();_t.flags|=t,s.memoizedState=jc(1|e,n,void 0,r===void 0?null:r)}function bm(t,e,n,r){var s=pr();r=r===void 0?null:r;var i=void 0;if($t!==null){var o=$t.memoizedState;if(i=o.destroy,r!==null&&t_(r,o.deps)){s.memoizedState=jc(e,n,i,r);return}}_t.flags|=t,s.memoizedState=jc(1|e,n,i,r)}function $E(t,e){return Hh(8390656,8,t,e)}function s_(t,e){return bm(2048,8,t,e)}function KS(t,e){return bm(4,2,t,e)}function QS(t,e){return bm(4,4,t,e)}function YS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function XS(t,e,n){return n=n!=null?n.concat([t]):null,bm(4,4,YS.bind(null,e,t),n)}function i_(){}function JS(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&t_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ZS(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&t_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function eA(t,e,n){return Go&21?(Nr(n,e)||(n=iS(),_t.lanes|=n,Ho|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fn=!0),t.memoizedState=n)}function LO(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=tg.transition;tg.transition={};try{t(!1),e()}finally{Ge=n,tg.transition=r}}function tA(){return pr().memoizedState}function MO(t,e,n){var r=Ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nA(t))rA(e,n);else if(n=MS(t,e,n,r),n!==null){var s=Sn();Cr(n,t,r,s),sA(n,e,r)}}function FO(t,e,n){var r=Ri(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nA(t))rA(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Nr(a,o)){var l=e.interleaved;l===null?(s.next=s,Yv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=MS(t,e,s,r),n!==null&&(s=Sn(),Cr(n,t,r,s),sA(n,e,r))}}function nA(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function rA(t,e){uc=Pf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lv(t,n)}}var Nf={readContext:mr,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},jO={readContext:mr,useCallback:function(t,e){return Br().memoizedState=[t,e===void 0?null:e],t},useContext:mr,useEffect:$E,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4194308,4,YS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hh(4,2,t,e)},useMemo:function(t,e){var n=Br();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Br();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MO.bind(null,_t,t),[r.memoizedState,t]},useRef:function(t){var e=Br();return t={current:t},e.memoizedState=t},useState:zE,useDebugValue:i_,useDeferredValue:function(t){return Br().memoizedState=t},useTransition:function(){var t=zE(!1),e=t[0];return t=LO.bind(null,t[1]),Br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_t,s=Br();if(dt){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Yt===null)throw Error(H(349));Go&30||zS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,$E(qS.bind(null,r,i,t),[t]),r.flags|=2048,jc(9,$S.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Br(),e=Yt.identifierPrefix;if(dt){var n=ws,r=_s;n=(r&~(1<<32-kr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UO={readContext:mr,useCallback:JS,useContext:mr,useEffect:s_,useImperativeHandle:XS,useInsertionEffect:KS,useLayoutEffect:QS,useMemo:ZS,useReducer:ng,useRef:HS,useState:function(){return ng(Fc)},useDebugValue:i_,useDeferredValue:function(t){var e=pr();return eA(e,$t.memoizedState,t)},useTransition:function(){var t=ng(Fc)[0],e=pr().memoizedState;return[t,e]},useMutableSource:US,useSyncExternalStore:BS,useId:tA,unstable_isNewReconciler:!1},BO={readContext:mr,useCallback:JS,useContext:mr,useEffect:s_,useImperativeHandle:XS,useInsertionEffect:KS,useLayoutEffect:QS,useMemo:ZS,useReducer:rg,useRef:HS,useState:function(){return rg(Fc)},useDebugValue:i_,useDeferredValue:function(t){var e=pr();return $t===null?e.memoizedState=t:eA(e,$t.memoizedState,t)},useTransition:function(){var t=rg(Fc)[0],e=pr().memoizedState;return[t,e]},useMutableSource:US,useSyncExternalStore:BS,useId:tA,unstable_isNewReconciler:!1};function Tr(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sm={isMounted:function(t){return(t=t._reactInternals)?ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Sn(),s=Ri(t),i=bs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Si(t,i,s),e!==null&&(Cr(e,t,s,r),Wh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Sn(),s=Ri(t),i=bs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Si(t,i,s),e!==null&&(Cr(e,t,s,r),Wh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sn(),r=Ri(t),s=bs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Si(t,s,r),e!==null&&(Cr(e,t,r,n),Wh(e,t,r))}};function qE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Pc(n,r)||!Pc(s,i):!0}function iA(t,e,n){var r=!1,s=ji,i=e.contextType;return typeof i=="object"&&i!==null?i=mr(i):(s=$n(e)?qo:En.current,r=e.contextTypes,i=(r=r!=null)?yl(t,s):ji),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function WE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sm.enqueueReplaceState(e,e.state,null)}function yy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Xv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=mr(i):(i=$n(e)?qo:En.current,s.context=yl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sm.enqueueReplaceState(s,s.state,null),kf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function El(t,e){try{var n="",r=e;do n+=pD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zO=typeof WeakMap=="function"?WeakMap:Map;function oA(t,e,n){n=bs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Of||(Of=!0,Ry=r),vy(t,e)},n}function aA(t,e,n){n=bs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vy(t,e),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function GE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=nV.bind(null,t,e,n),e.then(t,t))}function HE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function KE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bs(-1,1),e.tag=2,Si(n,e,1))),n.lanes|=1),t)}var $O=Fs.ReactCurrentOwner,Fn=!1;function xn(t,e,n,r){e.child=t===null?LS(e,null,n,r):_l(e,t.child,n,r)}function QE(t,e,n,r,s){n=n.render;var i=e.ref;return ll(e,s),r=n_(t,e,n,r,i,s),n=r_(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ps(t,e,s)):(dt&&n&&qv(e),e.flags|=1,xn(t,e,r,s),e.child)}function YE(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!f_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,lA(t,e,i,r,s)):(t=Xh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Pc,n(o,r)&&t.ref===e.ref)return Ps(t,e,s)}return e.flags|=1,t=ki(i,r),t.ref=e.ref,t.return=e,e.child=t}function lA(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Pc(i,r)&&t.ref===e.ref)if(Fn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Fn=!0);else return e.lanes=t.lanes,Ps(t,e,s)}return _y(t,e,n,r,s)}function uA(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(rl,Qn),Qn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(rl,Qn),Qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ze(rl,Qn),Qn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ze(rl,Qn),Qn|=r;return xn(t,e,s,n),e.child}function cA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _y(t,e,n,r,s){var i=$n(n)?qo:En.current;return i=yl(e,i),ll(e,s),n=n_(t,e,n,r,i,s),r=r_(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ps(t,e,s)):(dt&&r&&qv(e),e.flags|=1,xn(t,e,n,s),e.child)}function XE(t,e,n,r,s){if($n(n)){var i=!0;xf(e)}else i=!1;if(ll(e,s),e.stateNode===null)Kh(t,e),iA(e,n,r),yy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=mr(c):(c=$n(n)?qo:En.current,c=yl(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&WE(e,o,r,c),ai=!1;var p=e.memoizedState;o.state=p,kf(e,r,o,s),l=e.memoizedState,a!==r||p!==l||zn.current||ai?(typeof d=="function"&&(gy(e,n,d,r),l=e.memoizedState),(a=ai||qE(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,FS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Tr(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=mr(l):(l=$n(n)?qo:En.current,l=yl(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&WE(e,o,r,l),ai=!1,p=e.memoizedState,o.state=p,kf(e,r,o,s);var T=e.memoizedState;a!==h||p!==T||zn.current||ai?(typeof g=="function"&&(gy(e,n,g,r),T=e.memoizedState),(c=ai||qE(e,n,c,r,p,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return wy(t,e,n,r,i,s)}function wy(t,e,n,r,s,i){cA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&LE(e,n,!1),Ps(t,e,i);r=e.stateNode,$O.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_l(e,t.child,null,i),e.child=_l(e,null,a,i)):xn(t,e,a,i),e.memoizedState=r.state,s&&LE(e,n,!0),e.child}function dA(t){var e=t.stateNode;e.pendingContext?VE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&VE(t,e.context,!1),Jv(t,e.containerInfo)}function JE(t,e,n,r,s){return vl(),Gv(s),e.flags|=256,xn(t,e,n,r),e.child}var Ey={dehydrated:null,treeContext:null,retryLane:0};function Iy(t){return{baseLanes:t,cachePool:null,transitions:null}}function hA(t,e,n){var r=e.pendingProps,s=vt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ze(vt,s&1),t===null)return my(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=km(o,r,0,null),t=jo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Iy(n),e.memoizedState=Ey,t):o_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return qO(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ki(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ki(a,i):(i=jo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Iy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ey,r}return i=t.child,t=i.sibling,r=ki(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function o_(t,e){return e=km({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gh(t,e,n,r){return r!==null&&Gv(r),_l(e,t.child,null,n),t=o_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=sg(Error(H(422))),gh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=km({mode:"visible",children:r.children},s,0,null),i=jo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_l(e,t.child,null,o),e.child.memoizedState=Iy(o),e.memoizedState=Ey,i);if(!(e.mode&1))return gh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(H(419)),r=sg(i,r,void 0),gh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Fn||a){if(r=Yt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Cs(t,s),Cr(r,t,s,-1))}return h_(),r=sg(Error(H(421))),gh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=rV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xn=bi(s.nextSibling),er=e,dt=!0,br=null,t!==null&&(lr[ur++]=_s,lr[ur++]=ws,lr[ur++]=Wo,_s=t.id,ws=t.overflow,Wo=e),e=o_(e,r.children),e.flags|=4096,e)}function ZE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),py(t.return,e,n)}function ig(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fA(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xn(t,e,r.children,n),r=vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ZE(t,n,e);else if(t.tag===19)ZE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ze(vt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Cf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ig(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Cf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ig(e,!0,n,null,i);break;case"together":ig(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ps(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ho|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WO(t,e,n){switch(e.tag){case 3:dA(e),vl();break;case 5:jS(e);break;case 1:$n(e.type)&&xf(e);break;case 4:Jv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ze(Af,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ze(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?hA(t,e,n):(Ze(vt,vt.current&1),t=Ps(t,e,n),t!==null?t.sibling:null);Ze(vt,vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fA(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ze(vt,vt.current),r)break;return null;case 22:case 23:return e.lanes=0,uA(t,e,n)}return Ps(t,e,n)}var mA,Ty,pA,gA;mA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ty=function(){};pA=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vo(Yr.current);var i=null;switch(n){case"input":s=Wg(t,s),r=Wg(t,r),i=[];break;case"select":s=wt({},s,{value:void 0}),r=wt({},r,{value:void 0}),i=[];break;case"textarea":s=Kg(t,s),r=Kg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=If)}Yg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&nt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};gA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vu(t,e){if(!dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GO(t,e,n){var r=e.pendingProps;switch(Wv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(e),null;case 1:return $n(e.type)&&Tf(),mn(e),null;case 3:return r=e.stateNode,wl(),it(zn),it(En),e_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,br!==null&&(Py(br),br=null))),Ty(t,e),mn(e),null;case 5:Zv(e);var s=Vo(Lc.current);if(n=e.type,t!==null&&e.stateNode!=null)pA(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return mn(e),null}if(t=Vo(Yr.current),mh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$r]=e,r[Oc]=i,t=(e.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(s=0;s<Qu.length;s++)nt(Qu[s],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":lE(r,i),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},nt("invalid",r);break;case"textarea":cE(r,i),nt("invalid",r)}Yg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&fh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&fh(r.textContent,a,t),s=["children",""+a]):xc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nt("scroll",r)}switch(n){case"input":ih(r),uE(r,i,!0);break;case"textarea":ih(r),dE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=If)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$r]=e,t[Oc]=r,mA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xg(n,r),n){case"dialog":nt("cancel",t),nt("close",t),s=r;break;case"iframe":case"object":case"embed":nt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Qu.length;s++)nt(Qu[s],t);s=r;break;case"source":nt("error",t),s=r;break;case"img":case"image":case"link":nt("error",t),nt("load",t),s=r;break;case"details":nt("toggle",t),s=r;break;case"input":lE(t,r),s=Wg(t,r),nt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=wt({},r,{value:void 0}),nt("invalid",t);break;case"textarea":cE(t,r),s=Kg(t,r),nt("invalid",t);break;default:s=r}Yg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Hb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Wb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bc(t,l):typeof l=="number"&&bc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&nt("scroll",t):l!=null&&Cv(t,i,l,o))}switch(n){case"input":ih(t),uE(t,r,!1);break;case"textarea":ih(t),dE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?sl(t,!!r.multiple,i,!1):r.defaultValue!=null&&sl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=If)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mn(e),null;case 6:if(t&&e.stateNode!=null)gA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Vo(Lc.current),Vo(Yr.current),mh(e)){if(r=e.stateNode,n=e.memoizedProps,r[$r]=e,(i=r.nodeValue!==n)&&(t=er,t!==null))switch(t.tag){case 3:fh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$r]=e,e.stateNode=r}return mn(e),null;case 13:if(it(vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dt&&Xn!==null&&e.mode&1&&!(e.flags&128))OS(),vl(),e.flags|=98560,i=!1;else if(i=mh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[$r]=e}else vl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mn(e),i=!1}else br!==null&&(Py(br),br=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?qt===0&&(qt=3):h_())),e.updateQueue!==null&&(e.flags|=4),mn(e),null);case 4:return wl(),Ty(t,e),t===null&&Nc(e.stateNode.containerInfo),mn(e),null;case 10:return Qv(e.type._context),mn(e),null;case 17:return $n(e.type)&&Tf(),mn(e),null;case 19:if(it(vt),i=e.memoizedState,i===null)return mn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vu(i,!1);else{if(qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cf(t),o!==null){for(e.flags|=128,Vu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(vt,vt.current&1|2),e.child}t=t.sibling}i.tail!==null&&kt()>Il&&(e.flags|=128,r=!0,Vu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Cf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!dt)return mn(e),null}else 2*kt()-i.renderingStartTime>Il&&n!==1073741824&&(e.flags|=128,r=!0,Vu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=kt(),e.sibling=null,n=vt.current,Ze(vt,r?n&1|2:n&1),e):(mn(e),null);case 22:case 23:return d_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qn&1073741824&&(mn(e),e.subtreeFlags&6&&(e.flags|=8192)):mn(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function HO(t,e){switch(Wv(e),e.tag){case 1:return $n(e.type)&&Tf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wl(),it(zn),it(En),e_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zv(e),null;case 13:if(it(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));vl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(vt),null;case 4:return wl(),null;case 10:return Qv(e.type._context),null;case 22:case 23:return d_(),null;case 24:return null;default:return null}}var yh=!1,vn=!1,KO=typeof WeakSet=="function"?WeakSet:Set,oe=null;function nl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xt(t,e,r)}else n.current=null}function xy(t,e,n){try{n()}catch(r){xt(t,e,r)}}var eI=!1;function QO(t,e){if(ay=_f,t=ES(),$v(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ly={focusedElem:t,selectionRange:n},_f=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var _=T.memoizedProps,b=T.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?_:Tr(e.type,_),b);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(O){xt(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return T=eI,eI=!1,T}function cc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&xy(e,n,i)}s=s.next}while(s!==r)}}function Am(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function by(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yA(t){var e=t.alternate;e!==null&&(t.alternate=null,yA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[Oc],delete e[dy],delete e[PO],delete e[NO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vA(t){return t.tag===5||t.tag===3||t.tag===4}function tI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=If));else if(r!==4&&(t=t.child,t!==null))for(Sy(t,e,n),t=t.sibling;t!==null;)Sy(t,e,n),t=t.sibling}function Ay(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ay(t,e,n),t=t.sibling;t!==null;)Ay(t,e,n),t=t.sibling}var sn=null,xr=!1;function Zs(t,e,n){for(n=n.child;n!==null;)_A(t,e,n),n=n.sibling}function _A(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(_m,n)}catch{}switch(n.tag){case 5:vn||nl(n,e);case 6:var r=sn,s=xr;sn=null,Zs(t,e,n),sn=r,xr=s,sn!==null&&(xr?(t=sn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sn.removeChild(n.stateNode));break;case 18:sn!==null&&(xr?(t=sn,n=n.stateNode,t.nodeType===8?Jp(t.parentNode,n):t.nodeType===1&&Jp(t,n),kc(t)):Jp(sn,n.stateNode));break;case 4:r=sn,s=xr,sn=n.stateNode.containerInfo,xr=!0,Zs(t,e,n),sn=r,xr=s;break;case 0:case 11:case 14:case 15:if(!vn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xy(n,e,o),s=s.next}while(s!==r)}Zs(t,e,n);break;case 1:if(!vn&&(nl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xt(n,e,a)}Zs(t,e,n);break;case 21:Zs(t,e,n);break;case 22:n.mode&1?(vn=(r=vn)||n.memoizedState!==null,Zs(t,e,n),vn=r):Zs(t,e,n);break;default:Zs(t,e,n)}}function nI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KO),e.forEach(function(r){var s=sV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Er(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:sn=a.stateNode,xr=!1;break e;case 3:sn=a.stateNode.containerInfo,xr=!0;break e;case 4:sn=a.stateNode.containerInfo,xr=!0;break e}a=a.return}if(sn===null)throw Error(H(160));_A(i,o,s),sn=null,xr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){xt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wA(e,t),e=e.sibling}function wA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Er(e,t),jr(t),r&4){try{cc(3,t,t.return),Am(3,t)}catch(_){xt(t,t.return,_)}try{cc(5,t,t.return)}catch(_){xt(t,t.return,_)}}break;case 1:Er(e,t),jr(t),r&512&&n!==null&&nl(n,n.return);break;case 5:if(Er(e,t),jr(t),r&512&&n!==null&&nl(n,n.return),t.flags&32){var s=t.stateNode;try{bc(s,"")}catch(_){xt(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&zb(s,i),Xg(a,o);var c=Xg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Hb(s,h):d==="dangerouslySetInnerHTML"?Wb(s,h):d==="children"?bc(s,h):Cv(s,d,h,c)}switch(a){case"input":Gg(s,i);break;case"textarea":$b(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?sl(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?sl(s,!!i.multiple,i.defaultValue,!0):sl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oc]=i}catch(_){xt(t,t.return,_)}}break;case 6:if(Er(e,t),jr(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){xt(t,t.return,_)}}break;case 3:if(Er(e,t),jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kc(e.containerInfo)}catch(_){xt(t,t.return,_)}break;case 4:Er(e,t),jr(t);break;case 13:Er(e,t),jr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(u_=kt())),r&4&&nI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(vn=(c=vn)||d,Er(e,t),vn=c):Er(e,t),jr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(oe=t,d=t.child;d!==null;){for(h=oe=d;oe!==null;){switch(p=oe,g=p.child,p.tag){case 0:case 11:case 14:case 15:cc(4,p,p.return);break;case 1:nl(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(_){xt(r,n,_)}}break;case 5:nl(p,p.return);break;case 22:if(p.memoizedState!==null){sI(h);continue}}g!==null?(g.return=p,oe=g):sI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Gb("display",o))}catch(_){xt(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){xt(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Er(e,t),jr(t),r&4&&nI(t);break;case 21:break;default:Er(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vA(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bc(s,""),r.flags&=-33);var i=tI(t);Ay(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tI(t);Sy(t,a,o);break;default:throw Error(H(161))}}catch(l){xt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YO(t,e,n){oe=t,EA(t)}function EA(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var s=oe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||yh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||vn;a=yh;var c=vn;if(yh=o,(vn=l)&&!c)for(oe=s;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?iI(s):l!==null?(l.return=o,oe=l):iI(s);for(;i!==null;)oe=i,EA(i),i=i.sibling;oe=s,yh=a,vn=c}rI(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,oe=i):rI(t)}}function rI(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vn||Am(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Tr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&BE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}BE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&kc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}vn||e.flags&512&&by(e)}catch(p){xt(e,e.return,p)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function sI(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function iI(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Am(4,e)}catch(l){xt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){xt(e,s,l)}}var i=e.return;try{by(e)}catch(l){xt(e,i,l)}break;case 5:var o=e.return;try{by(e)}catch(l){xt(e,o,l)}}}catch(l){xt(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var XO=Math.ceil,Df=Fs.ReactCurrentDispatcher,a_=Fs.ReactCurrentOwner,fr=Fs.ReactCurrentBatchConfig,je=0,Yt=null,jt=null,un=0,Qn=0,rl=no(0),qt=0,Uc=null,Ho=0,Rm=0,l_=0,dc=null,Ln=null,u_=0,Il=1/0,fs=null,Of=!1,Ry=null,Ai=null,vh=!1,yi=null,Vf=0,hc=0,ky=null,Qh=-1,Yh=0;function Sn(){return je&6?kt():Qh!==-1?Qh:Qh=kt()}function Ri(t){return t.mode&1?je&2&&un!==0?un&-un:OO.transition!==null?(Yh===0&&(Yh=iS()),Yh):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:hS(t.type)),t):1}function Cr(t,e,n,r){if(50<hc)throw hc=0,ky=null,Error(H(185));pd(t,n,r),(!(je&2)||t!==Yt)&&(t===Yt&&(!(je&2)&&(Rm|=n),qt===4&&ci(t,un)),qn(t,r),n===1&&je===0&&!(e.mode&1)&&(Il=kt()+500,xm&&ro()))}function qn(t,e){var n=t.callbackNode;OD(t,e);var r=vf(t,t===Yt?un:0);if(r===0)n!==null&&mE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mE(n),e===1)t.tag===0?DO(oI.bind(null,t)):PS(oI.bind(null,t)),kO(function(){!(je&6)&&ro()}),n=null;else{switch(oS(r)){case 1:n=Vv;break;case 4:n=rS;break;case 16:n=yf;break;case 536870912:n=sS;break;default:n=yf}n=kA(n,IA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IA(t,e){if(Qh=-1,Yh=0,je&6)throw Error(H(327));var n=t.callbackNode;if(ul()&&t.callbackNode!==n)return null;var r=vf(t,t===Yt?un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lf(t,r);else{e=r;var s=je;je|=2;var i=xA();(Yt!==t||un!==e)&&(fs=null,Il=kt()+500,Fo(t,e));do try{eV();break}catch(a){TA(t,a)}while(!0);Kv(),Df.current=i,je=s,jt!==null?e=0:(Yt=null,un=0,e=qt)}if(e!==0){if(e===2&&(s=ny(t),s!==0&&(r=s,e=Cy(t,s))),e===1)throw n=Uc,Fo(t,0),ci(t,r),qn(t,kt()),n;if(e===6)ci(t,r);else{if(s=t.current.alternate,!(r&30)&&!JO(s)&&(e=Lf(t,r),e===2&&(i=ny(t),i!==0&&(r=i,e=Cy(t,i))),e===1))throw n=Uc,Fo(t,0),ci(t,r),qn(t,kt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:xo(t,Ln,fs);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=u_+500-kt(),10<e)){if(vf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Sn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cy(xo.bind(null,t,Ln,fs),e);break}xo(t,Ln,fs);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-kr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XO(r/1960))-r,10<r){t.timeoutHandle=cy(xo.bind(null,t,Ln,fs),r);break}xo(t,Ln,fs);break;case 5:xo(t,Ln,fs);break;default:throw Error(H(329))}}}return qn(t,kt()),t.callbackNode===n?IA.bind(null,t):null}function Cy(t,e){var n=dc;return t.current.memoizedState.isDehydrated&&(Fo(t,e).flags|=256),t=Lf(t,e),t!==2&&(e=Ln,Ln=n,e!==null&&Py(e)),t}function Py(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function JO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~l_,e&=~Rm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kr(e),r=1<<n;t[n]=-1,e&=~r}}function oI(t){if(je&6)throw Error(H(327));ul();var e=vf(t,0);if(!(e&1))return qn(t,kt()),null;var n=Lf(t,e);if(t.tag!==0&&n===2){var r=ny(t);r!==0&&(e=r,n=Cy(t,r))}if(n===1)throw n=Uc,Fo(t,0),ci(t,e),qn(t,kt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xo(t,Ln,fs),qn(t,kt()),null}function c_(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Il=kt()+500,xm&&ro())}}function Ko(t){yi!==null&&yi.tag===0&&!(je&6)&&ul();var e=je;je|=1;var n=fr.transition,r=Ge;try{if(fr.transition=null,Ge=1,t)return t()}finally{Ge=r,fr.transition=n,je=e,!(je&6)&&ro()}}function d_(){Qn=rl.current,it(rl)}function Fo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RO(n)),jt!==null)for(n=jt.return;n!==null;){var r=n;switch(Wv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tf();break;case 3:wl(),it(zn),it(En),e_();break;case 5:Zv(r);break;case 4:wl();break;case 13:it(vt);break;case 19:it(vt);break;case 10:Qv(r.type._context);break;case 22:case 23:d_()}n=n.return}if(Yt=t,jt=t=ki(t.current,null),un=Qn=e,qt=0,Uc=null,l_=Rm=Ho=0,Ln=dc=null,Oo!==null){for(e=0;e<Oo.length;e++)if(n=Oo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Oo=null}return t}function TA(t,e){do{var n=jt;try{if(Kv(),Gh.current=Nf,Pf){for(var r=_t.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pf=!1}if(Go=0,Kt=$t=_t=null,uc=!1,Mc=0,a_.current=null,n===null||n.return===null){qt=1,Uc=e,jt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=HE(o);if(g!==null){g.flags&=-257,KE(g,o,a,i,e),g.mode&1&&GE(i,c,e),e=g,l=c;var T=e.updateQueue;if(T===null){var _=new Set;_.add(l),e.updateQueue=_}else T.add(l);break e}else{if(!(e&1)){GE(i,c,e),h_();break e}l=Error(H(426))}}else if(dt&&a.mode&1){var b=HE(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),KE(b,o,a,i,e),Gv(El(l,a));break e}}i=l=El(l,a),qt!==4&&(qt=2),dc===null?dc=[i]:dc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=oA(i,l,e);UE(i,w);break e;case 1:a=l;var v=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ai===null||!Ai.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=aA(i,a,e);UE(i,O);break e}}i=i.return}while(i!==null)}SA(n)}catch(L){e=L,jt===n&&n!==null&&(jt=n=n.return);continue}break}while(!0)}function xA(){var t=Df.current;return Df.current=Nf,t===null?Nf:t}function h_(){(qt===0||qt===3||qt===2)&&(qt=4),Yt===null||!(Ho&268435455)&&!(Rm&268435455)||ci(Yt,un)}function Lf(t,e){var n=je;je|=2;var r=xA();(Yt!==t||un!==e)&&(fs=null,Fo(t,e));do try{ZO();break}catch(s){TA(t,s)}while(!0);if(Kv(),je=n,Df.current=r,jt!==null)throw Error(H(261));return Yt=null,un=0,qt}function ZO(){for(;jt!==null;)bA(jt)}function eV(){for(;jt!==null&&!bD();)bA(jt)}function bA(t){var e=RA(t.alternate,t,Qn);t.memoizedProps=t.pendingProps,e===null?SA(t):jt=e,a_.current=null}function SA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HO(n,e),n!==null){n.flags&=32767,jt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qt=6,jt=null;return}}else if(n=GO(n,e,Qn),n!==null){jt=n;return}if(e=e.sibling,e!==null){jt=e;return}jt=e=t}while(e!==null);qt===0&&(qt=5)}function xo(t,e,n){var r=Ge,s=fr.transition;try{fr.transition=null,Ge=1,tV(t,e,n,r)}finally{fr.transition=s,Ge=r}return null}function tV(t,e,n,r){do ul();while(yi!==null);if(je&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(VD(t,i),t===Yt&&(jt=Yt=null,un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vh||(vh=!0,kA(yf,function(){return ul(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fr.transition,fr.transition=null;var o=Ge;Ge=1;var a=je;je|=4,a_.current=null,QO(t,n),wA(n,t),EO(ly),_f=!!ay,ly=ay=null,t.current=n,YO(n),SD(),je=a,Ge=o,fr.transition=i}else t.current=n;if(vh&&(vh=!1,yi=t,Vf=s),i=t.pendingLanes,i===0&&(Ai=null),kD(n.stateNode),qn(t,kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Of)throw Of=!1,t=Ry,Ry=null,t;return Vf&1&&t.tag!==0&&ul(),i=t.pendingLanes,i&1?t===ky?hc++:(hc=0,ky=t):hc=0,ro(),null}function ul(){if(yi!==null){var t=oS(Vf),e=fr.transition,n=Ge;try{if(fr.transition=null,Ge=16>t?16:t,yi===null)var r=!1;else{if(t=yi,yi=null,Vf=0,je&6)throw Error(H(331));var s=je;for(je|=4,oe=t.current;oe!==null;){var i=oe,o=i.child;if(oe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(oe=c;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:cc(8,d,i)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var p=d.sibling,g=d.return;if(yA(d),d===c){oe=null;break}if(p!==null){p.return=g,oe=p;break}oe=g}}}var T=i.alternate;if(T!==null){var _=T.child;if(_!==null){T.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,oe=o;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,oe=w;break e}oe=i.return}}var v=t.current;for(oe=v;oe!==null;){o=oe;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,oe=E;else e:for(o=v;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Am(9,a)}}catch(L){xt(a,a.return,L)}if(a===o){oe=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,oe=O;break e}oe=a.return}}if(je=s,ro(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(_m,t)}catch{}r=!0}return r}finally{Ge=n,fr.transition=e}}return!1}function aI(t,e,n){e=El(n,e),e=oA(t,e,1),t=Si(t,e,1),e=Sn(),t!==null&&(pd(t,1,e),qn(t,e))}function xt(t,e,n){if(t.tag===3)aI(t,t,n);else for(;e!==null;){if(e.tag===3){aI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){t=El(n,t),t=aA(e,t,1),e=Si(e,t,1),t=Sn(),e!==null&&(pd(e,1,t),qn(e,t));break}}e=e.return}}function nV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Sn(),t.pingedLanes|=t.suspendedLanes&n,Yt===t&&(un&n)===n&&(qt===4||qt===3&&(un&130023424)===un&&500>kt()-u_?Fo(t,0):l_|=n),qn(t,e)}function AA(t,e){e===0&&(t.mode&1?(e=lh,lh<<=1,!(lh&130023424)&&(lh=4194304)):e=1);var n=Sn();t=Cs(t,e),t!==null&&(pd(t,e,n),qn(t,n))}function rV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),AA(t,n)}function sV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),AA(t,n)}var RA;RA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zn.current)Fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fn=!1,WO(t,e,n);Fn=!!(t.flags&131072)}else Fn=!1,dt&&e.flags&1048576&&NS(e,Sf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kh(t,e),t=e.pendingProps;var s=yl(e,En.current);ll(e,n),s=n_(null,e,r,t,s,n);var i=r_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$n(r)?(i=!0,xf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xv(e),s.updater=Sm,e.stateNode=s,s._reactInternals=e,yy(e,r,t,n),e=wy(null,e,r,!0,i,n)):(e.tag=0,dt&&i&&qv(e),xn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=oV(r),t=Tr(r,t),s){case 0:e=_y(null,e,r,t,n);break e;case 1:e=XE(null,e,r,t,n);break e;case 11:e=QE(null,e,r,t,n);break e;case 14:e=YE(null,e,r,Tr(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tr(r,s),_y(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tr(r,s),XE(t,e,r,s,n);case 3:e:{if(dA(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,FS(t,e),kf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=El(Error(H(423)),e),e=JE(t,e,r,n,s);break e}else if(r!==s){s=El(Error(H(424)),e),e=JE(t,e,r,n,s);break e}else for(Xn=bi(e.stateNode.containerInfo.firstChild),er=e,dt=!0,br=null,n=LS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vl(),r===s){e=Ps(t,e,n);break e}xn(t,e,r,n)}e=e.child}return e;case 5:return jS(e),t===null&&my(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,uy(r,s)?o=null:i!==null&&uy(r,i)&&(e.flags|=32),cA(t,e),xn(t,e,o,n),e.child;case 6:return t===null&&my(e),null;case 13:return hA(t,e,n);case 4:return Jv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_l(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tr(r,s),QE(t,e,r,s,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ze(Af,r._currentValue),r._currentValue=o,i!==null)if(Nr(i.value,o)){if(i.children===s.children&&!zn.current){e=Ps(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=bs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),py(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),py(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ll(e,n),s=mr(s),r=r(s),e.flags|=1,xn(t,e,r,n),e.child;case 14:return r=e.type,s=Tr(r,e.pendingProps),s=Tr(r.type,s),YE(t,e,r,s,n);case 15:return lA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tr(r,s),Kh(t,e),e.tag=1,$n(r)?(t=!0,xf(e)):t=!1,ll(e,n),iA(e,r,s),yy(e,r,s,n),wy(null,e,r,!0,t,n);case 19:return fA(t,e,n);case 22:return uA(t,e,n)}throw Error(H(156,e.tag))};function kA(t,e){return nS(t,e)}function iV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,e,n,r){return new iV(t,e,n,r)}function f_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oV(t){if(typeof t=="function")return f_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nv)return 11;if(t===Dv)return 14}return 2}function ki(t,e){var n=t.alternate;return n===null?(n=hr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")f_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ha:return jo(n.children,s,i,e);case Pv:o=8,s|=8;break;case Bg:return t=hr(12,n,e,s|2),t.elementType=Bg,t.lanes=i,t;case zg:return t=hr(13,n,e,s),t.elementType=zg,t.lanes=i,t;case $g:return t=hr(19,n,e,s),t.elementType=$g,t.lanes=i,t;case jb:return km(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mb:o=10;break e;case Fb:o=9;break e;case Nv:o=11;break e;case Dv:o=14;break e;case oi:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=hr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function jo(t,e,n,r){return t=hr(7,t,r,e),t.lanes=n,t}function km(t,e,n,r){return t=hr(22,t,r,e),t.elementType=jb,t.lanes=n,t.stateNode={isHidden:!1},t}function og(t,e,n){return t=hr(6,t,null,e),t.lanes=n,t}function ag(t,e,n){return e=hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aV(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bp(0),this.expirationTimes=Bp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function m_(t,e,n,r,s,i,o,a,l){return t=new aV(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=hr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xv(i),t}function lV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ga,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function CA(t){if(!t)return ji;t=t._reactInternals;e:{if(ca(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if($n(n))return CS(t,n,e)}return e}function PA(t,e,n,r,s,i,o,a,l){return t=m_(n,r,!0,t,s,i,o,a,l),t.context=CA(null),n=t.current,r=Sn(),s=Ri(n),i=bs(r,s),i.callback=e??null,Si(n,i,s),t.current.lanes=s,pd(t,s,r),qn(t,r),t}function Cm(t,e,n,r){var s=e.current,i=Sn(),o=Ri(s);return n=CA(n),e.context===null?e.context=n:e.pendingContext=n,e=bs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Si(s,e,o),t!==null&&(Cr(t,s,o,i),Wh(t,s,o)),o}function Mf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function p_(t,e){lI(t,e),(t=t.alternate)&&lI(t,e)}function uV(){return null}var NA=typeof reportError=="function"?reportError:function(t){console.error(t)};function g_(t){this._internalRoot=t}Pm.prototype.render=g_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Cm(t,e,null,null)};Pm.prototype.unmount=g_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ko(function(){Cm(null,t,null,null)}),e[ks]=null}};function Pm(t){this._internalRoot=t}Pm.prototype.unstable_scheduleHydration=function(t){if(t){var e=uS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&dS(t)}};function y_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uI(){}function cV(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Mf(o);i.call(c)}}var o=PA(e,r,t,0,null,!1,!1,"",uI);return t._reactRootContainer=o,t[ks]=o.current,Nc(t.nodeType===8?t.parentNode:t),Ko(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Mf(l);a.call(c)}}var l=m_(t,0,!1,null,null,!1,!1,"",uI);return t._reactRootContainer=l,t[ks]=l.current,Nc(t.nodeType===8?t.parentNode:t),Ko(function(){Cm(e,l,n,r)}),l}function Dm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Mf(o);a.call(l)}}Cm(e,o,t,s)}else o=cV(n,e,t,s,r);return Mf(o)}aS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ku(e.pendingLanes);n!==0&&(Lv(e,n|1),qn(e,kt()),!(je&6)&&(Il=kt()+500,ro()))}break;case 13:Ko(function(){var r=Cs(t,1);if(r!==null){var s=Sn();Cr(r,t,1,s)}}),p_(t,1)}};Mv=function(t){if(t.tag===13){var e=Cs(t,134217728);if(e!==null){var n=Sn();Cr(e,t,134217728,n)}p_(t,134217728)}};lS=function(t){if(t.tag===13){var e=Ri(t),n=Cs(t,e);if(n!==null){var r=Sn();Cr(n,t,e,r)}p_(t,e)}};uS=function(){return Ge};cS=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Zg=function(t,e,n){switch(e){case"input":if(Gg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tm(r);if(!s)throw Error(H(90));Bb(r),Gg(r,s)}}}break;case"textarea":$b(t,n);break;case"select":e=n.value,e!=null&&sl(t,!!n.multiple,e,!1)}};Yb=c_;Xb=Ko;var dV={usingClientEntryPoint:!1,Events:[yd,Xa,Tm,Kb,Qb,c_]},Lu={findFiberByHostInstance:Do,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hV={bundleType:Lu.bundleType,version:Lu.version,rendererPackageName:Lu.rendererPackageName,rendererConfig:Lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eS(t),t===null?null:t.stateNode},findFiberByHostInstance:Lu.findFiberByHostInstance||uV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{_m=_h.inject(hV),Qr=_h}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dV;ir.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y_(e))throw Error(H(200));return lV(t,e,null,n)};ir.createRoot=function(t,e){if(!y_(t))throw Error(H(299));var n=!1,r="",s=NA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=m_(t,1,!1,null,null,n,!1,r,s),t[ks]=e.current,Nc(t.nodeType===8?t.parentNode:t),new g_(e)};ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=eS(e),t=t===null?null:t.stateNode,t};ir.flushSync=function(t){return Ko(t)};ir.hydrate=function(t,e,n){if(!Nm(e))throw Error(H(200));return Dm(null,t,e,!0,n)};ir.hydrateRoot=function(t,e,n){if(!y_(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=NA;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PA(e,null,t,1,n??null,s,!1,i,o),t[ks]=e.current,Nc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pm(e)};ir.render=function(t,e,n){if(!Nm(e))throw Error(H(200));return Dm(null,t,e,!1,n)};ir.unmountComponentAtNode=function(t){if(!Nm(t))throw Error(H(40));return t._reactRootContainer?(Ko(function(){Dm(null,null,t,!1,function(){t._reactRootContainer=null,t[ks]=null})}),!0):!1};ir.unstable_batchedUpdates=c_;ir.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nm(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Dm(t,e,n,!1,r)};ir.version="18.3.1-next-f1338f8080-20240426";function DA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DA)}catch(t){console.error(t)}}DA(),Db.exports=ir;var v_=Db.exports;const OA=Iv(v_);var VA,cI=v_;VA=cI.createRoot,cI.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bc.apply(this,arguments)}var vi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vi||(vi={}));const dI="popstate";function fV(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Ny("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ff(s)}return pV(e,n,null,t)}function Nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function __(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mV(){return Math.random().toString(36).substr(2,8)}function hI(t,e){return{usr:t.state,key:t.key,idx:e}}function Ny(t,e,n,r){return n===void 0&&(n=null),Bc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ql(e):e,{state:n,key:e&&e.key||r||mV()})}function Ff(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ql(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pV(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=vi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Bc({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=vi.Pop;let b=d(),w=b==null?null:b-c;c=b,l&&l({action:a,location:_.location,delta:w})}function p(b,w){a=vi.Push;let v=Ny(_.location,b,w);c=d()+1;let E=hI(v,c),O=_.createHref(v);try{o.pushState(E,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(O)}i&&l&&l({action:a,location:_.location,delta:1})}function g(b,w){a=vi.Replace;let v=Ny(_.location,b,w);c=d();let E=hI(v,c),O=_.createHref(v);o.replaceState(E,"",O),i&&l&&l({action:a,location:_.location,delta:0})}function T(b){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof b=="string"?b:Ff(b);return v=v.replace(/ $/,"%20"),Nt(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let _={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(dI,h),l=b,()=>{s.removeEventListener(dI,h),l=null}},createHref(b){return e(s,b)},createURL:T,encodeLocation(b){let w=T(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(b){return o.go(b)}};return _}var fI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fI||(fI={}));function gV(t,e,n){return n===void 0&&(n="/"),yV(t,e,n)}function yV(t,e,n,r){let s=typeof e=="string"?Ql(e):e,i=w_(s.pathname||"/",n);if(i==null)return null;let o=LA(t);vV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=CV(i);a=AV(o[l],c)}return a}function LA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Nt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ci([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),LA(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:bV(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of MA(i.path))s(i,o,l)}),e}function MA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=MA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function vV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:SV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _V=/^:[\w-]+$/,wV=3,EV=2,IV=1,TV=10,xV=-2,mI=t=>t==="*";function bV(t,e){let n=t.split("/"),r=n.length;return n.some(mI)&&(r+=xV),e&&(r+=EV),n.filter(s=>!mI(s)).reduce((s,i)=>s+(_V.test(i)?wV:i===""?IV:TV),r)}function SV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function AV(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=RV({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ci([i,h.pathname]),pathnameBase:VV(Ci([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Ci([i,h.pathnameBase]))}return o}function RV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kV(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let _=a[h]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const T=a[h];return g&&!T?c[p]=void 0:c[p]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function kV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),__(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function CV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return __(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function w_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const PV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NV=t=>PV.test(t);function DV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ql(t):t,i;if(n)if(NV(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),__(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=pI(n.substring(1),"/"):i=pI(n,e)}else i=e;return{pathname:i,search:LV(r),hash:MV(s)}}function pI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function E_(t,e){let n=OV(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function I_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ql(t):(s=Bc({},t),Nt(!s.pathname||!s.pathname.includes("?"),lg("?","pathname","search",s)),Nt(!s.pathname||!s.pathname.includes("#"),lg("#","pathname","hash",s)),Nt(!s.search||!s.search.includes("#"),lg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=DV(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ci=t=>t.join("/").replace(/\/\/+/g,"/"),VV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),LV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const FA=["post","put","patch","delete"];new Set(FA);const jV=["get",...FA];new Set(jV);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zc(){return zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zc.apply(this,arguments)}const T_=R.createContext(null),UV=R.createContext(null),so=R.createContext(null),Om=R.createContext(null),rs=R.createContext({outlet:null,matches:[],isDataRoute:!1}),jA=R.createContext(null);function BV(t,e){let{relative:n}=e===void 0?{}:e;Yl()||Nt(!1);let{basename:r,navigator:s}=R.useContext(so),{hash:i,pathname:o,search:a}=BA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ci([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Yl(){return R.useContext(Om)!=null}function Xl(){return Yl()||Nt(!1),R.useContext(Om).location}function UA(t){R.useContext(so).static||R.useLayoutEffect(t)}function da(){let{isDataRoute:t}=R.useContext(rs);return t?r2():zV()}function zV(){Yl()||Nt(!1);let t=R.useContext(T_),{basename:e,future:n,navigator:r}=R.useContext(so),{matches:s}=R.useContext(rs),{pathname:i}=Xl(),o=JSON.stringify(E_(s,n.v7_relativeSplatPath)),a=R.useRef(!1);return UA(()=>{a.current=!0}),R.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=I_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ci([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const $V=R.createContext(null);function qV(t){let e=R.useContext(rs).outlet;return e&&R.createElement($V.Provider,{value:t},e)}function WV(){let{matches:t}=R.useContext(rs),e=t[t.length-1];return e?e.params:{}}function BA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(so),{matches:s}=R.useContext(rs),{pathname:i}=Xl(),o=JSON.stringify(E_(s,r.v7_relativeSplatPath));return R.useMemo(()=>I_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function GV(t,e){return HV(t,e)}function HV(t,e,n,r){Yl()||Nt(!1);let{navigator:s}=R.useContext(so),{matches:i}=R.useContext(rs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Xl(),d;if(e){var h;let b=typeof e=="string"?Ql(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Nt(!1),d=b}else d=c;let p=d.pathname||"/",g=p;if(l!=="/"){let b=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let T=gV(t,{pathname:g}),_=JV(T&&T.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Ci([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Ci([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&_?R.createElement(Om.Provider,{value:{location:zc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:vi.Pop}},_):_}function KV(){let t=n2(),e=FV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,null)}const QV=R.createElement(KV,null);class YV extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(rs.Provider,{value:this.props.routeContext},R.createElement(jA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XV(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(T_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(rs.Provider,{value:e},r)}function JV(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Nt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:g}=n,T=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||T){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let g,T=!1,_=null,b=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,_=h.route.errorElement||QV,l&&(c<0&&p===0?(s2("route-fallback"),T=!0,b=null):c===p&&(T=!0,b=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),v=()=>{let E;return g?E=_:T?E=b:h.route.Component?E=R.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,R.createElement(XV,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?R.createElement(YV,{location:n.location,revalidation:n.revalidation,component:_,error:g,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var zA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zA||{}),$A=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($A||{});function ZV(t){let e=R.useContext(T_);return e||Nt(!1),e}function e2(t){let e=R.useContext(UV);return e||Nt(!1),e}function t2(t){let e=R.useContext(rs);return e||Nt(!1),e}function qA(t){let e=t2(),n=e.matches[e.matches.length-1];return n.route.id||Nt(!1),n.route.id}function n2(){var t;let e=R.useContext(jA),n=e2(),r=qA();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function r2(){let{router:t}=ZV(zA.UseNavigateStable),e=qA($A.UseNavigateStable),n=R.useRef(!1);return UA(()=>{n.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zc({fromRouteId:e},i)))},[t,e])}const gI={};function s2(t,e,n){gI[t]||(gI[t]=!0)}function i2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Jh(t){let{to:e,replace:n,state:r,relative:s}=t;Yl()||Nt(!1);let{future:i,static:o}=R.useContext(so),{matches:a}=R.useContext(rs),{pathname:l}=Xl(),c=da(),d=I_(e,E_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return R.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function WA(t){return qV(t.context)}function gn(t){Nt(!1)}function o2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=vi.Pop,navigator:i,static:o=!1,future:a}=t;Yl()&&Nt(!1);let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:i,static:o,future:zc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Ql(r));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:T="default"}=r,_=R.useMemo(()=>{let b=w_(d,l);return b==null?null:{location:{pathname:b,search:h,hash:p,state:g,key:T},navigationType:s}},[l,d,h,p,g,T,s]);return _==null?null:R.createElement(so.Provider,{value:c},R.createElement(Om.Provider,{children:n,value:_}))}function a2(t){let{children:e,location:n}=t;return GV(Dy(e),n)}new Promise(()=>{});function Dy(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,Dy(r.props.children,i));return}r.type!==gn&&Nt(!1),!r.props.index||!r.props.children||Nt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Dy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oy.apply(this,arguments)}function l2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function u2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function c2(t,e){return t.button===0&&(!e||e==="_self")&&!u2(t)}const d2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h2="6";try{window.__reactRouterVersion=h2}catch{}const f2="startTransition",yI=Av[f2];function m2(t){let{basename:e,children:n,future:r,window:s}=t,i=R.useRef();i.current==null&&(i.current=fV({window:s,v5Compat:!0}));let o=i.current,[a,l]=R.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=R.useCallback(h=>{c&&yI?yI(()=>l(h)):l(h)},[l,c]);return R.useLayoutEffect(()=>o.listen(d),[o,d]),R.useEffect(()=>i2(r),[r]),R.createElement(o2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const p2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",g2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,y2=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,p=l2(e,d2),{basename:g}=R.useContext(so),T,_=!1;if(typeof c=="string"&&g2.test(c)&&(T=c,p2))try{let E=new URL(window.location.href),O=c.startsWith("//")?new URL(E.protocol+c):new URL(c),L=w_(O.pathname,g);O.origin===E.origin&&L!=null?c=L+O.search+O.hash:_=!0}catch{}let b=BV(c,{relative:s}),w=v2(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(E){r&&r(E),E.defaultPrevented||w(E)}return R.createElement("a",Oy({},p,{href:T||b,onClick:_||i?r:v,ref:n,target:l}))});var vI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vI||(vI={}));var _I;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_I||(_I={}));function v2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=da(),c=Xl(),d=BA(t,{relative:o});return R.useCallback(h=>{if(c2(h,n)){h.preventDefault();let p=r!==void 0?r:Ff(c)===Ff(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}const _2="modulepreload",w2=function(t){return"/"+t},wI={},x_=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=w2(l),l in wI)return;wI[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":_2,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var _d=t=>t.type==="checkbox",Lo=t=>t instanceof Date,On=t=>t==null;const GA=t=>typeof t=="object";var Ut=t=>!On(t)&&!Array.isArray(t)&&GA(t)&&!Lo(t),E2=t=>Ut(t)&&t.target?_d(t.target)?t.target.checked:t.target.value:t,I2=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,T2=(t,e)=>t.has(I2(e)),x2=t=>{const e=t.constructor&&t.constructor.prototype;return Ut(e)&&e.hasOwnProperty("isPrototypeOf")},b_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zt(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(b_&&(t instanceof Blob||e))return t;const n=Array.isArray(t);if(!n&&!(Ut(t)&&x2(t)))return t;const r=n?[]:Object.create(Object.getPrototypeOf(t));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=zt(t[s]));return r}var Vm=t=>/^\w*$/.test(t),yt=t=>t===void 0,S_=t=>Array.isArray(t)?t.filter(Boolean):[],A_=t=>S_(t.replace(/["|']|\]/g,"").split(/\.|\[/)),le=(t,e,n)=>{if(!e||!Ut(t))return n;const r=(Vm(e)?[e]:A_(e)).reduce((s,i)=>On(s)?s:s[i],t);return yt(r)||r===t?yt(t[e])?n:t[e]:r},zr=t=>typeof t=="boolean",Ar=t=>typeof t=="function",Xe=(t,e,n)=>{let r=-1;const s=Vm(e)?[e]:A_(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const c=t[a];l=Ut(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const EI={BLUR:"blur",FOCUS_OUT:"focusout"},Rr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},hs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},b2=G.createContext(null);b2.displayName="HookFormControlContext";var S2=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Rr.all&&(e._proxyFormState[o]=!r||Rr.all),t[o]}});return s};const A2=typeof window<"u"?G.useLayoutEffect:G.useEffect;var Yn=t=>typeof t=="string",R2=(t,e,n,r,s)=>Yn(t)?(r&&e.watch.add(t),le(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),le(n,i))):(r&&(e.watchAll=!0),n),Vy=t=>On(t)||!GA(t);function di(t,e,n=new WeakSet){if(Vy(t)||Vy(e))return Object.is(t,e);if(Lo(t)&&Lo(e))return Object.is(t.getTime(),e.getTime());const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const o=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(Lo(o)&&Lo(a)||Ut(o)&&Ut(a)||Array.isArray(o)&&Array.isArray(a)?!di(o,a,n):!Object.is(o,a))return!1}}return!0}const k2=G.createContext(null);k2.displayName="HookFormContext";var HA=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},fc=t=>Array.isArray(t)?t:[t],II=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}};function KA(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const s=t[r],i=e[r];if(s&&Ut(s)&&i){const o=KA(s,i);Ut(o)&&(n[r]=o)}else t[r]&&(n[r]=i)}return n}var Tn=t=>Ut(t)&&!Object.keys(t).length,R_=t=>t.type==="file",jf=t=>{if(!b_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},QA=t=>t.type==="select-multiple",k_=t=>t.type==="radio",C2=t=>k_(t)||_d(t),ug=t=>jf(t)&&t.isConnected;function P2(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=yt(t)?r++:t[e[r++]];return t}function N2(t){for(const e in t)if(t.hasOwnProperty(e)&&!yt(t[e]))return!1;return!0}function Ot(t,e){const n=Array.isArray(e)?e:Vm(e)?[e]:A_(e),r=n.length===1?t:P2(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Ut(r)&&Tn(r)||Array.isArray(r)&&N2(r))&&Ot(t,n.slice(0,-1)),t}var D2=t=>{for(const e in t)if(Ar(t[e]))return!0;return!1};function YA(t){return Array.isArray(t)||Ut(t)&&!D2(t)}function Ly(t,e={}){for(const n in t){const r=t[n];YA(r)?(e[n]=Array.isArray(r)?[]:{},Ly(r,e[n])):yt(r)||(e[n]=!0)}return e}function Ua(t,e,n){n||(n=Ly(e));for(const r in t){const s=t[r];if(YA(s))yt(e)||Vy(n[r])?n[r]=Ly(s,Array.isArray(s)?[]:{}):Ua(s,On(e)?{}:e[r],n[r]);else{const i=e[r];n[r]=!di(s,i)}}return n}const TI={value:!1,isValid:!1},xI={value:!0,isValid:!0};var XA=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!yt(t[0].attributes.value)?yt(t[0].value)||t[0].value===""?xI:{value:t[0].value,isValid:!0}:xI:TI}return TI},JA=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>yt(t)?t:e?t===""?NaN:t&&+t:n&&Yn(t)?new Date(t):r?r(t):t;const bI={isValid:!1,value:null};var ZA=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,bI):bI;function SI(t){const e=t.ref;return R_(e)?e.files:k_(e)?ZA(t.refs).value:QA(e)?[...e.selectedOptions].map(({value:n})=>n):_d(e)?XA(t.refs).value:JA(yt(e.value)?t.ref.value:e.value,t)}var O2=(t,e,n,r)=>{const s={};for(const i of t){const o=le(e,i);o&&Xe(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Uf=t=>t instanceof RegExp,Mu=t=>yt(t)?t:Uf(t)?t.source:Ut(t)?Uf(t.value)?t.value.source:t.value:t,AI=t=>({isOnSubmit:!t||t===Rr.onSubmit,isOnBlur:t===Rr.onBlur,isOnChange:t===Rr.onChange,isOnAll:t===Rr.all,isOnTouch:t===Rr.onTouched});const RI="AsyncFunction";var V2=t=>!!t&&!!t.validate&&!!(Ar(t.validate)&&t.validate.constructor.name===RI||Ut(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===RI)),L2=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),kI=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const mc=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=le(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(mc(a,e))break}else if(Ut(a)&&mc(a,e))break}}};function CI(t,e,n){const r=le(t,n);if(r||Vm(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=le(e,i),a=le(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:n}}var M2=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Tn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||Rr.all))},F2=(t,e,n)=>!t||!e||t===e||fc(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),j2=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,U2=(t,e)=>!S_(le(t,e)).length&&Ot(t,e),B2=(t,e,n)=>{const r=fc(le(t,n));return Xe(r,"root",e[n]),Xe(t,n,r),t};function PI(t,e,n="validate"){if(Yn(t)||Array.isArray(t)&&t.every(Yn)||zr(t)&&!t)return{type:n,message:Yn(t)?t:"",ref:e}}var ka=t=>Ut(t)&&!Uf(t)?t:{value:t,message:""},NI=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:p,pattern:g,validate:T,name:_,valueAsNumber:b,mount:w}=t._f,v=le(n,_);if(!w||e.has(_))return{};const E=a?a[0]:o,O=N=>{s&&E.reportValidity&&(E.setCustomValidity(zr(N)?"":N||""),E.reportValidity())},L={},j=k_(o),S=_d(o),I=j||S,C=(b||R_(o))&&yt(o.value)&&yt(v)||jf(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,A=HA.bind(null,_,r,L),D=(N,k,pe,Le=hs.maxLength,Me=hs.minLength)=>{const Ne=N?k:pe;L[_]={type:N?Le:Me,message:Ne,ref:o,...A(N?Le:Me,Ne)}};if(i?!Array.isArray(v)||!v.length:l&&(!I&&(C||On(v))||zr(v)&&!v||S&&!XA(a).isValid||j&&!ZA(a).isValid)){const{value:N,message:k}=Yn(l)?{value:!!l,message:l}:ka(l);if(N&&(L[_]={type:hs.required,message:k,ref:E,...A(hs.required,k)},!r))return O(k),L}if(!C&&(!On(h)||!On(p))){let N,k;const pe=ka(p),Le=ka(h);if(!On(v)&&!isNaN(v)){const Me=o.valueAsNumber||v&&+v;On(pe.value)||(N=Me>pe.value),On(Le.value)||(k=Me<Le.value)}else{const Me=o.valueAsDate||new Date(v),Ne=ae=>new Date(new Date().toDateString()+" "+ae),J=o.type=="time",K=o.type=="week";Yn(pe.value)&&v&&(N=J?Ne(v)>Ne(pe.value):K?v>pe.value:Me>new Date(pe.value)),Yn(Le.value)&&v&&(k=J?Ne(v)<Ne(Le.value):K?v<Le.value:Me<new Date(Le.value))}if((N||k)&&(D(!!N,pe.message,Le.message,hs.max,hs.min),!r))return O(L[_].message),L}if((c||d)&&!C&&(Yn(v)||i&&Array.isArray(v))){const N=ka(c),k=ka(d),pe=!On(N.value)&&v.length>+N.value,Le=!On(k.value)&&v.length<+k.value;if((pe||Le)&&(D(pe,N.message,k.message),!r))return O(L[_].message),L}if(g&&!C&&Yn(v)){const{value:N,message:k}=ka(g);if(Uf(N)&&!v.match(N)&&(L[_]={type:hs.pattern,message:k,ref:o,...A(hs.pattern,k)},!r))return O(k),L}if(T){if(Ar(T)){const N=await T(v,n),k=PI(N,E);if(k&&(L[_]={...k,...A(hs.validate,k.message)},!r))return O(k.message),L}else if(Ut(T)){let N={};for(const k in T){if(!Tn(N)&&!r)break;const pe=PI(await T[k](v,n),E,k);pe&&(N={...pe,...A(k,pe.message)},O(pe.message),r&&(L[_]=N))}if(!Tn(N)&&(L[_]={ref:E,...N},!r))return L}}return O(!0),L};const z2={mode:Rr.onSubmit,reValidateMode:Rr.onChange,shouldFocusError:!0};function $2(t={}){let e={...z2,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ar(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Ut(e.defaultValues)||Ut(e.values)?zt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:zt(s),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let p={...h};const g={array:II(),state:II()},T=e.criteriaMode===Rr.all,_=P=>F=>{clearTimeout(c),c=setTimeout(P,F)},b=async P=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||p.isValid||P)){let F;e.resolver?(F=Tn((await I()).errors),w()):F=await A(r,!0),F!==n.isValid&&g.state.next({isValid:F})}},w=(P,F)=>{!e.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((P||Array.from(a.mount)).forEach(B=>{B&&(F?Xe(n.validatingFields,B,F):Ot(n.validatingFields,B))}),g.state.next({validatingFields:n.validatingFields,isValidating:!Tn(n.validatingFields)}))},v=(P,F=[],B,re,X=!0,$=!0)=>{if(re&&B&&!e.disabled){if(o.action=!0,$&&Array.isArray(le(r,P))){const ne=B(le(r,P),re.argA,re.argB);X&&Xe(r,P,ne)}if($&&Array.isArray(le(n.errors,P))){const ne=B(le(n.errors,P),re.argA,re.argB);X&&Xe(n.errors,P,ne),U2(n.errors,P)}if((h.touchedFields||p.touchedFields)&&$&&Array.isArray(le(n.touchedFields,P))){const ne=B(le(n.touchedFields,P),re.argA,re.argB);X&&Xe(n.touchedFields,P,ne)}(h.dirtyFields||p.dirtyFields)&&(n.dirtyFields=Ua(s,i)),g.state.next({name:P,isDirty:N(P,F),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Xe(i,P,F)},E=(P,F)=>{Xe(n.errors,P,F),g.state.next({errors:n.errors})},O=P=>{n.errors=P,g.state.next({errors:n.errors,isValid:!1})},L=(P,F,B,re)=>{const X=le(r,P);if(X){const $=le(i,P,yt(B)?le(s,P):B);yt($)||re&&re.defaultChecked||F?Xe(i,P,F?$:SI(X._f)):Le(P,$),o.mount&&!o.action&&b()}},j=(P,F,B,re,X)=>{let $=!1,ne=!1;const Ae={name:P};if(!e.disabled){if(!B||re){(h.isDirty||p.isDirty)&&(ne=n.isDirty,n.isDirty=Ae.isDirty=N(),$=ne!==Ae.isDirty);const Oe=di(le(s,P),F);ne=!!le(n.dirtyFields,P),Oe?Ot(n.dirtyFields,P):Xe(n.dirtyFields,P,!0),Ae.dirtyFields=n.dirtyFields,$=$||(h.dirtyFields||p.dirtyFields)&&ne!==!Oe}if(B){const Oe=le(n.touchedFields,P);Oe||(Xe(n.touchedFields,P,B),Ae.touchedFields=n.touchedFields,$=$||(h.touchedFields||p.touchedFields)&&Oe!==B)}$&&X&&g.state.next(Ae)}return $?Ae:{}},S=(P,F,B,re)=>{const X=le(n.errors,P),$=(h.isValid||p.isValid)&&zr(F)&&n.isValid!==F;if(e.delayError&&B?(l=_(()=>E(P,B)),l(e.delayError)):(clearTimeout(c),l=null,B?Xe(n.errors,P,B):Ot(n.errors,P)),(B?!di(X,B):X)||!Tn(re)||$){const ne={...re,...$&&zr(F)?{isValid:F}:{},errors:n.errors,name:P};n={...n,...ne},g.state.next(ne)}},I=async P=>(w(P,!0),await e.resolver(i,e.context,O2(P||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation))),C=async P=>{const{errors:F}=await I(P);if(w(P),P)for(const B of P){const re=le(F,B);re?Xe(n.errors,B,re):Ot(n.errors,B)}else n.errors=F;return F},A=async(P,F,B={valid:!0})=>{for(const re in P){const X=P[re];if(X){const{_f:$,...ne}=X;if($){const Ae=a.array.has($.name),Oe=X._f&&V2(X._f);Oe&&h.validatingFields&&w([$.name],!0);const gt=await NI(X,a.disabled,i,T,e.shouldUseNativeValidation&&!F,Ae);if(Oe&&h.validatingFields&&w([$.name]),gt[$.name]&&(B.valid=!1,F||t.shouldUseNativeValidation))break;!F&&(le(gt,$.name)?Ae?B2(n.errors,gt,$.name):Xe(n.errors,$.name,gt[$.name]):Ot(n.errors,$.name))}!Tn(ne)&&await A(ne,F,B)}}return B.valid},D=()=>{for(const P of a.unMount){const F=le(r,P);F&&(F._f.refs?F._f.refs.every(B=>!ug(B)):!ug(F._f.ref))&&is(P)}a.unMount=new Set},N=(P,F)=>!e.disabled&&(P&&F&&Xe(i,P,F),!di($e(),s)),k=(P,F,B)=>R2(P,a,{...o.mount?i:yt(F)?s:Yn(P)?{[P]:F}:F},B,F),pe=P=>S_(le(o.mount?i:s,P,e.shouldUnregister?le(s,P,[]):[])),Le=(P,F,B={})=>{const re=le(r,P);let X=F;if(re){const $=re._f;$&&(!$.disabled&&Xe(i,P,JA(F,$)),X=jf($.ref)&&On(F)?"":F,QA($.ref)?[...$.ref.options].forEach(ne=>ne.selected=X.includes(ne.value)):$.refs?_d($.ref)?$.refs.forEach(ne=>{(!ne.defaultChecked||!ne.disabled)&&(Array.isArray(X)?ne.checked=!!X.find(Ae=>Ae===ne.value):ne.checked=X===ne.value||!!X)}):$.refs.forEach(ne=>ne.checked=ne.value===X):R_($.ref)?$.ref.value="":($.ref.value=X,$.ref.type||g.state.next({name:P,values:zt(i)})))}(B.shouldDirty||B.shouldTouch)&&j(P,X,B.shouldTouch,B.shouldDirty,!0),B.shouldValidate&&ae(P)},Me=(P,F,B)=>{for(const re in F){if(!F.hasOwnProperty(re))return;const X=F[re],$=P+"."+re,ne=le(r,$);(a.array.has(P)||Ut(X)||ne&&!ne._f)&&!Lo(X)?Me($,X,B):Le($,X,B)}},Ne=(P,F,B={})=>{const re=le(r,P),X=a.array.has(P),$=zt(F);Xe(i,P,$),X?(g.array.next({name:P,values:zt(i)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&B.shouldDirty&&g.state.next({name:P,dirtyFields:Ua(s,i),isDirty:N(P,$)})):re&&!re._f&&!On($)?Me(P,$,B):Le(P,$,B),kI(P,a)?g.state.next({...n,name:P,values:zt(i)}):g.state.next({name:o.mount?P:void 0,values:zt(i)})},J=async P=>{o.mount=!0;const F=P.target;let B=F.name,re=!0;const X=le(r,B),$=Oe=>{re=Number.isNaN(Oe)||Lo(Oe)&&isNaN(Oe.getTime())||di(Oe,le(i,B,Oe))},ne=AI(e.mode),Ae=AI(e.reValidateMode);if(X){let Oe,gt;const _r=F.type?SI(X._f):E2(P),en=P.type===EI.BLUR||P.type===EI.FOCUS_OUT,Ks=!L2(X._f)&&!e.resolver&&!le(n.errors,B)&&!X._f.deps||j2(en,le(n.touchedFields,B),n.isSubmitted,Ae,ne),Hn=kI(B,a,en);Xe(i,B,_r),en?(!F||!F.readOnly)&&(X._f.onBlur&&X._f.onBlur(P),l&&l(0)):X._f.onChange&&X._f.onChange(P);const Lr=j(B,_r,en),Mr=!Tn(Lr)||Hn;if(!en&&g.state.next({name:B,type:P.type,values:zt(i)}),Ks)return(h.isValid||p.isValid)&&(e.mode==="onBlur"?en&&b():en||b()),Mr&&g.state.next({name:B,...Hn?{}:Lr});if(!en&&Hn&&g.state.next({...n}),e.resolver){const{errors:Ta}=await I([B]);if(w([B]),$(_r),re){const go=CI(n.errors,r,B),Qs=CI(Ta,r,go.name||B);Oe=Qs.error,B=Qs.name,gt=Tn(Ta)}}else w([B],!0),Oe=(await NI(X,a.disabled,i,T,e.shouldUseNativeValidation))[B],w([B]),$(_r),re&&(Oe?gt=!1:(h.isValid||p.isValid)&&(gt=await A(r,!0)));re&&(X._f.deps&&(!Array.isArray(X._f.deps)||X._f.deps.length>0)&&ae(X._f.deps),S(B,gt,Oe,Lr))}},K=(P,F)=>{if(le(n.errors,F)&&P.focus)return P.focus(),1},ae=async(P,F={})=>{let B,re;const X=fc(P);if(e.resolver){const $=await C(yt(P)?P:X);B=Tn($),re=P?!X.some(ne=>le($,ne)):B}else P?(re=(await Promise.all(X.map(async $=>{const ne=le(r,$);return await A(ne&&ne._f?{[$]:ne}:ne)}))).every(Boolean),!(!re&&!n.isValid)&&b()):re=B=await A(r);return g.state.next({...!Yn(P)||(h.isValid||p.isValid)&&B!==n.isValid?{}:{name:P},...e.resolver||!P?{isValid:B}:{},errors:n.errors}),F.shouldFocus&&!re&&mc(r,K,P?X:a.mount),re},$e=(P,F)=>{let B={...o.mount?i:s};return F&&(B=KA(F.dirtyFields?n.dirtyFields:n.touchedFields,B)),yt(P)?B:Yn(P)?le(B,P):P.map(re=>le(B,re))},me=(P,F)=>({invalid:!!le((F||n).errors,P),isDirty:!!le((F||n).dirtyFields,P),error:le((F||n).errors,P),isValidating:!!le(n.validatingFields,P),isTouched:!!le((F||n).touchedFields,P)}),ge=P=>{P&&fc(P).forEach(F=>Ot(n.errors,F)),g.state.next({errors:P?n.errors:{}})},Se=(P,F,B)=>{const re=(le(r,P,{_f:{}})._f||{}).ref,X=le(n.errors,P)||{},{ref:$,message:ne,type:Ae,...Oe}=X;Xe(n.errors,P,{...Oe,...F,ref:re}),g.state.next({name:P,errors:n.errors,isValid:!1}),B&&B.shouldFocus&&re&&re.focus&&re.focus()},Je=(P,F)=>Ar(P)?g.state.subscribe({next:B=>"values"in B&&P(k(void 0,F),B)}):k(P,F,!0),Bt=P=>g.state.subscribe({next:F=>{F2(P.name,F.name,P.exact)&&M2(F,P.formState||h,po,P.reRenderRoot)&&P.callback({values:{...i},...n,...F,defaultValues:s})}}).unsubscribe,De=P=>(o.mount=!0,p={...p,...P.formState},Bt({...P,formState:{...d,...P.formState}})),is=(P,F={})=>{for(const B of P?fc(P):a.mount)a.mount.delete(B),a.array.delete(B),F.keepValue||(Ot(r,B),Ot(i,B)),!F.keepError&&Ot(n.errors,B),!F.keepDirty&&Ot(n.dirtyFields,B),!F.keepTouched&&Ot(n.touchedFields,B),!F.keepIsValidating&&Ot(n.validatingFields,B),!e.shouldUnregister&&!F.keepDefaultValue&&Ot(s,B);g.state.next({values:zt(i)}),g.state.next({...n,...F.keepDirty?{isDirty:N()}:{}}),!F.keepIsValid&&b()},Vr=({disabled:P,name:F})=>{if(zr(P)&&o.mount||P||a.disabled.has(F)){const X=a.disabled.has(F)!==!!P;P?a.disabled.add(F):a.disabled.delete(F),X&&o.mount&&!o.action&&b()}},Gn=(P,F={})=>{let B=le(r,P);const re=zr(F.disabled)||zr(e.disabled);return Xe(r,P,{...B||{},_f:{...B&&B._f?B._f:{ref:{name:P}},name:P,mount:!0,...F}}),a.mount.add(P),B?Vr({disabled:zr(F.disabled)?F.disabled:e.disabled,name:P}):L(P,!0,F.value),{...re?{disabled:F.disabled||e.disabled}:{},...e.progressive?{required:!!F.required,min:Mu(F.min),max:Mu(F.max),minLength:Mu(F.minLength),maxLength:Mu(F.maxLength),pattern:Mu(F.pattern)}:{},name:P,onChange:J,onBlur:J,ref:X=>{if(X){Gn(P,F),B=le(r,P);const $=yt(X.value)&&X.querySelectorAll&&X.querySelectorAll("input,select,textarea")[0]||X,ne=C2($),Ae=B._f.refs||[];if(ne?Ae.find(Oe=>Oe===$):$===B._f.ref)return;Xe(r,P,{_f:{...B._f,...ne?{refs:[...Ae.filter(ug),$,...Array.isArray(le(s,P))?[{}]:[]],ref:{type:$.type,name:P}}:{ref:$}}}),L(P,!1,void 0,$)}else B=le(r,P,{}),B._f&&(B._f.mount=!1),(e.shouldUnregister||F.shouldUnregister)&&!(T2(a.array,P)&&o.action)&&a.unMount.add(P)}}},Cn=()=>e.shouldFocusError&&mc(r,K,a.mount),os=P=>{zr(P)&&(g.state.next({disabled:P}),mc(r,(F,B)=>{const re=le(r,B);re&&(F.disabled=re._f.disabled||P,Array.isArray(re._f.refs)&&re._f.refs.forEach(X=>{X.disabled=re._f.disabled||P}))},0,!1))},as=(P,F)=>async B=>{let re;B&&(B.preventDefault&&B.preventDefault(),B.persist&&B.persist());let X=zt(i);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:$,values:ne}=await I();w(),n.errors=$,X=zt(ne)}else await A(r);if(a.disabled.size)for(const $ of a.disabled)Ot(X,$);if(Ot(n.errors,"root"),Tn(n.errors)){g.state.next({errors:{}});try{await P(X,B)}catch($){re=$}}else F&&await F({...n.errors},B),Cn(),setTimeout(Cn);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Tn(n.errors)&&!re,submitCount:n.submitCount+1,errors:n.errors}),re)throw re},mo=(P,F={})=>{le(r,P)&&(yt(F.defaultValue)?Ne(P,zt(le(s,P))):(Ne(P,F.defaultValue),Xe(s,P,zt(F.defaultValue))),F.keepTouched||Ot(n.touchedFields,P),F.keepDirty||(Ot(n.dirtyFields,P),n.isDirty=F.defaultValue?N(P,zt(le(s,P))):N()),F.keepError||(Ot(n.errors,P),h.isValid&&b()),g.state.next({...n}))},Gs=(P,F={})=>{const B=P?zt(P):s,re=zt(B),X=Tn(P),$=X?s:re;if(F.keepDefaultValues||(s=B),!F.keepValues){if(F.keepDirtyValues){const ne=new Set([...a.mount,...Object.keys(Ua(s,i))]);for(const Ae of Array.from(ne)){const Oe=le(n.dirtyFields,Ae),gt=le(i,Ae),_r=le($,Ae);Oe&&!yt(gt)?Xe($,Ae,gt):!Oe&&!yt(_r)&&Ne(Ae,_r)}}else{if(b_&&yt(P))for(const ne of a.mount){const Ae=le(r,ne);if(Ae&&Ae._f){const Oe=Array.isArray(Ae._f.refs)?Ae._f.refs[0]:Ae._f.ref;if(jf(Oe)){const gt=Oe.closest("form");if(gt){gt.reset();break}}}}if(F.keepFieldsRef)for(const ne of a.mount)Ne(ne,le($,ne));else r={}}i=e.shouldUnregister?F.keepDefaultValues?zt(s):{}:zt($),g.array.next({values:{...$}}),g.state.next({values:{...$}})}a={mount:F.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!F.keepIsValid||!!F.keepDirtyValues||!e.shouldUnregister&&!Tn($),o.watch=!!e.shouldUnregister,o.keepIsValid=!!F.keepIsValid,o.action=!1,F.keepErrors||(n.errors={}),g.state.next({submitCount:F.keepSubmitCount?n.submitCount:0,isDirty:X?!1:F.keepDirty?n.isDirty:!!(F.keepDefaultValues&&!di(P,s)),isSubmitted:F.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:X?{}:F.keepDirtyValues?F.keepDefaultValues&&i?Ua(s,i):n.dirtyFields:F.keepDefaultValues&&P?Ua(s,P):F.keepDirty?n.dirtyFields:{},touchedFields:F.keepTouched?n.touchedFields:{},errors:F.keepErrors?n.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Hs=(P,F)=>Gs(Ar(P)?P(i):P,{...e.resetOptions,...F}),vu=(P,F={})=>{const B=le(r,P),re=B&&B._f;if(re){const X=re.refs?re.refs[0]:re.ref;X.focus&&setTimeout(()=>{X.focus(),F.shouldSelect&&Ar(X.select)&&X.select()})}},po=P=>{n={...n,...P}},ls={control:{register:Gn,unregister:is,getFieldState:me,handleSubmit:as,setError:Se,_subscribe:Bt,_runSchema:I,_updateIsValidating:w,_focusError:Cn,_getWatch:k,_getDirty:N,_setValid:b,_setFieldArray:v,_setDisabledField:Vr,_setErrors:O,_getFieldArray:pe,_reset:Gs,_resetDefaultValues:()=>Ar(e.defaultValues)&&e.defaultValues().then(P=>{Hs(P,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:os,_subjects:g,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(P){o=P},get _defaultValues(){return s},get _names(){return a},set _names(P){a=P},get _formState(){return n},get _options(){return e},set _options(P){e={...e,...P}}},subscribe:De,trigger:ae,register:Gn,handleSubmit:as,watch:Je,setValue:Ne,getValues:$e,reset:Hs,resetField:mo,clearErrors:ge,unregister:is,setError:Se,setFocus:vu,getFieldState:me};return{...ls,formControl:ls}}function C_(t={}){const e=G.useRef(void 0),n=G.useRef(void 0),[r,s]=G.useState({isDirty:!1,isValidating:!1,isLoading:Ar(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ar(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ar(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=$2(t);e.current={...a,formState:r}}const i=e.current.control;return i._options=t,A2(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),G.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),G.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),G.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),G.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),G.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),G.useEffect(()=>{var o;t.values&&!di(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((o=i._options.resetOptions)===null||o===void 0)&&o.keepIsValid||i._setValid(),n.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[i,t.values]),G.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=G.useMemo(()=>S2(r,i),[i,r]),e.current}const DI=(t,e,n)=>{if(t&&"reportValidity"in t){const r=le(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},eR=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?DI(r.ref,n,t):r.refs&&r.refs.forEach(s=>DI(s,n,t))}},q2=(t,e)=>{e.shouldUseNativeValidation&&eR(t,e);const n={};for(const r in t){const s=le(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(W2(e.names||Object.keys(t),r)){const o=Object.assign({},le(n,r));Xe(o,"root",i),Xe(n,r,o)}else Xe(n,r,i)}return n},W2=(t,e)=>t.some(n=>n.startsWith(e+"."));var G2=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=HA(o,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},P_=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&eR({},i),{errors:{},values:n.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:q2(G2(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},ze;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ze||(ze={}));var OI;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(OI||(OI={}));const de=ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),li=t=>{switch(typeof t){case"undefined":return de.undefined;case"string":return de.string;case"number":return Number.isNaN(t)?de.nan:de.number;case"boolean":return de.boolean;case"function":return de.function;case"bigint":return de.bigint;case"symbol":return de.symbol;case"object":return Array.isArray(t)?de.array:t===null?de.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?de.promise:typeof Map<"u"&&t instanceof Map?de.map:typeof Set<"u"&&t instanceof Set?de.set:typeof Date<"u"&&t instanceof Date?de.date:de.object;default:return de.unknown}},Q=ze.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ns extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof Ns))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ze.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ns.create=t=>new Ns(t);const My=(t,e)=>{let n;switch(t.code){case Q.invalid_type:t.received===de.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Q.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ze.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:n=`Unrecognized key(s) in object: ${ze.joinValues(t.keys,", ")}`;break;case Q.invalid_union:n="Invalid input";break;case Q.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ze.joinValues(t.options)}`;break;case Q.invalid_enum_value:n=`Invalid enum value. Expected ${ze.joinValues(t.options)}, received '${t.received}'`;break;case Q.invalid_arguments:n="Invalid function arguments";break;case Q.invalid_return_type:n="Invalid function return type";break;case Q.invalid_date:n="Invalid date";break;case Q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ze.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Q.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Q.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Q.custom:n="Invalid input";break;case Q.invalid_intersection_types:n="Intersection results could not be merged";break;case Q.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Q.not_finite:n="Number must be finite";break;default:n=e.defaultError,ze.assertNever(t)}return{message:n}};let H2=My;function K2(){return H2}const Q2=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function se(t,e){const n=K2(),r=Q2({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===My?void 0:My].filter(s=>!!s)});t.common.issues.push(r)}class nr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return _e;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return nr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return _e;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const _e=Object.freeze({status:"aborted"}),Yu=t=>({status:"dirty",value:t}),yr=t=>({status:"valid",value:t}),VI=t=>t.status==="aborted",LI=t=>t.status==="dirty",Tl=t=>t.status==="valid",Bf=t=>typeof Promise<"u"&&t instanceof Promise;var he;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(he||(he={}));class Ui{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const MI=(t,e)=>{if(Tl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ns(t.common.issues);return this._error=n,this._error}}};function Te(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}class Ue{get description(){return this._def.description}_getType(e){return li(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:li(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new nr,ctx:{common:e.parent.common,data:e.data,parsedType:li(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Bf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:li(e)},s=this._parseSync({data:e,path:r.path,parent:r});return MI(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:li(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Tl(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Tl(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:li(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Bf(s)?s:Promise.resolve(s));return MI(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Q.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new bl({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Pi.create(this,this._def)}nullable(){return Sl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xr.create(this)}promise(){return Wf.create(this,this._def)}or(e){return $f.create([this,e],this._def)}and(e){return qf.create(this,e,this._def)}transform(e){return new bl({...Te(this._def),schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Uy({...Te(this._def),innerType:this,defaultValue:n,typeName:we.ZodDefault})}brand(){return new vL({typeName:we.ZodBranded,type:this,...Te(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new By({...Te(this._def),innerType:this,catchValue:n,typeName:we.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return N_.create(this,e)}readonly(){return zy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Y2=/^c[^\s-]{8,}$/i,X2=/^[0-9a-z]+$/,J2=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Z2=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eL=/^[a-z0-9_-]{21}$/i,tL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,nL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let cg;const iL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,aL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,lL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,tR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dL=new RegExp(`^${tR}$`);function nR(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function hL(t){return new RegExp(`^${nR(t)}$`)}function fL(t){let e=`${tR}T${nR(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function mL(t,e){return!!((e==="v4"||!e)&&iL.test(t)||(e==="v6"||!e)&&aL.test(t))}function pL(t,e){if(!tL.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function gL(t,e){return!!((e==="v4"||!e)&&oL.test(t)||(e==="v6"||!e)&&lL.test(t))}class _i extends Ue{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==de.string){const i=this._getOrReturnCtx(e);return se(i,{code:Q.invalid_type,expected:de.string,received:i.parsedType}),_e}const r=new nr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),se(s,{code:Q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),se(s,{code:Q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?se(s,{code:Q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&se(s,{code:Q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")rL.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"email",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")cg||(cg=new RegExp(sL,"u")),cg.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"emoji",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Z2.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"uuid",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")eL.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"nanoid",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Y2.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"cuid",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")X2.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"cuid2",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")J2.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"ulid",code:Q.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),se(s,{validation:"url",code:Q.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"regex",code:Q.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?fL(i).test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?dL.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?hL(i).test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{code:Q.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?nL.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"duration",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?mL(e.data,i.version)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"ip",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?pL(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"jwt",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?gL(e.data,i.version)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"cidr",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?uL.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"base64",code:Q.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?cL.test(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{validation:"base64url",code:Q.invalid_string,message:i.message}),r.dirty()):ze.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Q.invalid_string,...he.errToObj(r)})}_addCheck(e){return new _i({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...he.errToObj(e)})}url(e){return this._addCheck({kind:"url",...he.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...he.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...he.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...he.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...he.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...he.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...he.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...he.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...he.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...he.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...he.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...he.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...he.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...he.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...he.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...he.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...he.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...he.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...he.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...he.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...he.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...he.errToObj(n)})}nonempty(e){return this.min(1,he.errToObj(e))}trim(){return new _i({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _i({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _i({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}_i.create=t=>new _i({checks:[],typeName:we.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Te(t)});function yL(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class $c extends Ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==de.number){const i=this._getOrReturnCtx(e);return se(i,{code:Q.invalid_type,expected:de.number,received:i.parsedType}),_e}let r;const s=new nr;for(const i of this._def.checks)i.kind==="int"?ze.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),se(r,{code:Q.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:Q.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:Q.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?yL(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),se(r,{code:Q.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),se(r,{code:Q.not_finite,message:i.message}),s.dirty()):ze.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,r,s){return new $c({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:he.toString(s)}]})}_addCheck(e){return new $c({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:he.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:he.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:he.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:he.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ze.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}$c.create=t=>new $c({checks:[],typeName:we.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class qc extends Ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==de.bigint)return this._getInvalidInput(e);let r;const s=new nr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:Q.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:Q.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),se(r,{code:Q.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ze.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return se(n,{code:Q.invalid_type,expected:de.bigint,received:n.parsedType}),_e}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,r,s){return new qc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:he.toString(s)}]})}_addCheck(e){return new qc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}qc.create=t=>new qc({checks:[],typeName:we.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Te(t)});class Fy extends Ue{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==de.boolean){const r=this._getOrReturnCtx(e);return se(r,{code:Q.invalid_type,expected:de.boolean,received:r.parsedType}),_e}return yr(e.data)}}Fy.create=t=>new Fy({typeName:we.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class zf extends Ue{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==de.date){const i=this._getOrReturnCtx(e);return se(i,{code:Q.invalid_type,expected:de.date,received:i.parsedType}),_e}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return se(i,{code:Q.invalid_date}),_e}const r=new nr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),se(s,{code:Q.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),se(s,{code:Q.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ze.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:he.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:he.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}zf.create=t=>new zf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:we.ZodDate,...Te(t)});class FI extends Ue{_parse(e){if(this._getType(e)!==de.symbol){const r=this._getOrReturnCtx(e);return se(r,{code:Q.invalid_type,expected:de.symbol,received:r.parsedType}),_e}return yr(e.data)}}FI.create=t=>new FI({typeName:we.ZodSymbol,...Te(t)});class jI extends Ue{_parse(e){if(this._getType(e)!==de.undefined){const r=this._getOrReturnCtx(e);return se(r,{code:Q.invalid_type,expected:de.undefined,received:r.parsedType}),_e}return yr(e.data)}}jI.create=t=>new jI({typeName:we.ZodUndefined,...Te(t)});class UI extends Ue{_parse(e){if(this._getType(e)!==de.null){const r=this._getOrReturnCtx(e);return se(r,{code:Q.invalid_type,expected:de.null,received:r.parsedType}),_e}return yr(e.data)}}UI.create=t=>new UI({typeName:we.ZodNull,...Te(t)});class BI extends Ue{constructor(){super(...arguments),this._any=!0}_parse(e){return yr(e.data)}}BI.create=t=>new BI({typeName:we.ZodAny,...Te(t)});class zI extends Ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return yr(e.data)}}zI.create=t=>new zI({typeName:we.ZodUnknown,...Te(t)});class Bi extends Ue{_parse(e){const n=this._getOrReturnCtx(e);return se(n,{code:Q.invalid_type,expected:de.never,received:n.parsedType}),_e}}Bi.create=t=>new Bi({typeName:we.ZodNever,...Te(t)});class $I extends Ue{_parse(e){if(this._getType(e)!==de.undefined){const r=this._getOrReturnCtx(e);return se(r,{code:Q.invalid_type,expected:de.void,received:r.parsedType}),_e}return yr(e.data)}}$I.create=t=>new $I({typeName:we.ZodVoid,...Te(t)});class Xr extends Ue{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==de.array)return se(n,{code:Q.invalid_type,expected:de.array,received:n.parsedType}),_e;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(se(n,{code:o?Q.too_big:Q.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(se(n,{code:Q.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(se(n,{code:Q.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ui(n,o,n.path,a)))).then(o=>nr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ui(n,o,n.path,a)));return nr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Xr({...this._def,minLength:{value:e,message:he.toString(n)}})}max(e,n){return new Xr({...this._def,maxLength:{value:e,message:he.toString(n)}})}length(e,n){return new Xr({...this._def,exactLength:{value:e,message:he.toString(n)}})}nonempty(e){return this.min(1,e)}}Xr.create=(t,e)=>new Xr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Te(e)});function Ba(t){if(t instanceof Lt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Pi.create(Ba(r))}return new Lt({...t._def,shape:()=>e})}else return t instanceof Xr?new Xr({...t._def,type:Ba(t.element)}):t instanceof Pi?Pi.create(Ba(t.unwrap())):t instanceof Sl?Sl.create(Ba(t.unwrap())):t instanceof Qo?Qo.create(t.items.map(e=>Ba(e))):t}class Lt extends Ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ze.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==de.object){const c=this._getOrReturnCtx(e);return se(c,{code:Q.invalid_type,expected:de.object,received:c.parsedType}),_e}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Bi&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const d=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new Ui(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Bi){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(c==="strict")a.length>0&&(se(s,{code:Q.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of a){const h=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new Ui(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const h=await d.key,p=await d.value;c.push({key:h,value:p,alwaysSet:d.alwaysSet})}return c}).then(c=>nr.mergeObjectSync(r,c)):nr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return he.errToObj,new Lt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:he.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Lt({...this._def,unknownKeys:"strip"})}passthrough(){return new Lt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Lt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Lt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:we.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Lt({...this._def,catchall:e})}pick(e){const n={};for(const r of ze.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Lt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ze.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Lt({...this._def,shape:()=>n})}deepPartial(){return Ba(this)}partial(e){const n={};for(const r of ze.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Lt({...this._def,shape:()=>n})}required(e){const n={};for(const r of ze.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Pi;)i=i._def.innerType;n[r]=i}return new Lt({...this._def,shape:()=>n})}keyof(){return rR(ze.objectKeys(this.shape))}}Lt.create=(t,e)=>new Lt({shape:()=>t,unknownKeys:"strip",catchall:Bi.create(),typeName:we.ZodObject,...Te(e)});Lt.strictCreate=(t,e)=>new Lt({shape:()=>t,unknownKeys:"strict",catchall:Bi.create(),typeName:we.ZodObject,...Te(e)});Lt.lazycreate=(t,e)=>new Lt({shape:t,unknownKeys:"strip",catchall:Bi.create(),typeName:we.ZodObject,...Te(e)});class $f extends Ue{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ns(a.ctx.common.issues));return se(n,{code:Q.invalid_union,unionErrors:o}),_e}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new Ns(l));return se(n,{code:Q.invalid_union,unionErrors:a}),_e}}get options(){return this._def.options}}$f.create=(t,e)=>new $f({options:t,typeName:we.ZodUnion,...Te(e)});function jy(t,e){const n=li(t),r=li(e);if(t===e)return{valid:!0,data:t};if(n===de.object&&r===de.object){const s=ze.objectKeys(e),i=ze.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=jy(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===de.array&&r===de.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=jy(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===de.date&&r===de.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class qf extends Ue{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(VI(i)||VI(o))return _e;const a=jy(i.value,o.value);return a.valid?((LI(i)||LI(o))&&n.dirty(),{status:n.value,value:a.data}):(se(r,{code:Q.invalid_intersection_types}),_e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}qf.create=(t,e,n)=>new qf({left:t,right:e,typeName:we.ZodIntersection,...Te(n)});class Qo extends Ue{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==de.array)return se(r,{code:Q.invalid_type,expected:de.array,received:r.parsedType}),_e;if(r.data.length<this._def.items.length)return se(r,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e;!this._def.rest&&r.data.length>this._def.items.length&&(se(r,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ui(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>nr.mergeArray(n,o)):nr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Qo({...this._def,rest:e})}}Qo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qo({items:t,typeName:we.ZodTuple,rest:null,...Te(e)})};class qI extends Ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==de.map)return se(r,{code:Q.invalid_type,expected:de.map,received:r.parsedType}),_e;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new Ui(r,a,r.path,[c,"key"])),value:i._parse(new Ui(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return _e;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return _e;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}}}}qI.create=(t,e,n)=>new qI({valueType:e,keyType:t,typeName:we.ZodMap,...Te(n)});class Wc extends Ue{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==de.set)return se(r,{code:Q.invalid_type,expected:de.set,received:r.parsedType}),_e;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(se(r,{code:Q.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(se(r,{code:Q.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const d of l){if(d.status==="aborted")return _e;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new Ui(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Wc({...this._def,minSize:{value:e,message:he.toString(n)}})}max(e,n){return new Wc({...this._def,maxSize:{value:e,message:he.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Wc.create=(t,e)=>new Wc({valueType:t,minSize:null,maxSize:null,typeName:we.ZodSet,...Te(e)});class WI extends Ue{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}WI.create=(t,e)=>new WI({getter:t,typeName:we.ZodLazy,...Te(e)});class GI extends Ue{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return se(n,{received:n.data,code:Q.invalid_literal,expected:this._def.value}),_e}return{status:"valid",value:e.data}}get value(){return this._def.value}}GI.create=(t,e)=>new GI({value:t,typeName:we.ZodLiteral,...Te(e)});function rR(t,e){return new xl({values:t,typeName:we.ZodEnum,...Te(e)})}class xl extends Ue{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return se(n,{expected:ze.joinValues(r),received:n.parsedType,code:Q.invalid_type}),_e}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return se(n,{received:n.data,code:Q.invalid_enum_value,options:r}),_e}return yr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return xl.create(e,{...this._def,...n})}exclude(e,n=this._def){return xl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}xl.create=rR;class HI extends Ue{_parse(e){const n=ze.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==de.string&&r.parsedType!==de.number){const s=ze.objectValues(n);return se(r,{expected:ze.joinValues(s),received:r.parsedType,code:Q.invalid_type}),_e}if(this._cache||(this._cache=new Set(ze.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=ze.objectValues(n);return se(r,{received:r.data,code:Q.invalid_enum_value,options:s}),_e}return yr(e.data)}get enum(){return this._def.values}}HI.create=(t,e)=>new HI({values:t,typeName:we.ZodNativeEnum,...Te(e)});class Wf extends Ue{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==de.promise&&n.common.async===!1)return se(n,{code:Q.invalid_type,expected:de.promise,received:n.parsedType}),_e;const r=n.parsedType===de.promise?n.data:Promise.resolve(n.data);return yr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Wf.create=(t,e)=>new Wf({type:t,typeName:we.ZodPromise,...Te(e)});class bl extends Ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{se(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return _e;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?_e:l.status==="dirty"||n.value==="dirty"?Yu(l.value):l});{if(n.value==="aborted")return _e;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?_e:a.status==="dirty"||n.value==="dirty"?Yu(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?_e:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?_e:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Tl(o))return _e;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Tl(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):_e);ze.assertNever(s)}}bl.create=(t,e,n)=>new bl({schema:t,typeName:we.ZodEffects,effect:e,...Te(n)});bl.createWithPreprocess=(t,e,n)=>new bl({schema:e,effect:{type:"preprocess",transform:t},typeName:we.ZodEffects,...Te(n)});class Pi extends Ue{_parse(e){return this._getType(e)===de.undefined?yr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pi.create=(t,e)=>new Pi({innerType:t,typeName:we.ZodOptional,...Te(e)});class Sl extends Ue{_parse(e){return this._getType(e)===de.null?yr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sl.create=(t,e)=>new Sl({innerType:t,typeName:we.ZodNullable,...Te(e)});class Uy extends Ue{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===de.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Uy.create=(t,e)=>new Uy({innerType:t,typeName:we.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});class By extends Ue{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Bf(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ns(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ns(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}By.create=(t,e)=>new By({innerType:t,typeName:we.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});class KI extends Ue{_parse(e){if(this._getType(e)!==de.nan){const r=this._getOrReturnCtx(e);return se(r,{code:Q.invalid_type,expected:de.nan,received:r.parsedType}),_e}return{status:"valid",value:e.data}}}KI.create=t=>new KI({typeName:we.ZodNaN,...Te(t)});class vL extends Ue{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class N_ extends Ue{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?_e:i.status==="dirty"?(n.dirty(),Yu(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?_e:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new N_({in:e,out:n,typeName:we.ZodPipeline})}}class zy extends Ue{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Tl(s)&&(s.value=Object.freeze(s.value)),s);return Bf(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}zy.create=(t,e)=>new zy({innerType:t,typeName:we.ZodReadonly,...Te(e)});var we;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(we||(we={}));const Al=_i.create,_L=Fy.create;Bi.create;Xr.create;const D_=Lt.create;$f.create;qf.create;Qo.create;const wL=xl.create;Wf.create;Pi.create;Sl.create;var QI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},EL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},iR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[d],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new IL;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const T=c<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TL=function(t){const e=sR(t);return iR.encodeByteArray(e,!0)},Gf=function(t){return TL(t).replace(/\./g,"")},oR=function(t){try{return iR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=()=>xL().__FIREBASE_DEFAULTS__,SL=()=>{if(typeof process>"u"||typeof QI>"u")return;const t=QI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oR(t[1]);return e&&JSON.parse(e)},Lm=()=>{try{return bL()||SL()||AL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aR=t=>{var e,n;return(n=(e=Lm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lR=t=>{const e=aR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uR=()=>{var t;return(t=Lm())===null||t===void 0?void 0:t.config},cR=t=>{var e;return(e=Lm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gf(JSON.stringify(n)),Gf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function CL(){var t;const e=(t=Lm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OL(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hR(){return!CL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fR(){try{return typeof indexedDB=="object"}catch{return!1}}function VL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="FirebaseError";class ss extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LL,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wd.prototype.create)}}class wd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ML(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ss(s,a,r)}}function ML(t,e){return t.replace(FL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FL=/\{\$([^}]+)}/g;function jL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(YI(i)&&YI(o)){if(!zi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function YI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ju(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UL(t,e){const n=new BL(t,e);return n.subscribe.bind(n)}class BL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dg),s.error===void 0&&(s.error=dg),s.complete===void 0&&(s.complete=dg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t){return t&&t._delegate?t._delegate:t}class $i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WL(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qL(t){return t===bo?void 0:t}function WL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $L(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const HL={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},KL=Re.INFO,QL={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},YL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O_{constructor(e){this.name=e,this._logLevel=KL,this._logHandler=YL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const XL=(t,e)=>e.some(n=>t instanceof n);let XI,JI;function JL(){return XI||(XI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZL(){return JI||(JI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mR=new WeakMap,$y=new WeakMap,pR=new WeakMap,hg=new WeakMap,V_=new WeakMap;function eM(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ni(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mR.set(n,t)}).catch(()=>{}),V_.set(e,t),e}function tM(t){if($y.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$y.set(t,e)}let qy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $y.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nM(t){qy=t(qy)}function rM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fg(this),e,...n);return pR.set(r,e.sort?e.sort():[e]),Ni(r)}:ZL().includes(t)?function(...e){return t.apply(fg(this),e),Ni(mR.get(this))}:function(...e){return Ni(t.apply(fg(this),e))}}function sM(t){return typeof t=="function"?rM(t):(t instanceof IDBTransaction&&tM(t),XL(t,JL())?new Proxy(t,qy):t)}function Ni(t){if(t instanceof IDBRequest)return eM(t);if(hg.has(t))return hg.get(t);const e=sM(t);return e!==t&&(hg.set(t,e),V_.set(e,t)),e}const fg=t=>V_.get(t);function iM(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ni(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ni(o.result),l.oldVersion,l.newVersion,Ni(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const oM=["get","getKey","getAll","getAllKeys","count"],aM=["put","add","delete","clear"],mg=new Map;function ZI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oM.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return mg.set(e,i),i}nM(t=>({...t,get:(e,n,r)=>ZI(e,n)||t.get(e,n,r),has:(e,n)=>!!ZI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wy="@firebase/app",eT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new O_("@firebase/app"),cM="@firebase/app-compat",dM="@firebase/analytics-compat",hM="@firebase/analytics",fM="@firebase/app-check-compat",mM="@firebase/app-check",pM="@firebase/auth",gM="@firebase/auth-compat",yM="@firebase/database",vM="@firebase/data-connect",_M="@firebase/database-compat",wM="@firebase/functions",EM="@firebase/functions-compat",IM="@firebase/installations",TM="@firebase/installations-compat",xM="@firebase/messaging",bM="@firebase/messaging-compat",SM="@firebase/performance",AM="@firebase/performance-compat",RM="@firebase/remote-config",kM="@firebase/remote-config-compat",CM="@firebase/storage",PM="@firebase/storage-compat",NM="@firebase/firestore",DM="@firebase/vertexai-preview",OM="@firebase/firestore-compat",VM="firebase",LM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="[DEFAULT]",MM={[Wy]:"fire-core",[cM]:"fire-core-compat",[hM]:"fire-analytics",[dM]:"fire-analytics-compat",[mM]:"fire-app-check",[fM]:"fire-app-check-compat",[pM]:"fire-auth",[gM]:"fire-auth-compat",[yM]:"fire-rtdb",[vM]:"fire-data-connect",[_M]:"fire-rtdb-compat",[wM]:"fire-fn",[EM]:"fire-fn-compat",[IM]:"fire-iid",[TM]:"fire-iid-compat",[xM]:"fire-fcm",[bM]:"fire-fcm-compat",[SM]:"fire-perf",[AM]:"fire-perf-compat",[RM]:"fire-rc",[kM]:"fire-rc-compat",[CM]:"fire-gcs",[PM]:"fire-gcs-compat",[NM]:"fire-fst",[OM]:"fire-fst-compat",[DM]:"fire-vertex","fire-js":"fire-js",[VM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=new Map,FM=new Map,Gy=new Map;function tT(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yo(t){const e=t.name;if(Gy.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Gy.set(e,t);for(const n of Kf.values())tT(n,t);for(const n of FM.values())tT(n,t);return!0}function Zl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jM(t,e,n=Hf){Zl(t,e).clearInstance(n)}function Pt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new wd("app","Firebase",UM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=LM;function gR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Di.create("bad-app-name",{appName:String(s)});if(n||(n=uR()),!n)throw Di.create("no-options");const i=Kf.get(s);if(i){if(zi(n,i.options)&&zi(r,i.config))return i;throw Di.create("duplicate-app",{appName:s})}const o=new GL(s);for(const l of Gy.values())o.addComponent(l);const a=new BM(n,r,o);return Kf.set(s,a),a}function L_(t=Hf){const e=Kf.get(t);if(!e&&t===Hf&&uR())return gR();if(!e)throw Di.create("no-app",{appName:t});return e}function Jr(t,e,n){var r;let s=(r=MM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(a.join(" "));return}Yo(new $i(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="firebase-heartbeat-database",$M=1,Gc="firebase-heartbeat-store";let pg=null;function yR(){return pg||(pg=iM(zM,$M,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Di.create("idb-open",{originalErrorMessage:t.message})})),pg}async function qM(t){try{const n=(await yR()).transaction(Gc),r=await n.objectStore(Gc).get(vR(t));return await n.done,r}catch(e){if(e instanceof ss)Ds.warn(e.message);else{const n=Di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function nT(t,e){try{const r=(await yR()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,vR(t)),await r.done}catch(n){if(n instanceof ss)Ds.warn(n.message);else{const r=Di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(r.message)}}}function vR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=1024,GM=30*24*60*60*1e3;class HM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=GM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rT(),{heartbeatsToSend:r,unsentEntries:s}=KM(this._heartbeatsCache.heartbeats),i=Gf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ds.warn(n),""}}}function rT(){return new Date().toISOString().substring(0,10)}function KM(t,e=WM){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),sT(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fR()?VL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sT(t){return Gf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t){Yo(new $i("platform-logger",e=>new lM(e),"PRIVATE")),Yo(new $i("heartbeat",e=>new HM(e),"PRIVATE")),Jr(Wy,eT,t),Jr(Wy,eT,"esm2017"),Jr("fire-js","")}YM("");var qr=function(){return qr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qr.apply(this,arguments)};function Ed(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function XM(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={PHONE:"phone",TOTP:"totp"},ZM={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},eF={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},tF={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},nF={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function _R(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sF=rF,wR=_R,ER=new wd("auth","Firebase",_R()),iF={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=new O_("@firebase/auth");function oF(t,...e){Qf.logLevel<=Re.WARN&&Qf.warn(`Auth (${ha}): ${t}`,...e)}function Zh(t,...e){Qf.logLevel<=Re.ERROR&&Qf.error(`Auth (${ha}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,...e){throw F_(t,...e)}function An(t,...e){return F_(t,...e)}function M_(t,e,n){const r=Object.assign(Object.assign({},wR()),{[e]:n});return new wd("auth","Firebase",r).create(e,{appName:t.name})}function Xt(t){return M_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eu(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wn(t,"argument-error"),M_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function F_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ER.create(t,...e)}function Y(t,e,...n){if(!t)throw F_(e,...n)}function Wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zh(e),new Error(e)}function Os(t,e){t||Wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function j_(){return iT()==="http:"||iT()==="https:"}function iT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j_()||NL()||"connection"in navigator)?navigator.onLine:!0}function lF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){this.shortDelay=e,this.longDelay=n,Os(n>e,"Short delay should be less than long delay!"),this.isMobile=kL()||DL()}get(){return aF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t,e){Os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=new Id(3e4,6e4);function at(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function lt(t,e,n,r,s={}){return TR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Jl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return PL()||(c.referrerPolicy="no-referrer"),IR.fetch()(xR(t,t.config.apiHost,n,a),c)})}async function TR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},uF),e);try{const s=new hF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Zu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw M_(t,d,c);Wn(t,d)}}catch(s){if(s instanceof ss)throw s;Wn(t,"network-request-failed",{message:String(s)})}}async function js(t,e,n,r,s={}){const i=await lt(t,e,n,r,s);return"mfaPendingCredential"in i&&Wn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function xR(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?U_(t.config,s):`${t.config.apiScheme}://${s}`}function dF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(An(this.auth,"network-request-failed")),cF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=An(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){return t!==void 0&&t.getResponse!==void 0}function aT(t){return t!==void 0&&t.enterprise!==void 0}class bR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t){return(await lt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function SR(t,e){return lt(t,"GET","/v2/recaptchaConfig",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(t,e){return lt(t,"POST","/v1/accounts:delete",e)}async function pF(t,e){return lt(t,"POST","/v1/accounts:update",e)}async function AR(t,e){return lt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t,e=!1){return ce(t).getIdToken(e)}async function RR(t,e=!1){const n=ce(t),r=await n.getIdToken(e),s=Mm(r);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:pc(gg(s.auth_time)),issuedAtTime:pc(gg(s.iat)),expirationTime:pc(gg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gg(t){return Number(t)*1e3}function Mm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const s=oR(n);return s?JSON.parse(s):(Zh("Failed to decode base64 JWT payload"),null)}catch(s){return Zh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function lT(t){const e=Mm(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ss&&yF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Vs(t,AR(n,{idToken:r}));Y(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?CR(i.providerUserInfo):[],a=_F(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hy(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function kR(t){const e=ce(t);await Kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _F(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function CR(t){return t.map(e=>{var{providerId:n}=e,r=Ed(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e){const n=await TR(t,{},async()=>{const r=Jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=xR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",IR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EF(t,e){return lt(t,"POST","/v2/accounts:revokeToken",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=lT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await wF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new cl;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Es{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ed(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vs(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RR(this,e)}reload(){return kR(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pt(this.auth.app))return Promise.reject(Xt(this.auth));const e=await this.getIdToken();return await Vs(this,mF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:O,isAnonymous:L,providerData:j,stsTokenManager:S}=n;Y(E&&S,e,"internal-error");const I=cl.fromJSON(this.name,S);Y(typeof E=="string",e,"internal-error"),ei(h,e.name),ei(p,e.name),Y(typeof O=="boolean",e,"internal-error"),Y(typeof L=="boolean",e,"internal-error"),ei(g,e.name),ei(T,e.name),ei(_,e.name),ei(b,e.name),ei(w,e.name),ei(v,e.name);const C=new Es({uid:E,auth:e,email:p,emailVerified:O,displayName:h,isAnonymous:L,photoURL:T,phoneNumber:g,tenantId:_,stsTokenManager:I,createdAt:w,lastLoginAt:v});return j&&Array.isArray(j)&&(C.providerData=j.map(A=>Object.assign({},A))),b&&(C._redirectEventId=b),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new cl;s.updateFromServerResponse(n);const i=new Es({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Kc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Y(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?CR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new cl;a.updateFromIdToken(r);const l=new Es({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new Map;function Is(t){Os(t instanceof Function,"Expected a class definition");let e=uT.get(t);return e?(Os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}PR.type="NONE";const Ky=PR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t,e,n){return`firebase:${t}:${e}:${n}`}class dl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ef(this.userKey,s.apiKey,i),this.fullPersistenceKey=ef("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Es._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new dl(Is(Ky),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Is(Ky);const o=ef(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Es._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new dl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new dl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MR(e))return"Blackberry";if(FR(e))return"Webos";if(DR(e))return"Safari";if((e.includes("chrome/")||OR(e))&&!e.includes("edge/"))return"Chrome";if(LR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function NR(t=Wt()){return/firefox\//i.test(t)}function DR(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OR(t=Wt()){return/crios\//i.test(t)}function VR(t=Wt()){return/iemobile/i.test(t)}function LR(t=Wt()){return/android/i.test(t)}function MR(t=Wt()){return/blackberry/i.test(t)}function FR(t=Wt()){return/webos/i.test(t)}function B_(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IF(t=Wt()){var e;return B_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TF(){return OL()&&document.documentMode===10}function jR(t=Wt()){return B_(t)||LR(t)||FR(t)||MR(t)||/windows phone/i.test(t)||VR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t,e=[]){let n;switch(t){case"Browser":n=cT(Wt());break;case"Worker":n=`${cT(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ha}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(t,e={}){return lt(t,"GET","/v2/passwordPolicy",at(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=6;class AF{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dT(this),this.idTokenSubscription=new dT(this),this.beforeStateQueue=new xF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ER,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Is(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await dl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await AR(this,{idToken:e}),r=await Es._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pt(this.app))return Promise.reject(Xt(this));const n=e?ce(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pt(this.app)?Promise.reject(Xt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pt(this.app)?Promise.reject(Xt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bF(this),n=new AF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Is(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[Is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rt(t){return ce(t)}class dT{constructor(e){this.auth=e,this.observer=null,this.addObserver=UL(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kF(t){Td=t}function z_(t){return Td.loadJS(t)}function CF(){return Td.recaptchaV2Script}function PF(){return Td.recaptchaEnterpriseScript}function NF(){return Td.gapiScript}function BR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const DF="recaptcha-enterprise",OF="NO_RECAPTCHA";class zR{constructor(e){this.type=DF,this.auth=Rt(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{SR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new bR(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;aT(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(OF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&aT(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=PF();l.length!==0&&(l+=a),z_(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function hT(t,e,n,r=!1){const s=new zR(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Qc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await hT(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await hT(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}async function VF(t){const e=Rt(t),n=await SR(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new bR(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")&&new zR(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t,e){const n=Zl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(zi(i,e??{}))return s;Wn(s,"already-initialized")}return n.initialize({options:e})}function LF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Is);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qR(t,e,n){const r=Rt(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=WR(e),{host:o,port:a}=MF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||FF()}function WR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MF(t){const e=WR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:fT(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:fT(o)}}}function fT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,n){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){return lt(t,"POST","/v1/accounts:resetPassword",at(t,e))}async function jF(t,e){return lt(t,"POST","/v1/accounts:update",e)}async function UF(t,e){return lt(t,"POST","/v1/accounts:signUp",e)}async function BF(t,e){return lt(t,"POST","/v1/accounts:update",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(t,e){return js(t,"POST","/v1/accounts:signInWithPassword",at(t,e))}async function Fm(t,e){return lt(t,"POST","/v1/accounts:sendOobCode",at(t,e))}async function $F(t,e){return Fm(t,e)}async function qF(t,e){return Fm(t,e)}async function WF(t,e){return Fm(t,e)}async function GF(t,e){return Fm(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t,e){return js(t,"POST","/v1/accounts:signInWithEmailLink",at(t,e))}async function KF(t,e){return js(t,"POST","/v1/accounts:signInWithEmailLink",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends tu{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Rl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Rl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qc(e,n,"signInWithPassword",zF);case"emailLink":return HF(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qc(e,r,"signUpPassword",UF);case"emailLink":return KF(e,{idToken:n,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(t,e){return js(t,"POST","/v1/accounts:signInWithIdp",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF="http://localhost";class ts extends tu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ed(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ts(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ss(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ss(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ss(e,n)}buildRequest(){const e={requestUri:QF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YF(t,e){return lt(t,"POST","/v1/accounts:sendVerificationCode",at(t,e))}async function XF(t,e){return js(t,"POST","/v1/accounts:signInWithPhoneNumber",at(t,e))}async function JF(t,e){const n=await js(t,"POST","/v1/accounts:signInWithPhoneNumber",at(t,e));if(n.temporaryProof)throw Zu(t,"account-exists-with-different-credential",n);return n}const ZF={USER_NOT_FOUND:"user-not-found"};async function ej(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return js(t,"POST","/v1/accounts:signInWithPhoneNumber",at(t,n),ZF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends tu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Oi({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Oi({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return XF(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return JF(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return ej(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Oi({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nj(t){const e=Xu(Ju(t)).link,n=e?Xu(Ju(e)).deep_link_id:null,r=Xu(Ju(t)).deep_link_id;return(r?Xu(Ju(r)).link:null)||r||n||e||t}class nu{constructor(e){var n,r,s,i,o,a;const l=Xu(Ju(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=tj((s=l.mode)!==null&&s!==void 0?s:null);Y(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=nj(e);try{return new nu(n)}catch{return null}}}function rj(t){return nu.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,n){return Rl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nu.parseLink(n);return Y(r,"argument-error"),Rl._fromEmailAndCode(e,r.code,r.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Us{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gc extends ru{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Y("providerId"in n&&"signInMethod"in n,"argument-error"),ts._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Y(e.idToken||e.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return gc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return gc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:a}=e;if(!r&&!s&&!n&&!i||!a)return null;try{return new gc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends ru{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gs.credential(n,r)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends ru{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="http://localhost";class Yc extends tu{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ss(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ss(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ss(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:i}=n;return!r||!s||!i||r!==s?null:new Yc(r,i)}static _create(e,n){return new Yc(e,n)}buildRequest(){return{requestUri:sj,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="saml.";class Yf extends Us{constructor(e){Y(e.startsWith(ij),"argument-error"),super(e)}static credentialFromResult(e){return Yf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Yf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Yc.fromJSON(e);return Y(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Yc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends ru{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vs.credential(n,r)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e){return js(t,"POST","/v1/accounts:signUp",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Es._fromIdTokenResponse(e,r,s),o=mT(r);return new gr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=mT(r);return new gr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function mT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(t){var e;if(Pt(t.app))return Promise.reject(Xt(t));const n=Rt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new gr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await HR(n,{returnSecureToken:!0}),s=await gr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends ss{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xf.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Xf(e,n,r,s)}}function KR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xf._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(t,e){const n=ce(t);await jm(!0,n,e);const{providerUserInfo:r}=await pF(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=QR(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function $_(t,e,n=!1){const r=await Vs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gr._forOperation(t,"link",r)}async function jm(t,e,n){await Kc(e);const r=QR(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";Y(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(t,e,n=!1){const{auth:r}=t;if(Pt(r.app))return Promise.reject(Xt(r));const s="reauthenticate";try{const i=await Vs(t,KR(r,s,e,t),n);Y(i.idToken,r,"internal-error");const o=Mm(i.idToken);Y(o,r,"internal-error");const{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),gr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Wn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e,n=!1){if(Pt(t.app))return Promise.reject(Xt(t));const r="signIn",s=await KR(t,r,e),i=await gr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Um(t,e){return XR(Rt(t),e)}async function JR(t,e){const n=ce(t);return await jm(!1,n,e.providerId),$_(n,e)}async function ZR(t,e){return YR(ce(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e){return js(t,"POST","/v1/accounts:signInWithCustomToken",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){if(Pt(t.app))return Promise.reject(Xt(t));const n=Rt(t),r=await lj(n,{token:e,returnSecureToken:!0}),s=await gr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?q_._fromServerResponse(e,n):"totpInfo"in n?W_._fromServerResponse(e,n):Wn(e,"internal-error")}}class q_ extends xd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new q_(n)}}class W_ extends xd{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new W_(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e,n){var r;Y(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Y(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Y(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Y(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G_(t){const e=Rt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cj(t,e,n){const r=Rt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Bm(r,s,n),await Qc(r,s,"getOobCode",qF)}async function dj(t,e,n){await GR(ce(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&G_(t),r})}async function hj(t,e){await BF(ce(t),{oobCode:e})}async function ek(t,e){const n=ce(t),r=await GR(n,{oobCode:e}),s=r.requestType;switch(Y(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(r.mfaInfo,n,"internal-error");default:Y(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=xd._fromServerResponse(Rt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function fj(t,e){const{data:n}=await ek(ce(t),e);return n.email}async function mj(t,e,n){if(Pt(t.app))return Promise.reject(Xt(t));const r=Rt(t),o=await Qc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&G_(t),l}),a=await gr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function tk(t,e,n){return Pt(t.app)?Promise.reject(Xt(t)):Um(ce(t),io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&G_(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e,n){const r=Rt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(o,a){Y(a.handleCodeInApp,r,"argument-error"),a&&Bm(r,o,a)}i(s,n),await Qc(r,s,"getOobCode",WF)}function gj(t,e){const n=nu.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function yj(t,e,n){if(Pt(t.app))return Promise.reject(Xt(t));const r=ce(t),s=io.credentialWithLink(e,n||Hc());return Y(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Um(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e){return lt(t,"POST","/v1/accounts:createAuthUri",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(t,e){const n=j_()?Hc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await vj(ce(t),r);return s||[]}async function wj(t,e){const n=ce(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Bm(n.auth,s,e);const{email:i}=await $F(n.auth,s);i!==t.email&&await t.reload()}async function Ej(t,e,n){const r=ce(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Bm(r.auth,i,n);const{email:o}=await GF(r.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(t,e){return lt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ce(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Vs(r,Ij(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function xj(t,e){const n=ce(t);return Pt(n.auth.app)?Promise.reject(Xt(n.auth)):nk(n,e,null)}function bj(t,e){return nk(ce(t),null,e)}async function nk(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await Vs(t,jF(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Mm(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new hl(i,a)}}if(!r)return null;switch(r){case"facebook.com":return new Aj(i,s);case"github.com":return new Rj(i,s);case"google.com":return new kj(i,s);case"twitter.com":return new Cj(i,s,t.screenName||null);case"custom":case"anonymous":return new hl(i,null);default:return new hl(i,r,s)}}class hl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class rk extends hl{constructor(e,n,r,s){super(e,n,r),this.username=s}}class Aj extends hl{constructor(e,n){super(e,"facebook.com",n)}}class Rj extends rk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class kj extends hl{constructor(e,n){super(e,"google.com",n)}}class Cj extends rk{constructor(e,n,r){super(e,"twitter.com",n,r)}}function Pj(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Sj(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t,e){return ce(t).setPersistence(e)}function Dj(t){return VF(t)}async function Oj(t,e){return Rt(t).validatePassword(e)}function sk(t,e,n,r){return ce(t).onIdTokenChanged(e,n,r)}function ik(t,e,n){return ce(t).beforeAuthStateChanged(e,n)}function ok(t,e,n,r){return ce(t).onAuthStateChanged(e,n,r)}function Vj(t){ce(t).useDeviceLanguage()}function Lj(t,e){return ce(t).updateCurrentUser(e)}function Mj(t){return ce(t).signOut()}function Fj(t,e){return Rt(t).revokeAccessToken(e)}async function jj(t){return ce(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Mo("enroll",e,n)}static _fromMfaPendingCredential(e){return new Mo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Mo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Mo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Rt(e),s=n.customData._serverResponse,i=(s.mfaInfo||[]).map(a=>xd._fromServerResponse(r,a));Y(s.mfaPendingCredential,r,"internal-error");const o=Mo._fromMfaPendingCredential(s.mfaPendingCredential);return new H_(o,i,async a=>{const l=await a._process(r,o);delete s.mfaInfo,delete s.mfaPendingCredential;const c=Object.assign(Object.assign({},s),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const d=await gr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return Y(n.user,r,"internal-error"),gr._forOperation(n.user,n.operationType,c);default:Wn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Uj(t,e){var n;const r=ce(t),s=e;return Y(e.customData.operationType,r,"argument-error"),Y((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),H_._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:start",at(t,e))}function zj(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:finalize",at(t,e))}function $j(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:start",at(t,e))}function qj(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:finalize",at(t,e))}function Wj(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",at(t,e))}class K_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>xd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new K_(e)}async getSession(){return Mo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,s=await this.getSession(),i=await Vs(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await Vs(this.user,Wj(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const yg=new WeakMap;function Gj(t){const e=ce(t);return yg.has(e)||yg.set(e,K_._fromUser(e)),yg.get(e)}const Jf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=1e3,Kj=10;class lk extends ak{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);TF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Kj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Hj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lk.type="LOCAL";const uk=lk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck extends ak{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ck.type="SESSION";const Q_=ck;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new zm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await Qj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=$m("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return window}function Xj(t){Mt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(){return typeof Mt().WorkerGlobalScope<"u"&&typeof Mt().importScripts=="function"}async function Jj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eU(){return Y_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="firebaseLocalStorageDb",tU=1,Zf="firebaseLocalStorage",hk="fbase_key";class bd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qm(t,e){return t.transaction([Zf],e?"readwrite":"readonly").objectStore(Zf)}function nU(){const t=indexedDB.deleteDatabase(dk);return new bd(t).toPromise()}function Qy(){const t=indexedDB.open(dk,tU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zf,{keyPath:hk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zf)?e(r):(r.close(),await nU(),e(await Qy()))})})}async function pT(t,e,n){const r=qm(t,!0).put({[hk]:e,value:n});return new bd(r).toPromise()}async function rU(t,e){const n=qm(t,!1).get(e),r=await new bd(n).toPromise();return r===void 0?null:r.value}function gT(t,e){const n=qm(t,!0).delete(e);return new bd(n).toPromise()}const sU=800,iU=3;class fk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Y_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zm._getInstance(eU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Jj(),!this.activeServiceWorker)return;this.sender=new Yj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qy();return await pT(e,Jf,"1"),await gT(e,Jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qm(s,!1).getAll();return new bd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fk.type="LOCAL";const mk=fk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oU(t,e){return lt(t,"POST","/v2/accounts/mfaSignIn:start",at(t,e))}function aU(t,e){return lt(t,"POST","/v2/accounts/mfaSignIn:finalize",at(t,e))}function lU(t,e){return lt(t,"POST","/v2/accounts/mfaSignIn:finalize",at(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=500,cU=6e4,wh=1e12;class dU{constructor(e){this.auth=e,this.counter=wh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new hU(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||wh;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||wh;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||wh;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class hU{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Y(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=fU(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},cU)},uU))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function fU(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=BR("rcb"),mU=new Id(3e4,6e4);class pU{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Mt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Y(gU(n),e,"argument-error"),this.shouldResolveImmediately(n)&&oT(Mt().grecaptcha)?Promise.resolve(Mt().grecaptcha):new Promise((r,s)=>{const i=Mt().setTimeout(()=>{s(An(e,"network-request-failed"))},mU.get());Mt()[vg]=()=>{Mt().clearTimeout(i),delete Mt()[vg];const a=Mt().grecaptcha;if(!a||!oT(a)){s(An(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const h=l(c,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${CF()}?${Jl({onload:vg,render:"explicit",hl:n})}`;z_(o).catch(()=>{clearTimeout(i),s(An(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Mt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function gU(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class yU{async load(e){return new dU(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="recaptcha",vU={theme:"light",type:"image"};class _U{constructor(e,n,r=Object.assign({},vU)){this.parameters=r,this.type=pk,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(e),this.isInvisible=this.parameters.size==="invisible",Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Y(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new yU:new pU,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Mt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Y(j_()&&!Y_(),this.auth,"internal-error"),await wU(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await fF(this.auth);Y(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function wU(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Oi._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function EU(t,e,n){if(Pt(t.app))return Promise.reject(Xt(t));const r=Rt(t),s=await Wm(r,e,ce(n));return new X_(s,i=>Um(r,i))}async function IU(t,e,n){const r=ce(t);await jm(!1,r,"phone");const s=await Wm(r.auth,e,ce(n));return new X_(s,i=>JR(r,i))}async function TU(t,e,n){const r=ce(t);if(Pt(r.auth.app))return Promise.reject(Xt(r.auth));const s=await Wm(r.auth,e,ce(n));return new X_(s,i=>ZR(r,i))}async function Wm(t,e,n){var r;const s=await n.verify();try{Y(typeof s=="string",t,"argument-error"),Y(n.type===pk,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return Y(o.type==="enroll",t,"internal-error"),(await Bj(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Y(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return Y(a,t,"missing-multi-factor-info"),(await oU(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await YF(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}async function xU(t,e){const n=ce(t);if(Pt(n.auth.app))return Promise.reject(Xt(n.auth));await $_(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.providerId=Uo.PROVIDER_ID,this.auth=Rt(e)}verifyPhoneNumber(e,n){return Wm(this.auth,e,ce(n))}static credential(e,n){return Oi._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Uo.credentialFromTaggedObject(n)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Oi._fromTokenResponse(n,r):null}}Uo.PROVIDER_ID="phone";Uo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t,e){return e?Is(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends tu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ss(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ss(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bU(t){return XR(t.auth,new J_(t),t.bypassAuthState)}function SU(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),YR(n,new J_(t),t.bypassAuthState)}async function AU(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),$_(n,new J_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bU;case"linkViaPopup":case"linkViaRedirect":return AU;case"reauthViaPopup":case"reauthViaRedirect":return SU;default:Wn(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=new Id(2e3,1e4);async function kU(t,e,n){if(Pt(t.app))return Promise.reject(An(t,"operation-not-supported-in-this-environment"));const r=Rt(t);eu(t,e,Us);const s=fa(r,n);return new Ts(r,"signInViaPopup",e,s).executeNotNull()}async function CU(t,e,n){const r=ce(t);if(Pt(r.auth.app))return Promise.reject(An(r.auth,"operation-not-supported-in-this-environment"));eu(r.auth,e,Us);const s=fa(r.auth,n);return new Ts(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function PU(t,e,n){const r=ce(t);eu(r.auth,e,Us);const s=fa(r.auth,n);return new Ts(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Ts extends gk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ts.currentPopupAction&&Ts.currentPopupAction.cancel(),Ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=$m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(An(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(An(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(An(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RU.get())};e()}}Ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU="pendingRedirect",tf=new Map;class DU extends gk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tf.get(this.auth._key());if(!e){try{const r=await OU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tf.set(this.auth._key(),e)}return this.bypassAuthState||tf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OU(t,e){const n=vk(e),r=yk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Z_(t,e){return yk(t)._set(vk(e),"true")}function VU(t,e){tf.set(t._key(),e)}function yk(t){return Is(t._redirectPersistence)}function vk(t){return ef(NU,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t,e,n){return MU(t,e,n)}async function MU(t,e,n){if(Pt(t.app))return Promise.reject(Xt(t));const r=Rt(t);eu(t,e,Us),await r._initializationPromise;const s=fa(r,n);return await Z_(s,r),s._openRedirect(r,e,"signInViaRedirect")}function FU(t,e,n){return jU(t,e,n)}async function jU(t,e,n){const r=ce(t);if(eu(r.auth,e,Us),Pt(r.auth.app))return Promise.reject(Xt(r.auth));await r.auth._initializationPromise;const s=fa(r.auth,n);await Z_(s,r.auth);const i=await wk(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",i)}function UU(t,e,n){return BU(t,e,n)}async function BU(t,e,n){const r=ce(t);eu(r.auth,e,Us),await r.auth._initializationPromise;const s=fa(r.auth,n);await jm(!1,r,e.providerId),await Z_(s,r.auth);const i=await wk(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function zU(t,e){return await Rt(t)._initializationPromise,_k(t,e,!1)}async function _k(t,e,n=!1){if(Pt(t.app))return Promise.reject(Xt(t));const r=Rt(t),s=fa(r,e),o=await new DU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function wk(t){const e=$m(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=10*60*1e3;class qU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ek(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(An(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$U&&this.cachedEventUids.clear(),this.cachedEventUids.has(yT(e))}saveEventToCache(e){this.cachedEventUids.add(yT(e)),this.lastProcessedEventTime=Date.now()}}function yT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ek({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ek(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(t,e={}){return lt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KU=/^https?/;async function QU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await GU(t);for(const n of e)try{if(YU(n))return}catch{}Wn(t,"unauthorized-domain")}function YU(t){const e=Hc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!KU.test(n))return!1;if(HU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=new Id(3e4,6e4);function vT(){const t=Mt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JU(t){return new Promise((e,n)=>{var r,s,i;function o(){vT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vT(),n(An(t,"network-request-failed"))},timeout:XU.get()})}if(!((s=(r=Mt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Mt().gapi)===null||i===void 0)&&i.load)o();else{const a=BR("iframefcb");return Mt()[a]=()=>{gapi.load?o():n(An(t,"network-request-failed"))},z_(`${NF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw nf=null,e})}let nf=null;function ZU(t){return nf=nf||JU(t),nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new Id(5e3,15e3),t4="__/auth/iframe",n4="emulator/auth/iframe",r4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i4(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?U_(e,n4):`https://${t.config.authDomain}/${t4}`,r={apiKey:e.apiKey,appName:t.name,v:ha},s=s4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Jl(r).slice(1)}`}async function o4(t){const e=await ZU(t),n=Mt().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:i4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=An(t,"network-request-failed"),a=Mt().setTimeout(()=>{i(o)},e4.get());function l(){Mt().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l4=500,u4=600,c4="_blank",d4="http://localhost";class _T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h4(t,e,n,r=l4,s=u4){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},a4),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Wt().toLowerCase();n&&(a=OR(c)?c4:n),NR(c)&&(e=e||d4,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,T])=>`${p}${g}=${T},`,"");if(IF(c)&&a!=="_self")return f4(e||"",a),new _T(null);const h=window.open(e||"",a,d);Y(h,t,"popup-blocked");try{h.focus()}catch{}return new _T(h)}function f4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="__/auth/handler",p4="emulator/auth/handler",g4=encodeURIComponent("fac");async function wT(t,e,n,r,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ha,eventId:s};if(e instanceof Us){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof ru){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${g4}=${encodeURIComponent(l)}`:"";return`${y4(t)}?${Jl(a).slice(1)}${c}`}function y4({config:t}){return t.emulator?U_(t,p4):`https://${t.authDomain}/${m4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="webStorageSupport";class v4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q_,this._completeRedirectFn=_k,this._overrideRedirectResult=VU}async _openPopup(e,n,r,s){var i;Os((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await wT(e,n,r,Hc(),s);return h4(e,o,$m())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await wT(e,n,r,Hc(),s);return Xj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Os(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await o4(e),r=new qU(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_g,{type:_g},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[_g];o!==void 0&&n(!!o),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jR()||DR()||B_()}}const Ik=v4;class Tk{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Wr("unexpected MultiFactorSessionType")}}}class ew extends Tk{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ew(e)}_finalizeEnroll(e,n,r){return zj(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return aU(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class xk{constructor(){}static assertion(e){return ew._fromCredential(e)}}xk.FACTOR_ID="phone";class bk{static assertionForEnrollment(e,n){return Xc._fromSecret(e,n)}static assertionForSignIn(e,n){return Xc._fromEnrollmentId(e,n)}static async generateSecret(e){var n;const r=e;Y(typeof((n=r.user)===null||n===void 0?void 0:n.auth)<"u","internal-error");const s=await $j(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});return Gm._fromStartTotpMfaEnrollmentResponse(s,r.user.auth)}}bk.FACTOR_ID="totp";class Xc extends Tk{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new Xc(n,void 0,e)}static _fromEnrollmentId(e,n){return new Xc(n,e)}async _finalizeEnroll(e,n,r){return Y(typeof this.secret<"u",e,"argument-error"),qj(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){Y(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return lU(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class Gm{constructor(e,n,r,s,i,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=s,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,n){return new Gm(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var r;let s=!1;return(Eh(e)||Eh(n))&&(s=!0),s&&(Eh(e)&&(e=((r=this.auth.currentUser)===null||r===void 0?void 0:r.email)||"unknownuser"),Eh(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Eh(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var ET="@firebase/auth",IT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E4(t){Yo(new $i("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UR(t)},c=new RF(r,s,i,l);return LF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yo(new $i("auth-internal",e=>{const n=Rt(e.getProvider("auth").getImmediate());return(r=>new _4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(ET,IT,w4(t)),Jr(ET,IT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=5*60,T4=cR("authIdTokenMaxAge")||I4;let TT=null;const x4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>T4)return;const s=n==null?void 0:n.token;TT!==s&&(TT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Sk(t=L_()){const e=Zl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$R(t,{popupRedirectResolver:Ik,persistence:[mk,uk,Q_]}),r=cR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=x4(i.toString());ik(n,o,()=>o(n.currentUser)),sk(n,a=>o(a))}}const s=aR("auth");return s&&qR(n,`http://${s}`),n}function b4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=An("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",b4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E4("Browser");const S4=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:nF,ActionCodeURL:nu,AuthCredential:tu,AuthErrorCodes:iF,EmailAuthCredential:Rl,EmailAuthProvider:io,FacebookAuthProvider:ps,FactorId:JM,GithubAuthProvider:ys,GoogleAuthProvider:gs,OAuthCredential:ts,OAuthProvider:gc,OperationType:tF,PhoneAuthCredential:Oi,PhoneAuthProvider:Uo,PhoneMultiFactorGenerator:xk,ProviderId:ZM,RecaptchaVerifier:_U,SAMLAuthProvider:Yf,SignInMethod:eF,TotpMultiFactorGenerator:bk,TotpSecret:Gm,TwitterAuthProvider:vs,applyActionCode:hj,beforeAuthStateChanged:ik,browserLocalPersistence:uk,browserPopupRedirectResolver:Ik,browserSessionPersistence:Q_,checkActionCode:ek,confirmPasswordReset:dj,connectAuthEmulator:qR,createUserWithEmailAndPassword:mj,debugErrorMap:sF,deleteUser:jj,fetchSignInMethodsForEmail:_j,getAdditionalUserInfo:Pj,getAuth:Sk,getIdToken:gF,getIdTokenResult:RR,getMultiFactorResolver:Uj,getRedirectResult:zU,inMemoryPersistence:Ky,indexedDBLocalPersistence:mk,initializeAuth:$R,initializeRecaptchaConfig:Dj,isSignInWithEmailLink:gj,linkWithCredential:JR,linkWithPhoneNumber:IU,linkWithPopup:PU,linkWithRedirect:UU,multiFactor:Gj,onAuthStateChanged:ok,onIdTokenChanged:sk,parseActionCodeURL:rj,prodErrorMap:wR,reauthenticateWithCredential:ZR,reauthenticateWithPhoneNumber:TU,reauthenticateWithPopup:CU,reauthenticateWithRedirect:FU,reload:kR,revokeAccessToken:Fj,sendEmailVerification:wj,sendPasswordResetEmail:cj,sendSignInLinkToEmail:pj,setPersistence:Nj,signInAnonymously:oj,signInWithCredential:Um,signInWithCustomToken:uj,signInWithEmailAndPassword:tk,signInWithEmailLink:yj,signInWithPhoneNumber:EU,signInWithPopup:kU,signInWithRedirect:LU,signOut:Mj,unlink:aj,updateCurrentUser:Lj,updateEmail:xj,updatePassword:bj,updatePhoneNumber:xU,updateProfile:Tj,useDeviceLanguage:Vj,validatePassword:Oj,verifyBeforeUpdateEmail:Ej,verifyPasswordResetCode:fj},Symbol.toStringTag,{value:"Module"}));var A4="firebase",R4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(A4,R4,"app");var xT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,Ak;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function C(){}C.prototype=I.prototype,S.D=I.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(A,D,N){for(var k=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)k[pe-2]=arguments[pe];return I.prototype[D].apply(A,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,C){C||(C=0);var A=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)A[D]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(D=0;16>D;++D)A[D]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=S.g[0],C=S.g[1],D=S.g[2];var N=S.g[3],k=I+(N^C&(D^N))+A[0]+3614090360&4294967295;I=C+(k<<7&4294967295|k>>>25),k=N+(D^I&(C^D))+A[1]+3905402710&4294967295,N=I+(k<<12&4294967295|k>>>20),k=D+(C^N&(I^C))+A[2]+606105819&4294967295,D=N+(k<<17&4294967295|k>>>15),k=C+(I^D&(N^I))+A[3]+3250441966&4294967295,C=D+(k<<22&4294967295|k>>>10),k=I+(N^C&(D^N))+A[4]+4118548399&4294967295,I=C+(k<<7&4294967295|k>>>25),k=N+(D^I&(C^D))+A[5]+1200080426&4294967295,N=I+(k<<12&4294967295|k>>>20),k=D+(C^N&(I^C))+A[6]+2821735955&4294967295,D=N+(k<<17&4294967295|k>>>15),k=C+(I^D&(N^I))+A[7]+4249261313&4294967295,C=D+(k<<22&4294967295|k>>>10),k=I+(N^C&(D^N))+A[8]+1770035416&4294967295,I=C+(k<<7&4294967295|k>>>25),k=N+(D^I&(C^D))+A[9]+2336552879&4294967295,N=I+(k<<12&4294967295|k>>>20),k=D+(C^N&(I^C))+A[10]+4294925233&4294967295,D=N+(k<<17&4294967295|k>>>15),k=C+(I^D&(N^I))+A[11]+2304563134&4294967295,C=D+(k<<22&4294967295|k>>>10),k=I+(N^C&(D^N))+A[12]+1804603682&4294967295,I=C+(k<<7&4294967295|k>>>25),k=N+(D^I&(C^D))+A[13]+4254626195&4294967295,N=I+(k<<12&4294967295|k>>>20),k=D+(C^N&(I^C))+A[14]+2792965006&4294967295,D=N+(k<<17&4294967295|k>>>15),k=C+(I^D&(N^I))+A[15]+1236535329&4294967295,C=D+(k<<22&4294967295|k>>>10),k=I+(D^N&(C^D))+A[1]+4129170786&4294967295,I=C+(k<<5&4294967295|k>>>27),k=N+(C^D&(I^C))+A[6]+3225465664&4294967295,N=I+(k<<9&4294967295|k>>>23),k=D+(I^C&(N^I))+A[11]+643717713&4294967295,D=N+(k<<14&4294967295|k>>>18),k=C+(N^I&(D^N))+A[0]+3921069994&4294967295,C=D+(k<<20&4294967295|k>>>12),k=I+(D^N&(C^D))+A[5]+3593408605&4294967295,I=C+(k<<5&4294967295|k>>>27),k=N+(C^D&(I^C))+A[10]+38016083&4294967295,N=I+(k<<9&4294967295|k>>>23),k=D+(I^C&(N^I))+A[15]+3634488961&4294967295,D=N+(k<<14&4294967295|k>>>18),k=C+(N^I&(D^N))+A[4]+3889429448&4294967295,C=D+(k<<20&4294967295|k>>>12),k=I+(D^N&(C^D))+A[9]+568446438&4294967295,I=C+(k<<5&4294967295|k>>>27),k=N+(C^D&(I^C))+A[14]+3275163606&4294967295,N=I+(k<<9&4294967295|k>>>23),k=D+(I^C&(N^I))+A[3]+4107603335&4294967295,D=N+(k<<14&4294967295|k>>>18),k=C+(N^I&(D^N))+A[8]+1163531501&4294967295,C=D+(k<<20&4294967295|k>>>12),k=I+(D^N&(C^D))+A[13]+2850285829&4294967295,I=C+(k<<5&4294967295|k>>>27),k=N+(C^D&(I^C))+A[2]+4243563512&4294967295,N=I+(k<<9&4294967295|k>>>23),k=D+(I^C&(N^I))+A[7]+1735328473&4294967295,D=N+(k<<14&4294967295|k>>>18),k=C+(N^I&(D^N))+A[12]+2368359562&4294967295,C=D+(k<<20&4294967295|k>>>12),k=I+(C^D^N)+A[5]+4294588738&4294967295,I=C+(k<<4&4294967295|k>>>28),k=N+(I^C^D)+A[8]+2272392833&4294967295,N=I+(k<<11&4294967295|k>>>21),k=D+(N^I^C)+A[11]+1839030562&4294967295,D=N+(k<<16&4294967295|k>>>16),k=C+(D^N^I)+A[14]+4259657740&4294967295,C=D+(k<<23&4294967295|k>>>9),k=I+(C^D^N)+A[1]+2763975236&4294967295,I=C+(k<<4&4294967295|k>>>28),k=N+(I^C^D)+A[4]+1272893353&4294967295,N=I+(k<<11&4294967295|k>>>21),k=D+(N^I^C)+A[7]+4139469664&4294967295,D=N+(k<<16&4294967295|k>>>16),k=C+(D^N^I)+A[10]+3200236656&4294967295,C=D+(k<<23&4294967295|k>>>9),k=I+(C^D^N)+A[13]+681279174&4294967295,I=C+(k<<4&4294967295|k>>>28),k=N+(I^C^D)+A[0]+3936430074&4294967295,N=I+(k<<11&4294967295|k>>>21),k=D+(N^I^C)+A[3]+3572445317&4294967295,D=N+(k<<16&4294967295|k>>>16),k=C+(D^N^I)+A[6]+76029189&4294967295,C=D+(k<<23&4294967295|k>>>9),k=I+(C^D^N)+A[9]+3654602809&4294967295,I=C+(k<<4&4294967295|k>>>28),k=N+(I^C^D)+A[12]+3873151461&4294967295,N=I+(k<<11&4294967295|k>>>21),k=D+(N^I^C)+A[15]+530742520&4294967295,D=N+(k<<16&4294967295|k>>>16),k=C+(D^N^I)+A[2]+3299628645&4294967295,C=D+(k<<23&4294967295|k>>>9),k=I+(D^(C|~N))+A[0]+4096336452&4294967295,I=C+(k<<6&4294967295|k>>>26),k=N+(C^(I|~D))+A[7]+1126891415&4294967295,N=I+(k<<10&4294967295|k>>>22),k=D+(I^(N|~C))+A[14]+2878612391&4294967295,D=N+(k<<15&4294967295|k>>>17),k=C+(N^(D|~I))+A[5]+4237533241&4294967295,C=D+(k<<21&4294967295|k>>>11),k=I+(D^(C|~N))+A[12]+1700485571&4294967295,I=C+(k<<6&4294967295|k>>>26),k=N+(C^(I|~D))+A[3]+2399980690&4294967295,N=I+(k<<10&4294967295|k>>>22),k=D+(I^(N|~C))+A[10]+4293915773&4294967295,D=N+(k<<15&4294967295|k>>>17),k=C+(N^(D|~I))+A[1]+2240044497&4294967295,C=D+(k<<21&4294967295|k>>>11),k=I+(D^(C|~N))+A[8]+1873313359&4294967295,I=C+(k<<6&4294967295|k>>>26),k=N+(C^(I|~D))+A[15]+4264355552&4294967295,N=I+(k<<10&4294967295|k>>>22),k=D+(I^(N|~C))+A[6]+2734768916&4294967295,D=N+(k<<15&4294967295|k>>>17),k=C+(N^(D|~I))+A[13]+1309151649&4294967295,C=D+(k<<21&4294967295|k>>>11),k=I+(D^(C|~N))+A[4]+4149444226&4294967295,I=C+(k<<6&4294967295|k>>>26),k=N+(C^(I|~D))+A[11]+3174756917&4294967295,N=I+(k<<10&4294967295|k>>>22),k=D+(I^(N|~C))+A[2]+718787259&4294967295,D=N+(k<<15&4294967295|k>>>17),k=C+(N^(D|~I))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,I){I===void 0&&(I=S.length);for(var C=I-this.blockSize,A=this.B,D=this.h,N=0;N<I;){if(D==0)for(;N<=C;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<I;)if(A[D++]=S.charCodeAt(N++),D==this.blockSize){s(this,A),D=0;break}}else for(;N<I;)if(A[D++]=S[N++],D==this.blockSize){s(this,A),D=0;break}}this.h=D,this.o+=I},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;var C=8*this.o;for(I=S.length-8;I<S.length;++I)S[I]=C&255,C/=256;for(this.u(S),S=Array(16),I=C=0;4>I;++I)for(var A=0;32>A;A+=8)S[C++]=this.g[I]>>>A&255;return S};function i(S,I){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=I(S)}function o(S,I){this.h=I;for(var C=[],A=!0,D=S.length-1;0<=D;D--){var N=S[D]|0;A&&N==I||(C[D]=N,A=!1)}this.g=C}var a={};function l(S){return-128<=S&&128>S?i(S,function(I){return new o([I|0],0>I?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return b(c(-S));for(var I=[],C=1,A=0;S>=C;A++)I[A]=S/C|0,C*=4294967296;return new o(I,0)}function d(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return b(d(S.substring(1),I));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(I,8)),A=h,D=0;D<S.length;D+=8){var N=Math.min(8,S.length-D),k=parseInt(S.substring(D,D+N),I);8>N?(N=c(Math.pow(I,N)),A=A.j(N).add(c(k))):(A=A.j(C),A=A.add(c(k)))}return A}var h=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-b(this).m();for(var S=0,I=1,C=0;C<this.g.length;C++){var A=this.i(C);S+=(0<=A?A:4294967296+A)*I,I*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(_(this))return"-"+b(this).toString(S);for(var I=c(Math.pow(S,6)),C=this,A="";;){var D=O(C,I).g;C=w(C,D.j(I));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=D,T(C))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function _(S){return S.h==-1}t.l=function(S){return S=w(this,S),_(S)?-1:T(S)?0:1};function b(S){for(var I=S.g.length,C=[],A=0;A<I;A++)C[A]=~S.g[A];return new o(C,~S.h).add(p)}t.abs=function(){return _(this)?b(this):this},t.add=function(S){for(var I=Math.max(this.g.length,S.g.length),C=[],A=0,D=0;D<=I;D++){var N=A+(this.i(D)&65535)+(S.i(D)&65535),k=(N>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);A=k>>>16,N&=65535,k&=65535,C[D]=k<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(S,I){return S.add(b(I))}t.j=function(S){if(T(this)||T(S))return h;if(_(this))return _(S)?b(this).j(b(S)):b(b(this).j(S));if(_(S))return b(this.j(b(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var I=this.g.length+S.g.length,C=[],A=0;A<2*I;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<S.g.length;D++){var N=this.i(A)>>>16,k=this.i(A)&65535,pe=S.i(D)>>>16,Le=S.i(D)&65535;C[2*A+2*D]+=k*Le,v(C,2*A+2*D),C[2*A+2*D+1]+=N*Le,v(C,2*A+2*D+1),C[2*A+2*D+1]+=k*pe,v(C,2*A+2*D+1),C[2*A+2*D+2]+=N*pe,v(C,2*A+2*D+2)}for(A=0;A<I;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=I;A<2*I;A++)C[A]=0;return new o(C,0)};function v(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function E(S,I){this.g=S,this.h=I}function O(S,I){if(T(I))throw Error("division by zero");if(T(S))return new E(h,h);if(_(S))return I=O(b(S),I),new E(b(I.g),b(I.h));if(_(I))return I=O(S,b(I)),new E(b(I.g),I.h);if(30<S.g.length){if(_(S)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var C=p,A=I;0>=A.l(S);)C=L(C),A=L(A);var D=j(C,1),N=j(A,1);for(A=j(A,2),C=j(C,2);!T(A);){var k=N.add(A);0>=k.l(S)&&(D=D.add(C),N=k),A=j(A,1),C=j(C,1)}return I=w(S,D.j(I)),new E(D,I)}for(D=h;0<=S.l(I);){for(C=Math.max(1,Math.floor(S.m()/I.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=c(C),k=N.j(I);_(k)||0<k.l(S);)C-=A,N=c(C),k=N.j(I);T(N)&&(N=p),D=D.add(N),S=w(S,k)}return new E(D,S)}t.A=function(S){return O(this,S).h},t.and=function(S){for(var I=Math.max(this.g.length,S.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)&S.i(A);return new o(C,this.h&S.h)},t.or=function(S){for(var I=Math.max(this.g.length,S.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)|S.i(A);return new o(C,this.h|S.h)},t.xor=function(S){for(var I=Math.max(this.g.length,S.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)^S.i(A);return new o(C,this.h^S.h)};function L(S){for(var I=S.g.length+1,C=[],A=0;A<I;A++)C[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(C,S.h)}function j(S,I){var C=I>>5;I%=32;for(var A=S.g.length-C,D=[],N=0;N<A;N++)D[N]=0<I?S.i(N+C)>>>I|S.i(N+C+1)<<32-I:S.i(N+C);return new o(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ak=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Bo=o}).apply(typeof xT<"u"?xT:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rk,ec,kk,rf,Yy,Ck,Pk,Nk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,y){return u==Array.prototype||u==Object.prototype||(u[f]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var f=0;f<u.length;++f){var y=u[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(u,f){if(f)e:{var y=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var M=u[x];if(!(M in y))break e;y=y[M]}u=u[u.length-1],x=y[u],f=f(x),f!=x&&f!=null&&e(y,u,{configurable:!0,writable:!0,value:f})}}function i(u,f){u instanceof String&&(u+="");var y=0,x=!1,M={next:function(){if(!x&&y<u.length){var z=y++;return{value:f(z,u[z]),done:!1}}return x=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return i(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,y){return u.call.apply(u.bind,arguments)}function h(u,f,y){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,x),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function p(u,f,y){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(u,f){var y=Array.prototype.slice.call(arguments,1);return function(){var x=y.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function T(u,f){function y(){}y.prototype=f.prototype,u.aa=f.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(x,M,z){for(var ee=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)ee[Ye-2]=arguments[Ye];return f.prototype[M].apply(x,ee)}}function _(u){const f=u.length;if(0<f){const y=Array(f);for(let x=0;x<f;x++)y[x]=u[x];return y}return[]}function b(u,f){for(let y=1;y<arguments.length;y++){const x=arguments[y];if(l(x)){const M=u.length||0,z=x.length||0;u.length=M+z;for(let ee=0;ee<z;ee++)u[M+ee]=x[ee]}else u.push(x)}}class w{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function O(u){return O[" "](u),u}O[" "]=function(){};var L=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function j(u,f,y){for(const x in u)f.call(y,u[x],x,u)}function S(u,f){for(const y in u)f.call(void 0,u[y],y,u)}function I(u){const f={};for(const y in u)f[y]=u[y];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let y,x;for(let M=1;M<arguments.length;M++){x=arguments[M];for(y in x)u[y]=x[y];for(let z=0;z<C.length;z++)y=C[z],Object.prototype.hasOwnProperty.call(x,y)&&(u[y]=x[y])}}function D(u){var f=1;u=u.split(":");const y=[];for(;0<f&&u.length;)y.push(u.shift()),f--;return u.length&&y.push(u.join(":")),y}function N(u){a.setTimeout(()=>{throw u},0)}function k(){var u=K;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class pe{constructor(){this.h=this.g=null}add(f,y){const x=Le.get();x.set(f,y),this.h?this.h.next=x:this.g=x,this.h=x}}var Le=new w(()=>new Me,u=>u.reset());class Me{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,J=!1,K=new pe,ae=()=>{const u=a.Promise.resolve(void 0);Ne=()=>{u.then($e)}};var $e=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(y){N(y)}var f=Le;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}J=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,f),a.removeEventListener("test",y,f)}catch{}return u}();function Je(u,f){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(L){e:{try{O(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else y=="mouseover"?f=u.fromElement:y=="mouseout"&&(f=u.toElement);this.relatedTarget=f,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Bt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Je.aa.h.call(this)}}T(Je,ge);var Bt={2:"touch",3:"pen",4:"mouse"};Je.prototype.h=function(){Je.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),is=0;function Vr(u,f,y,x,M){this.listener=u,this.proxy=null,this.src=f,this.type=y,this.capture=!!x,this.ha=M,this.key=++is,this.da=this.fa=!1}function Gn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Cn(u){this.src=u,this.g={},this.h=0}Cn.prototype.add=function(u,f,y,x,M){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var ee=as(u,f,x,M);return-1<ee?(f=u[ee],y||(f.fa=!1)):(f=new Vr(f,this.src,z,!!x,M),f.fa=y,u.push(f)),f};function os(u,f){var y=f.type;if(y in u.g){var x=u.g[y],M=Array.prototype.indexOf.call(x,f,void 0),z;(z=0<=M)&&Array.prototype.splice.call(x,M,1),z&&(Gn(f),u.g[y].length==0&&(delete u.g[y],u.h--))}}function as(u,f,y,x){for(var M=0;M<u.length;++M){var z=u[M];if(!z.da&&z.listener==f&&z.capture==!!y&&z.ha==x)return M}return-1}var mo="closure_lm_"+(1e6*Math.random()|0),Gs={};function Hs(u,f,y,x,M){if(Array.isArray(f)){for(var z=0;z<f.length;z++)Hs(u,f[z],y,x,M);return null}return y=X(y),u&&u[De]?u.K(f,y,c(x)?!!x.capture:!1,M):vu(u,f,y,!1,x,M)}function vu(u,f,y,x,M,z){if(!f)throw Error("Invalid event type");var ee=c(M)?!!M.capture:!!M,Ye=B(u);if(Ye||(u[mo]=Ye=new Cn(u)),y=Ye.add(f,y,x,ee,z),y.proxy)return y;if(x=po(),y.proxy=x,x.src=u,x.listener=y,u.addEventListener)Se||(M=ee),M===void 0&&(M=!1),u.addEventListener(f.toString(),x,M);else if(u.attachEvent)u.attachEvent(P(f.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return y}function po(){function u(y){return f.call(u.src,u.listener,y)}const f=F;return u}function _u(u,f,y,x,M){if(Array.isArray(f))for(var z=0;z<f.length;z++)_u(u,f[z],y,x,M);else x=c(x)?!!x.capture:!!x,y=X(y),u&&u[De]?(u=u.i,f=String(f).toString(),f in u.g&&(z=u.g[f],y=as(z,y,x,M),-1<y&&(Gn(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete u.g[f],u.h--)))):u&&(u=B(u))&&(f=u.g[f.toString()],u=-1,f&&(u=as(f,y,x,M)),(y=-1<u?f[u]:null)&&ls(y))}function ls(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[De])os(f.i,u);else{var y=u.type,x=u.proxy;f.removeEventListener?f.removeEventListener(y,x,u.capture):f.detachEvent?f.detachEvent(P(y),x):f.addListener&&f.removeListener&&f.removeListener(x),(y=B(f))?(os(y,u),y.h==0&&(y.src=null,f[mo]=null)):Gn(u)}}}function P(u){return u in Gs?Gs[u]:Gs[u]="on"+u}function F(u,f){if(u.da)u=!0;else{f=new Je(f,this);var y=u.listener,x=u.ha||u.src;u.fa&&ls(u),u=y.call(x,f)}return u}function B(u){return u=u[mo],u instanceof Cn?u:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(u){return typeof u=="function"?u:(u[re]||(u[re]=function(f){return u.handleEvent(f)}),u[re])}function $(){me.call(this),this.i=new Cn(this),this.M=this,this.F=null}T($,me),$.prototype[De]=!0,$.prototype.removeEventListener=function(u,f,y,x){_u(this,u,f,y,x)};function ne(u,f){var y,x=u.F;if(x)for(y=[];x;x=x.F)y.push(x);if(u=u.M,x=f.type||f,typeof f=="string")f=new ge(f,u);else if(f instanceof ge)f.target=f.target||u;else{var M=f;f=new ge(x,u),A(f,M)}if(M=!0,y)for(var z=y.length-1;0<=z;z--){var ee=f.g=y[z];M=Ae(ee,x,!0,f)&&M}if(ee=f.g=u,M=Ae(ee,x,!0,f)&&M,M=Ae(ee,x,!1,f)&&M,y)for(z=0;z<y.length;z++)ee=f.g=y[z],M=Ae(ee,x,!1,f)&&M}$.prototype.N=function(){if($.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var y=u.g[f],x=0;x<y.length;x++)Gn(y[x]);delete u.g[f],u.h--}}this.F=null},$.prototype.K=function(u,f,y,x){return this.i.add(String(u),f,!1,y,x)},$.prototype.L=function(u,f,y,x){return this.i.add(String(u),f,!0,y,x)};function Ae(u,f,y,x){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,z=0;z<f.length;++z){var ee=f[z];if(ee&&!ee.da&&ee.capture==y){var Ye=ee.listener,rn=ee.ha||ee.src;ee.fa&&os(u.i,ee),M=Ye.call(rn,x)!==!1&&M}}return M&&!x.defaultPrevented}function Oe(u,f,y){if(typeof u=="function")y&&(u=p(u,y));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function gt(u){u.g=Oe(()=>{u.g=null,u.i&&(u.i=!1,gt(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class _r extends me{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:gt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(u){me.call(this),this.h=u,this.g={}}T(en,me);var Ks=[];function Hn(u){j(u.g,function(f,y){this.g.hasOwnProperty(y)&&ls(f)},u),u.g={}}en.prototype.N=function(){en.aa.N.call(this),Hn(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lr=a.JSON.stringify,Mr=a.JSON.parse,Ta=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function go(){}go.prototype.h=null;function Qs(u){return u.h||(u.h=u.i())}function wu(){}var yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vo(){ge.call(this,"d")}T(vo,ge);function ar(){ge.call(this,"c")}T(ar,ge);var us={},ve=null;function Fe(){return ve=ve||new $}us.La="serverreachability";function Qe(u){ge.call(this,us.La,u)}T(Qe,ge);function tn(u){const f=Fe();ne(f,new Qe(f))}us.STAT_EVENT="statevent";function Pn(u,f){ge.call(this,us.STAT_EVENT,u),this.stat=f}T(Pn,ge);function ut(u){const f=Fe();ne(f,new Pn(f,u))}us.Ma="timingevent";function Fr(u,f){ge.call(this,us.Ma,u),this.size=f}T(Fr,ge);function nn(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function v1(u,f,y,x,M,z){u.info(function(){if(u.g)if(z)for(var ee="",Ye=z.split("&"),rn=0;rn<Ye.length;rn++){var Be=Ye[rn].split("=");if(1<Be.length){var dn=Be[0];Be=Be[1];var hn=dn.split("_");ee=2<=hn.length&&hn[1]=="type"?ee+(dn+"="+Be+"&"):ee+(dn+"=redacted&")}}else ee=null;else ee=z;return"XMLHTTP REQ ("+x+") [attempt "+M+"]: "+f+`
`+y+`
`+ee})}function _1(u,f,y,x,M,z,ee){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+M+"]: "+f+`
`+y+`
`+z+" "+ee})}function xa(u,f,y,x){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+E1(u,y)+(x?" "+x:"")})}function w1(u,f){u.info(function(){return"TIMEOUT: "+f})}Nn.prototype.info=function(){};function E1(u,f){if(!u.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var x=y[u];if(!(2>x.length)){var M=x[1];if(Array.isArray(M)&&!(1>M.length)){var z=M[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ee=1;ee<M.length;ee++)M[ee]=""}}}}return Lr(y)}catch{return f}}var $d={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},y0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xp;function qd(){}T(qd,go),qd.prototype.g=function(){return new XMLHttpRequest},qd.prototype.i=function(){return{}},xp=new qd;function Ys(u,f,y,x){this.j=u,this.i=f,this.l=y,this.R=x||1,this.U=new en(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new v0}function v0(){this.i=null,this.g="",this.h=!1}var _0={},bp={};function Sp(u,f,y){u.L=1,u.v=Kd(cs(f)),u.m=y,u.P=!0,w0(u,null)}function w0(u,f){u.F=Date.now(),Wd(u),u.A=cs(u.v);var y=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),O0(y.i,"t",x),u.C=0,y=u.j.J,u.h=new v0,u.g=J0(u.j,y?f:null,!u.m),0<u.O&&(u.M=new _r(p(u.Y,u,u.g),u.O)),f=u.U,y=u.g,x=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Ks[0]=M.toString()),M=Ks);for(var z=0;z<M.length;z++){var ee=Hs(y,M[z],x||f.handleEvent,!1,f.h||f);if(!ee)break;f.g[ee.key]=ee}f=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),tn(),v1(u.i,u.u,u.A,u.l,u.R,u.m)}Ys.prototype.ca=function(u){u=u.target;const f=this.M;f&&ds(u)==3?f.j():this.Y(u)},Ys.prototype.Y=function(u){try{if(u==this.g)e:{const hn=ds(this.g);var f=this.g.Ba();const Aa=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||B0(this.g)))){this.J||hn!=4||f==7||(f==8||0>=Aa?tn(3):tn(2)),Ap(this);var y=this.g.Z();this.X=y;t:if(E0(this)){var x=B0(this.g);u="";var M=x.length,z=ds(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_o(this),Eu(this);var ee="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(x[f],{stream:!(z&&f==M-1)});x.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=y==200,_1(this.i,this.u,this.A,this.l,this.R,hn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,rn=this.g;if((Ye=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ye)){var Be=Ye;break t}}Be=null}if(y=Be)xa(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rp(this,y);else{this.o=!1,this.s=3,ut(12),_o(this),Eu(this);break e}}if(this.P){y=!0;let wr;for(;!this.J&&this.C<ee.length;)if(wr=I1(this,ee),wr==bp){hn==4&&(this.s=4,ut(14),y=!1),xa(this.i,this.l,null,"[Incomplete Response]");break}else if(wr==_0){this.s=4,ut(15),xa(this.i,this.l,ee,"[Invalid Chunk]"),y=!1;break}else xa(this.i,this.l,wr,null),Rp(this,wr);if(E0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||ee.length!=0||this.h.h||(this.s=1,ut(16),y=!1),this.o=this.o&&y,!y)xa(this.i,this.l,ee,"[Invalid Chunked Response]"),_o(this),Eu(this);else if(0<ee.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Op(dn),dn.M=!0,ut(11))}}else xa(this.i,this.l,ee,null),Rp(this,ee);hn==4&&_o(this),this.o&&!this.J&&(hn==4?K0(this.j,this):(this.o=!1,Wd(this)))}else j1(this.g),y==400&&0<ee.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),_o(this),Eu(this)}}}catch{}finally{}};function E0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function I1(u,f){var y=u.C,x=f.indexOf(`
`,y);return x==-1?bp:(y=Number(f.substring(y,x)),isNaN(y)?_0:(x+=1,x+y>f.length?bp:(f=f.slice(x,x+y),u.C=x+y,f)))}Ys.prototype.cancel=function(){this.J=!0,_o(this)};function Wd(u){u.S=Date.now()+u.I,I0(u,u.I)}function I0(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=nn(p(u.ba,u),f)}function Ap(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ys.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(w1(this.i,this.A),this.L!=2&&(tn(),ut(17)),_o(this),this.s=2,Eu(this)):I0(this,this.S-u)};function Eu(u){u.j.G==0||u.J||K0(u.j,u)}function _o(u){Ap(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Hn(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Rp(u,f){try{var y=u.j;if(y.G!=0&&(y.g==u||kp(y.h,u))){if(!u.K&&kp(y.h,u)&&y.G==3){try{var x=y.Da.g.parse(f)}catch{x=null}if(Array.isArray(x)&&x.length==3){var M=x;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)eh(y),Jd(y);else break e;Dp(y),ut(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=nn(p(y.Za,y),6e3));if(1>=b0(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Eo(y,11)}else if((u.K||y.g==u)&&eh(y),!v(f))for(M=y.Da.g.parse(f),f=0;f<M.length;f++){let Be=M[f];if(y.T=Be[0],Be=Be[1],y.G==2)if(Be[0]=="c"){y.K=Be[1],y.ia=Be[2];const dn=Be[3];dn!=null&&(y.la=dn,y.j.info("VER="+y.la));const hn=Be[4];hn!=null&&(y.Aa=hn,y.j.info("SVER="+y.Aa));const Aa=Be[5];Aa!=null&&typeof Aa=="number"&&0<Aa&&(x=1.5*Aa,y.L=x,y.j.info("backChannelRequestTimeoutMs_="+x)),x=y;const wr=u.g;if(wr){const nh=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nh){var z=x.h;z.g||nh.indexOf("spdy")==-1&&nh.indexOf("quic")==-1&&nh.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Cp(z,z.h),z.h=null))}if(x.D){const Vp=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vp&&(x.ya=Vp,tt(x.I,x.D,Vp))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),x=y;var ee=u;if(x.qa=X0(x,x.J?x.ia:null,x.W),ee.K){S0(x.h,ee);var Ye=ee,rn=x.L;rn&&(Ye.I=rn),Ye.B&&(Ap(Ye),Wd(Ye)),x.g=ee}else G0(x);0<y.i.length&&Zd(y)}else Be[0]!="stop"&&Be[0]!="close"||Eo(y,7);else y.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Eo(y,7):Np(y):Be[0]!="noop"&&y.l&&y.l.ta(Be),y.v=0)}}tn(4)}catch{}}var T1=class{constructor(u,f){this.g=u,this.map=f}};function T0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function x0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function b0(u){return u.h?1:u.g?u.g.size:0}function kp(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Cp(u,f){u.g?u.g.add(f):u.h=f}function S0(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}T0.prototype.cancel=function(){if(this.i=A0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function A0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const y of u.g.values())f=f.concat(y.D);return f}return _(u.i)}function x1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],y=u.length,x=0;x<y;x++)f.push(u[x]);return f}f=[],y=0;for(x in u)f[y++]=u[x];return f}function b1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var y=0;y<u;y++)f.push(y);return f}f=[],y=0;for(const x in u)f[y++]=x;return f}}}function R0(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var y=b1(u),x=x1(u),M=x.length,z=0;z<M;z++)f.call(void 0,x[z],y&&y[z],u)}var k0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function S1(u,f){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var x=u[y].indexOf("="),M=null;if(0<=x){var z=u[y].substring(0,x);M=u[y].substring(x+1)}else z=u[y];f(z,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function wo(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof wo){this.h=u.h,Gd(this,u.j),this.o=u.o,this.g=u.g,Hd(this,u.s),this.l=u.l;var f=u.i,y=new xu;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),C0(this,y),this.m=u.m}else u&&(f=String(u).match(k0))?(this.h=!1,Gd(this,f[1]||"",!0),this.o=Iu(f[2]||""),this.g=Iu(f[3]||"",!0),Hd(this,f[4]),this.l=Iu(f[5]||"",!0),C0(this,f[6]||"",!0),this.m=Iu(f[7]||"")):(this.h=!1,this.i=new xu(null,this.h))}wo.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Tu(f,P0,!0),":");var y=this.g;return(y||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Tu(f,P0,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Tu(y,y.charAt(0)=="/"?k1:R1,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Tu(y,P1)),u.join("")};function cs(u){return new wo(u)}function Gd(u,f,y){u.j=y?Iu(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Hd(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function C0(u,f,y){f instanceof xu?(u.i=f,N1(u.i,u.h)):(y||(f=Tu(f,C1)),u.i=new xu(f,u.h))}function tt(u,f,y){u.i.set(f,y)}function Kd(u){return tt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Iu(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Tu(u,f,y){return typeof u=="string"?(u=encodeURI(u).replace(f,A1),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function A1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var P0=/[#\/\?@]/g,R1=/[#\?:]/g,k1=/[#\?]/g,C1=/[#\?@]/g,P1=/#/g;function xu(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Xs(u){u.g||(u.g=new Map,u.h=0,u.i&&S1(u.i,function(f,y){u.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}t=xu.prototype,t.add=function(u,f){Xs(this),this.i=null,u=ba(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(f),this.h+=1,this};function N0(u,f){Xs(u),f=ba(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function D0(u,f){return Xs(u),f=ba(u,f),u.g.has(f)}t.forEach=function(u,f){Xs(this),this.g.forEach(function(y,x){y.forEach(function(M){u.call(f,M,x,this)},this)},this)},t.na=function(){Xs(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let x=0;x<f.length;x++){const M=u[x];for(let z=0;z<M.length;z++)y.push(f[x])}return y},t.V=function(u){Xs(this);let f=[];if(typeof u=="string")D0(this,u)&&(f=f.concat(this.g.get(ba(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)f=f.concat(u[y])}return f},t.set=function(u,f){return Xs(this),this.i=null,u=ba(this,u),D0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function O0(u,f,y){N0(u,f),0<y.length&&(u.i=null,u.g.set(ba(u,f),_(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var x=f[y];const z=encodeURIComponent(String(x)),ee=this.V(x);for(x=0;x<ee.length;x++){var M=z;ee[x]!==""&&(M+="="+encodeURIComponent(String(ee[x]))),u.push(M)}}return this.i=u.join("&")};function ba(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function N1(u,f){f&&!u.j&&(Xs(u),u.i=null,u.g.forEach(function(y,x){var M=x.toLowerCase();x!=M&&(N0(this,x),O0(this,M,y))},u)),u.j=f}function D1(u,f){const y=new Nn;if(a.Image){const x=new Image;x.onload=g(Js,y,"TestLoadImage: loaded",!0,f,x),x.onerror=g(Js,y,"TestLoadImage: error",!1,f,x),x.onabort=g(Js,y,"TestLoadImage: abort",!1,f,x),x.ontimeout=g(Js,y,"TestLoadImage: timeout",!1,f,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else f(!1)}function O1(u,f){const y=new Nn,x=new AbortController,M=setTimeout(()=>{x.abort(),Js(y,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:x.signal}).then(z=>{clearTimeout(M),z.ok?Js(y,"TestPingServer: ok",!0,f):Js(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Js(y,"TestPingServer: error",!1,f)})}function Js(u,f,y,x,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),x(y)}catch{}}function V1(){this.g=new Ta}function L1(u,f,y){const x=y||"";try{R0(u,function(M,z){let ee=M;c(M)&&(ee=Lr(M)),f.push(x+z+"="+encodeURIComponent(ee))})}catch(M){throw f.push(x+"type="+encodeURIComponent("_badmap")),M}}function Qd(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Qd,go),Qd.prototype.g=function(){return new Yd(this.l,this.j)},Qd.prototype.i=function(u){return function(){return u}}({});function Yd(u,f){$.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Yd,$),t=Yd.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Su(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bu(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Su(this)),this.g&&(this.readyState=3,Su(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;V0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function V0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?bu(this):Su(this),this.readyState==3&&V0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,bu(this))},t.Qa=function(u){this.g&&(this.response=u,bu(this))},t.ga=function(){this.g&&bu(this)};function bu(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Su(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=f.next();return u.join(`\r
`)};function Su(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Yd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function L0(u){let f="";return j(u,function(y,x){f+=x,f+=":",f+=y,f+=`\r
`}),f}function Pp(u,f,y){e:{for(x in y){var x=!1;break e}x=!0}x||(y=L0(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):tt(u,f,y))}function Tt(u){$.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Tt,$);var M1=/^https?$/i,F1=["POST","PUT"];t=Tt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,y,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xp.g(),this.v=this.o?Qs(this.o):Qs(xp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(z){M0(this,z);return}if(u=y||"",y=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var M in x)y.set(M,x[M]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const z of x.keys())y.set(z,x.get(z));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(F1,f,void 0))||x||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of y)this.g.setRequestHeader(z,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{U0(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){M0(this,z)}};function M0(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,F0(u),Xd(u)}function F0(u){u.A||(u.A=!0,ne(u,"complete"),ne(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ne(this,"complete"),ne(this,"abort"),Xd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xd(this,!0)),Tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?j0(this):this.bb())},t.bb=function(){j0(this)};function j0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ds(u)!=4||u.Z()!=2)){if(u.u&&ds(u)==4)Oe(u.Ea,0,u);else if(ne(u,"readystatechange"),ds(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var x;if(x=ee===0){var M=String(u.D).match(k0)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),x=!M1.test(M?M.toLowerCase():"")}y=x}if(y)ne(u,"complete"),ne(u,"success");else{u.m=6;try{var z=2<ds(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",F0(u)}}finally{Xd(u)}}}}function Xd(u,f){if(u.g){U0(u);const y=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||ne(u,"ready");try{y.onreadystatechange=x}catch{}}}function U0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ds(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ds(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Mr(f)}};function B0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function j1(u){const f={};u=(u.g&&2<=ds(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(v(u[x]))continue;var y=D(u[x]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=f[M]||[];f[M]=z,z.push(y)}S(f,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Au(u,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||f}function z0(u){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Au("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Au("baseRetryDelayMs",5e3,u),this.cb=Au("retryDelaySeedMs",1e4,u),this.Wa=Au("forwardChannelMaxRetries",2,u),this.wa=Au("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new T0(u&&u.concurrentRequestLimit),this.Da=new V1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=z0.prototype,t.la=8,t.G=1,t.connect=function(u,f,y,x){ut(0),this.W=u,this.H=f||{},y&&x!==void 0&&(this.H.OSID=y,this.H.OAID=x),this.F=this.X,this.I=X0(this,null,this.W),Zd(this)};function Np(u){if($0(u),u.G==3){var f=u.U++,y=cs(u.I);if(tt(y,"SID",u.K),tt(y,"RID",f),tt(y,"TYPE","terminate"),Ru(u,y),f=new Ys(u,u.j,f),f.L=2,f.v=Kd(cs(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=f.v,y=!0),y||(f.g=J0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Wd(f)}Y0(u)}function Jd(u){u.g&&(Op(u),u.g.cancel(),u.g=null)}function $0(u){Jd(u),u.u&&(a.clearTimeout(u.u),u.u=null),eh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Zd(u){if(!x0(u.h)&&!u.s){u.s=!0;var f=u.Ga;Ne||ae(),J||(Ne(),J=!0),K.add(f,u),u.B=0}}function U1(u,f){return b0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=nn(p(u.Ga,u,f),Q0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Ys(this,this.j,u);let z=this.o;if(this.S&&(z?(z=I(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(M.H=z,z=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var x=this.i[y];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(f+=x,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=W0(this,M,f),y=cs(this.I),tt(y,"RID",u),tt(y,"CVER",22),this.D&&tt(y,"X-HTTP-Session-Id",this.D),Ru(this,y),z&&(this.O?f="headers="+encodeURIComponent(String(L0(z)))+"&"+f:this.m&&Pp(y,this.m,z)),Cp(this.h,M),this.Ua&&tt(y,"TYPE","init"),this.P?(tt(y,"$req",f),tt(y,"SID","null"),M.T=!0,Sp(M,y,null)):Sp(M,y,f),this.G=2}}else this.G==3&&(u?q0(this,u):this.i.length==0||x0(this.h)||q0(this))};function q0(u,f){var y;f?y=f.l:y=u.U++;const x=cs(u.I);tt(x,"SID",u.K),tt(x,"RID",y),tt(x,"AID",u.T),Ru(u,x),u.m&&u.o&&Pp(x,u.m,u.o),y=new Ys(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),f&&(u.i=f.D.concat(u.i)),f=W0(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Cp(u.h,y),Sp(y,x,f)}function Ru(u,f){u.H&&j(u.H,function(y,x){tt(f,x,y)}),u.l&&R0({},function(y,x){tt(f,x,y)})}function W0(u,f,y){y=Math.min(u.i.length,y);var x=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let z=-1;for(;;){const ee=["count="+y];z==-1?0<y?(z=M[0].g,ee.push("ofs="+z)):z=0:ee.push("ofs="+z);let Ye=!0;for(let rn=0;rn<y;rn++){let Be=M[rn].g;const dn=M[rn].map;if(Be-=z,0>Be)z=Math.max(0,M[rn].g-100),Ye=!1;else try{L1(dn,ee,"req"+Be+"_")}catch{x&&x(dn)}}if(Ye){x=ee.join("&");break e}}}return u=u.i.splice(0,y),f.D=u,x}function G0(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Ne||ae(),J||(Ne(),J=!0),K.add(f,u),u.v=0}}function Dp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=nn(p(u.Fa,u),Q0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,H0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=nn(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Jd(this),H0(this))};function Op(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function H0(u){u.g=new Ys(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=cs(u.qa);tt(f,"RID","rpc"),tt(f,"SID",u.K),tt(f,"AID",u.T),tt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&tt(f,"TO",u.ja),tt(f,"TYPE","xmlhttp"),Ru(u,f),u.m&&u.o&&Pp(f,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Kd(cs(f)),y.m=null,y.P=!0,w0(y,u)}t.Za=function(){this.C!=null&&(this.C=null,Jd(this),Dp(this),ut(19))};function eh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function K0(u,f){var y=null;if(u.g==f){eh(u),Op(u),u.g=null;var x=2}else if(kp(u.h,f))y=f.D,S0(u.h,f),x=1;else return;if(u.G!=0){if(f.o)if(x==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;x=Fe(),ne(x,new Fr(x,y)),Zd(u)}else G0(u);else if(M=f.s,M==3||M==0&&0<f.X||!(x==1&&U1(u,f)||x==2&&Dp(u)))switch(y&&0<y.length&&(f=u.h,f.i=f.i.concat(y)),M){case 1:Eo(u,5);break;case 4:Eo(u,10);break;case 3:Eo(u,6);break;default:Eo(u,2)}}}function Q0(u,f){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*f}function Eo(u,f){if(u.j.info("Error code "+f),f==2){var y=p(u.fb,u),x=u.Xa;const M=!x;x=new wo(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gd(x,"https"),Kd(x),M?D1(x.toString(),y):O1(x.toString(),y)}else ut(2);u.G=0,u.l&&u.l.sa(f),Y0(u),$0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Y0(u){if(u.G=0,u.ka=[],u.l){const f=A0(u.h);(f.length!=0||u.i.length!=0)&&(b(u.ka,f),b(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function X0(u,f,y){var x=y instanceof wo?cs(y):new wo(y);if(x.g!="")f&&(x.g=f+"."+x.g),Hd(x,x.s);else{var M=a.location;x=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var z=new wo(null);x&&Gd(z,x),f&&(z.g=f),M&&Hd(z,M),y&&(z.l=y),x=z}return y=u.D,f=u.ya,y&&f&&tt(x,y,f),tt(x,"VER",u.la),Ru(u,x),x}function J0(u,f,y){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Tt(new Qd({eb:y})):new Tt(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Z0(){}t=Z0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function th(){}th.prototype.g=function(u,f){return new Kn(u,f)};function Kn(u,f){$.call(this),this.g=new z0(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!v(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Sa(this)}T(Kn,$),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){Np(this.g)},Kn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Lr(u),u=y);f.i.push(new T1(f.Ya++,u)),f.G==3&&Zd(f)},Kn.prototype.N=function(){this.g.l=null,delete this.j,Np(this.g),delete this.g,Kn.aa.N.call(this)};function eE(u){vo.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const y in f){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}T(eE,vo);function tE(){ar.call(this),this.status=1}T(tE,ar);function Sa(u){this.g=u}T(Sa,Z0),Sa.prototype.ua=function(){ne(this.g,"a")},Sa.prototype.ta=function(u){ne(this.g,new eE(u))},Sa.prototype.sa=function(u){ne(this.g,new tE)},Sa.prototype.ra=function(){ne(this.g,"b")},th.prototype.createWebChannel=th.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,Nk=function(){return new th},Pk=function(){return Fe()},Ck=us,Yy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$d.NO_ERROR=0,$d.TIMEOUT=8,$d.HTTP_ERROR=6,rf=$d,y0.COMPLETE="complete",kk=y0,wu.EventType=yo,yo.OPEN="a",yo.CLOSE="b",yo.ERROR="c",yo.MESSAGE="d",$.prototype.listen=$.prototype.K,ec=wu,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,Rk=Tt}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});const bT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new O_("@firebase/firestore");function za(){return qi.logLevel}function k4(t){qi.setLogLevel(t)}function W(t,...e){if(qi.logLevel<=Re.DEBUG){const n=e.map(tw);qi.debug(`Firestore (${su}): ${t}`,...n)}}function Ct(t,...e){if(qi.logLevel<=Re.ERROR){const n=e.map(tw);qi.error(`Firestore (${su}): ${t}`,...n)}}function rr(t,...e){if(qi.logLevel<=Re.WARN){const n=e.map(tw);qi.warn(`Firestore (${su}): ${t}`,...n)}}function tw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: `+t;throw Ct(e),new Error(e)}function ue(t,e){t||ie()}function C4(t,e){t||ie()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ok{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class P4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class N4{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jt,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new Dk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new Qt(e)}}class D4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class O4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new D4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ue(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.R=n.token,new Vk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class L4{getToken(){return Promise.resolve(new Vk(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=M4(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function kl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function Lk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new ft(0,0))}static max(){return new fe(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends Jc{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const F4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Jc{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return F4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ce.fromString(e))}static fromName(e){return new te(Ce.fromString(e).popFirst(5))}static empty(){return new te(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Xy(t){return t.fields.find(e=>e.kind===2)}function So(t){return t.fields.filter(e=>e.kind!==2)}function j4(t,e){let n=ye(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=U4(t.fields[r],e.fields[r]),n!==0)return n;return ye(t.fields.length,e.fields.length)}Cl.UNKNOWN_ID=-1;class zo{constructor(e,n){this.fieldPath=e,this.kind=n}}function U4(t,e){const n=st.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ye(t.kind,e.kind)}class Pl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Pl(0,sr.min())}}function Mk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new sr(s,te.empty(),e)}function Fk(t){return new sr(t.readTime,t.key,-1)}class sr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sr(fe.min(),te.empty(),-1)}static max(){return new sr(fe.max(),te.empty(),-1)}}function rw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==jk)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Jt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new yc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=sw(r.target.error);this.V.reject(new yc(e,s))}}static open(e,n,r,s){try{return new Hm(n,e.transaction(s,r))}catch(i){throw new yc(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new z4(n)}}class Zr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Zr.S(Wt())===12.2&&Ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),Ro(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fR())return!1;if(Zr.v())return!0;const e=Wt(),n=Zr.S(e),r=0<n&&n<10,s=Bk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new yc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new yc(e,o))},s.onupgradeneeded=i=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Hm.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Bk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class B4{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ro(this.B.delete())}}class yc extends q{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ao(t){return t.name==="IndexedDbTransactionError"}class z4{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ro(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),Ro(this.store.add(e))}get(e){return Ro(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),Ro(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),Ro(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){W("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=sw(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new B4(a),c=n(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ro(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=sw(r.target.error);n(s)}})}let ST=!1;function sw(t){const e=Zr.S(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ST||(ST=!0,setTimeout(()=>{throw r},0)),r}}return t}class $4{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{W("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ao(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await oo(n)}await this.X(6e4)})}}class q4{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Fk(i);rw(o,r)>0&&(r=o)}),new sr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jn.oe=-1;function Sd(t){return t==null}function Zc(t){return t===0&&1/t==-1/0}function zk(t){return typeof t=="number"&&Number.isInteger(t)&&!Zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AT(e)),e=W4(t.get(n),e);return AT(e)}function W4(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function AT(t){return t+""}function Gr(t){const e=t.length;if(ue(e>=2),e===2)return ue(t.charAt(0)===""&&t.charAt(1)===""),Ce.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&ie(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ie()}i=o+2}return new Ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t,e){return[t,_n(e)]}function $k(t,e,n){return[t,_n(e),n]}const G4={},H4=["prefixPath","collectionGroup","readTime","documentId"],K4=["prefixPath","collectionGroup","documentId"],Q4=["collectionGroup","readTime","prefixPath","documentId"],Y4=["canonicalId","targetId"],X4=["targetId","path"],J4=["path","targetId"],Z4=["collectionId","parent"],eB=["indexId","uid"],tB=["uid","sequenceNumber"],nB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rB=["indexId","uid","orderedDocumentKey"],sB=["userId","collectionPath","documentId"],iB=["userId","collectionPath","largestBatchId"],oB=["userId","collectionGroup","largestBatchId"],qk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aB=[...qk,"documentOverlays"],Wk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gk=Wk,iw=[...Gk,"indexConfiguration","indexState","indexEntries"],lB=iw,uB=[...iw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy extends Uk{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Gt(t,e){const n=Z(t);return Zr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hk(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function Kk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Th(this.root,e,this.comparator,!1)}getReverseIterator(){return new Th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Th(this.root,e,this.comparator,!0)}}class Th{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??on.RED,this.left=s??on.EMPTY,this.right=i??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new on(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return on.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new CT(this.data.getIterator())}getIteratorFrom(e){return new CT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class CT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ca(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Un([])}unionWith(e){let n=new He(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Qk("Invalid base64 string: "+i):i}}(e);return new Et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const dB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(t){if(ue(!!t),typeof t=="string"){let e=0;const n=dB.exec(t);if(ue(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ms(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qm(t){const e=t.mapValue.fields.__previous_value__;return Km(e)?Qm(e):e}function ed(t){const e=Ls(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Wi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},of={nullValue:"NULL_VALUE"};function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Km(t)?4:Yk(t)?9007199254740991:Ym(t)?10:11:ie()}function ns(t,e){if(t===e)return!0;const n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ed(t).isEqual(ed(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ls(s.timestampValue),a=Ls(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ms(s.bytesValue).isEqual(Ms(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ct(s.geoPointValue.latitude)===ct(i.geoPointValue.latitude)&&ct(s.geoPointValue.longitude)===ct(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ct(s.integerValue)===ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ct(s.doubleValue),a=ct(i.doubleValue);return o===a?Zc(o)===Zc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return kl(t.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(kT(o)!==kT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ns(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function td(t,e){return(t.values||[]).find(n=>ns(n,e))!==void 0}function Hi(t,e){if(t===e)return 0;const n=Gi(t),r=Gi(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ct(i.integerValue||i.doubleValue),l=ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return PT(t.timestampValue,e.timestampValue);case 4:return PT(ed(t),ed(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ms(i),l=Ms(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ye(a[c],l[c]);if(d!==0)return d}return ye(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ye(ct(i.latitude),ct(o.latitude));return a!==0?a:ye(ct(i.longitude),ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return NT(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const h=i.fields||{},p=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,T=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=ye(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:NT(g,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===wi.mapValue&&o===wi.mapValue)return 0;if(i===wi.mapValue)return 1;if(o===wi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=ye(l[h],d[h]);if(p!==0)return p;const g=Hi(a[l[h]],c[d[h]]);if(g!==0)return g}return ye(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function PT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Ls(t),r=Ls(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function NT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hi(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function Nl(t){return Zy(t)}function Zy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ls(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ms(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Zy(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function af(t){switch(Gi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qm(t);return e?16+af(e):16;case 5:return 2*t.stringValue.length;case 6:return Ms(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+af(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return lo(r.fields,(i,o)=>{s+=i.length+af(o)}),s}(t.mapValue);default:throw ie()}}function Xo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ev(t){return!!t&&"integerValue"in t}function nd(t){return!!t&&"arrayValue"in t}function DT(t){return!!t&&"nullValue"in t}function OT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}function Ym(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Yk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Xk={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fB(t){return"nullValue"in t?of:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xo(Wi.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ym(t)?Xk:{mapValue:{}}:ie()}function mB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xo(Wi.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Xk:"mapValue"in t?Ym(t)?{mapValue:{}}:wi:ie()}function VT(t,e){const n=Hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function LT(t,e){const n=Hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=vc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());lf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];lf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new an(vc(this.value))}}function Jk(t){const e=[];return lo(t.fields,(n,r)=>{const s=new st([n]);if(lf(r)){const i=Jk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rt(e,0,fe.min(),fe.min(),fe.min(),an.empty(),0)}static newFoundDocument(e,n,r,s){return new rt(e,1,n,fe.min(),r,s,0)}static newNoDocument(e,n){return new rt(e,2,n,fe.min(),fe.min(),an.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,fe.min(),fe.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this.position=e,this.inclusive=n}}function MT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Hi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function FT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ns(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n="asc"){this.field=e,this.dir=n}}function pB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{}class Pe extends Zk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gB(e,n,r):n==="array-contains"?new _B(e,r):n==="in"?new iC(e,r):n==="not-in"?new wB(e,r):n==="array-contains-any"?new EB(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yB(e,r):new vB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Hi(n,this.value)):n!==null&&Gi(this.value)===Gi(n)&&this.matchesComparison(Hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends Zk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new We(e,n)}matches(e){return Dl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Dl(t){return t.op==="and"}function tv(t){return t.op==="or"}function ow(t){return eC(t)&&Dl(t)}function eC(t){for(const e of t.filters)if(e instanceof We)return!1;return!0}function nv(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+Nl(t.value);if(ow(t))return t.filters.map(e=>nv(e)).join(",");{const e=t.filters.map(n=>nv(n)).join(",");return`${t.op}(${e})`}}function tC(t,e){return t instanceof Pe?function(r,s){return s instanceof Pe&&r.op===s.op&&r.field.isEqual(s.field)&&ns(r.value,s.value)}(t,e):t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&tC(o,s.filters[a]),!0):!1}(t,e):void ie()}function nC(t,e){const n=t.filters.concat(e);return We.create(n,t.op)}function rC(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${Nl(n.value)}`}(t):t instanceof We?function(n){return n.op.toString()+" {"+n.getFilters().map(rC).join(" ,")+"}"}(t):"Filter"}class gB extends Pe{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class yB extends Pe{constructor(e,n){super(e,"in",n),this.keys=sC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vB extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=sC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class _B extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nd(n)&&td(n.arrayValue,this.value)}}class iC extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&td(this.value.arrayValue,n)}}class wB extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!td(this.value.arrayValue,n)}}class EB extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>td(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function rv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new IB(t,e,n,r,s,i,o)}function Jo(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Nl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Nl(r)).join(",")),e.ue=n}return e.ue}function Ad(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!FT(t.startAt,e.startAt)&&FT(t.endAt,e.endAt)}function em(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function tm(t,e){return t.filters.filter(n=>n instanceof Pe&&n.field.isEqual(e))}function jT(t,e,n){let r=of,s=!0;for(const i of tm(t,e)){let o=of,a=!0;switch(i.op){case"<":case"<=":o=fB(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=of}VT({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];VT({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function UT(t,e,n){let r=wi,s=!0;for(const i of tm(t,e)){let o=wi,a=!0;switch(i.op){case">=":case">":o=mB(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=wi}LT({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];LT({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oC(t,e,n,r,s,i,o,a){return new Bs(t,e,n,r,s,i,o,a)}function iu(t){return new Bs(t)}function BT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aw(t){return t.collectionGroup!==null}function fl(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new He(st.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new rd(i,r))}),n.has(st.keyField().canonicalString())||e.ce.push(new rd(st.keyField(),r))}return e.ce}function wn(t){const e=Z(t);return e.le||(e.le=lC(e,fl(t))),e.le}function aC(t){const e=Z(t);return e.he||(e.he=lC(e,t.explicitOrderBy)),e.he}function lC(t,e){if(t.limitType==="F")return rv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new rd(s.field,i)});const n=t.endAt?new Ki(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ki(t.startAt.position,t.startAt.inclusive):null;return rv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sv(t,e){const n=t.filters.concat([e]);return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nm(t,e,n){return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return Ad(wn(t),wn(e))&&t.limitType===e.limitType}function uC(t){return`${Jo(wn(t))}|lt:${t.limitType}`}function $a(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rC(s)).join(", ")}]`),Sd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Nl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Nl(s)).join(",")),`Target(${r})`}(wn(t))}; limitType=${t.limitType})`}function kd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=MT(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,fl(r),s)||r.endAt&&!function(o,a,l){const c=MT(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,fl(r),s))}(t,e)}function cC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dC(t){return(e,n)=>{let r=!1;for(const s of fl(t)){const i=TB(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function TB(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Hi(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Kk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=new et(te.comparator);function Bn(){return xB}const hC=new et(te.comparator);function tc(...t){let e=hC;for(const n of t)e=e.insert(n.key,n);return e}function fC(t){let e=hC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return _c()}function mC(){return _c()}function _c(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const bB=new et(te.comparator),SB=new He(te.comparator);function Ee(...t){let e=SB;for(const n of t)e=e.add(n);return e}const AB=new He(ye);function lw(){return AB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zc(e)?"-0":e}}function pC(t){return{integerValue:""+t}}function gC(t,e){return zk(e)?pC(e):uw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this._=void 0}}function RB(t,e,n){return t instanceof Ol?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Km(i)&&(i=Qm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Zo?vC(t,e):t instanceof ea?_C(t,e):function(s,i){const o=yC(s,i),a=zT(o)+zT(s.Pe);return ev(o)&&ev(s.Pe)?pC(a):uw(s.serializer,a)}(t,e)}function kB(t,e,n){return t instanceof Zo?vC(t,e):t instanceof ea?_C(t,e):n}function yC(t,e){return t instanceof Vl?function(r){return ev(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ol extends Xm{}class Zo extends Xm{constructor(e){super(),this.elements=e}}function vC(t,e){const n=wC(e);for(const r of t.elements)n.some(s=>ns(s,r))||n.push(r);return{arrayValue:{values:n}}}class ea extends Xm{constructor(e){super(),this.elements=e}}function _C(t,e){let n=wC(e);for(const r of t.elements)n=n.filter(s=>!ns(s,r));return{arrayValue:{values:n}}}class Vl extends Xm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function zT(t){return ct(t.integerValue||t.doubleValue)}function wC(t){return nd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.field=e,this.transform=n}}function CB(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Zo&&s instanceof Zo||r instanceof ea&&s instanceof ea?kl(r.elements,s.elements,ns):r instanceof Vl&&s instanceof Vl?ns(r.Pe,s.Pe):r instanceof Ol&&s instanceof Ol}(t.transform,e.transform)}class PB{constructor(e,n){this.version=e,this.transformResults=n}}class ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ht}static exists(e){return new ht(void 0,e)}static updateTime(e){return new ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jm{}function EC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new au(t.key,ht.none()):new ou(t.key,t.data,ht.none());{const n=t.data,r=an.empty();let s=new He(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new $s(t.key,r,new Un(s.toArray()),ht.none())}}function NB(t,e,n){t instanceof ou?function(s,i,o){const a=s.value.clone(),l=qT(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof $s?function(s,i,o){if(!uf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=qT(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(IC(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wc(t,e,n,r){return t instanceof ou?function(i,o,a,l){if(!uf(i.precondition,o))return a;const c=i.value.clone(),d=WT(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof $s?function(i,o,a,l){if(!uf(i.precondition,o))return a;const c=WT(i.fieldTransforms,l,o),d=o.data;return d.setAll(IC(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return uf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function DB(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=yC(r.transform,s||null);i!=null&&(n===null&&(n=an.empty()),n.set(r.field,i))}return n||null}function $T(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&kl(r,s,(i,o)=>CB(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ou extends Jm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $s extends Jm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qT(t,e,n){const r=new Map;ue(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,kB(o,a,n[s]))}return r}function WT(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,RB(i,o,e))}return r}class au extends Jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cw extends Jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&NB(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=EC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,(n,r)=>$T(n,r))&&kl(this.baseMutations,e.baseMutations,(n,r)=>$T(n,r))}}class hw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ue(e.mutations.length===r.length);let s=function(){return bB}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ve;function xC(t){switch(t){default:return ie();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function bC(t){if(t===void 0)return Ct("GRPC error has no .code"),U.UNKNOWN;switch(t){case Vt.OK:return U.OK;case Vt.CANCELLED:return U.CANCELLED;case Vt.UNKNOWN:return U.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return U.INTERNAL;case Vt.UNAVAILABLE:return U.UNAVAILABLE;case Vt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Vt.NOT_FOUND:return U.NOT_FOUND;case Vt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Vt.ABORTED:return U.ABORTED;case Vt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Vt.DATA_LOSS:return U.DATA_LOSS;default:return ie()}}(Ve=Vt||(Vt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rm=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=new Bo([4294967295,4294967295],0);function GT(t){const e=SC().encode(t),n=new Ak;return n.update(e),new Uint8Array(n.digest())}function HT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bo([n,r],0),new Bo([s,i],0)]}class mw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(r<0)throw new nc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bo.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Bo.fromNumber(r)));return s.compare(VB)===1&&(s=new Bo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=GT(e),[r,s]=HT(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=GT(e),[r,s]=HT(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Nd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pd(fe.min(),s,new et(ye),Bn(),Ee())}}class Nd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nd(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class AC{constructor(e,n){this.targetId=e,this.me=n}}class RC{constructor(e,n,r=Et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class KT{constructor(){this.fe=0,this.ge=YT(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new Nd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=YT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class LB{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bn(),this.qe=QT(),this.Qe=new et(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(em(i))if(r===0){const o=new te(i.path);this.Ue(n,o,rt.newNoDocument(o,fe.min()))}else ue(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}rm==null||rm.et(function(d,h,p,g,T){var _,b,w,v,E,O;const L={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},j=h.unchangedNames;return j&&(L.bloomFilter={applied:T===0,hashCount:(_=j==null?void 0:j.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(v=(w=(b=j==null?void 0:j.bits)===null||b===void 0?void 0:b.bitmap)===null||w===void 0?void 0:w.length)!==null&&v!==void 0?v:0,padding:(O=(E=j==null?void 0:j.bits)===null||E===void 0?void 0:E.padding)!==null&&O!==void 0?O:0,mightContain:S=>{var I;return(I=g==null?void 0:g.mightContain(S))!==null&&I!==void 0&&I}}),L}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ms(r).toUint8Array()}catch(l){if(l instanceof Qk)return rr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new mw(o,s,i)}catch(l){return rr(l instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&em(a.target)){const l=new te(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,rt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ee();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Pd(e,n,this.Qe,this.ke,r);return this.ke=Bn(),this.qe=QT(),this.Qe=new et(ye),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new KT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new He(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new KT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function QT(){return new et(te.comparator)}function YT(){return new et(te.comparator)}const MB={asc:"ASCENDING",desc:"DESCENDING"},FB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jB={and:"AND",or:"OR"};class UB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iv(t,e){return t.useProto3Json||Sd(e)?e:{value:e}}function Ll(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BB(t,e){return Ll(t,e.toTimestamp())}function Dt(t){return ue(!!t),fe.fromTimestamp(function(n){const r=Ls(n);return new ft(r.seconds,r.nanos)}(t))}function pw(t,e){return ov(t,e).canonicalString()}function ov(t,e){const n=function(s){return new Ce(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CC(t){const e=Ce.fromString(t);return ue(UC(e)),e}function sd(t,e){return pw(t.databaseId,e.path)}function es(t,e){const n=CC(e);if(n.get(1)!==t.databaseId.projectId)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(DC(n))}function PC(t,e){return pw(t.databaseId,e)}function NC(t){const e=CC(t);return e.length===4?Ce.emptyPath():DC(e)}function av(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DC(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function XT(t,e,n){return{name:sd(t,e),fields:n.value.mapValue.fields}}function OC(t,e,n){const r=es(t,e.name),s=Dt(e.updateTime),i=e.createTime?Dt(e.createTime):fe.min(),o=new an({mapValue:{fields:e.fields}}),a=rt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function zB(t,e){return"found"in e?function(r,s){ue(!!s.found),s.found.name,s.found.updateTime;const i=es(r,s.found.name),o=Dt(s.found.updateTime),a=s.found.createTime?Dt(s.found.createTime):fe.min(),l=new an({mapValue:{fields:s.found.fields}});return rt.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){ue(!!s.missing),ue(!!s.readTime);const i=es(r,s.missing),o=Dt(s.readTime);return rt.newNoDocument(i,o)}(t,e):ie()}function $B(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ue(d===void 0||typeof d=="string"),Et.fromBase64String(d||"")):(ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Et.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?U.UNKNOWN:bC(c.code);return new q(d,c.message||"")}(o);n=new RC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=es(t,r.document.name),i=Dt(r.document.updateTime),o=r.document.createTime?Dt(r.document.createTime):fe.min(),a=new an({mapValue:{fields:r.document.fields}}),l=rt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new cf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=es(t,r.document),i=r.readTime?Dt(r.readTime):fe.min(),o=rt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new cf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=es(t,r.document),i=r.removedTargetIds||[];n=new cf([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new OB(s,i),a=r.targetId;n=new AC(a,o)}}return n}function id(t,e){let n;if(e instanceof ou)n={update:XT(t,e.key,e.value)};else if(e instanceof au)n={delete:sd(t,e.key)};else if(e instanceof $s)n={update:XT(t,e.key,e.data),updateMask:QB(e.fieldMask)};else{if(!(e instanceof cw))return ie();n={verify:sd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ol)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:BB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function lv(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?ht.updateTime(Dt(i.updateTime)):i.exists!==void 0?ht.exists(i.exists):ht.none()}(e.currentDocument):ht.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ue(a.setToServerValue==="REQUEST_TIME"),l=new Ol;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Zo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new ea(d)}else"increment"in a?l=new Vl(o,a.increment):ie();const c=st.fromServerFormat(a.fieldPath);return new Cd(c,l)}(t,s)):[];if(e.update){e.update.name;const s=es(t,e.update.name),i=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Un(c.map(d=>st.fromServerFormat(d)))}(e.updateMask);return new $s(s,i,o,n,r)}return new ou(s,i,n,r)}if(e.delete){const s=es(t,e.delete);return new au(s,n)}if(e.verify){const s=es(t,e.verify);return new cw(s,n)}return ie()}function qB(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Dt(s.updateTime):Dt(i);return o.isEqual(fe.min())&&(o=Dt(i)),new PB(o,s.transformResults||[])}(n,e))):[]}function VC(t,e){return{documents:[PC(t,e.path)]}}function Zm(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PC(t,s);const i=function(c){if(c.length!==0)return jC(We.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:hi(p.field),direction:GB(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=iv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function LC(t,e,n,r){const{_t:s,parent:i}=Zm(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d=r?c.alias:"aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:hi(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:hi(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function MC(t){let e=NC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ue(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=FC(h);return p instanceof We&&ow(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(T){return new rd(qa(T.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Sd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new Ki(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,g=h.values||[];return new Ki(g,p)}(n.endAt)),oC(e,s,o,i,a,"F",l,c)}function WB(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qa(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qa(n.unaryFilter.field);return Pe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qa(n.unaryFilter.field);return Pe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qa(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(qa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return We.create(n.compositeFilter.filters.map(r=>FC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function GB(t){return MB[t]}function HB(t){return FB[t]}function KB(t){return jB[t]}function hi(t){return{fieldPath:t.canonicalString()}}function qa(t){return st.fromServerFormat(t.fieldPath)}function jC(t){return t instanceof Pe?function(n){if(n.op==="=="){if(OT(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NAN"}};if(DT(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OT(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NOT_NAN"}};if(DT(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hi(n.field),op:HB(n.op),value:n.value}}}(t):t instanceof We?function(n){const r=n.getFilters().map(s=>jC(s));return r.length===1?r[0]:{compositeFilter:{op:KB(n.op),filters:r}}}(t):ie()}function QB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r,s,i=fe.min(),o=fe.min(),a=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.ct=e}}function YB(t,e){let n;if(e.document)n=OC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=te.fromSegments(e.noDocument.path),s=na(e.noDocument.readTime);n=rt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{const r=te.fromSegments(e.unknownDocument.path),s=na(e.unknownDocument.version);n=rt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new ft(s[0],s[1]);return fe.fromTimestamp(i)}(e.readTime)),n}function JT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:sd(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Ll(i,o.version.toTimestamp()),createTime:Ll(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ta(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:n.path.toArray(),version:ta(e.version)}}return r}function sm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ta(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function na(t){const e=new ft(t.seconds,t.nanoseconds);return fe.fromTimestamp(e)}function ko(t,e){const n=(e.baseMutations||[]).map(i=>lv(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>lv(t.ct,i)),s=ft.fromMillis(e.localWriteTimeMs);return new dw(e.batchId,s,n,r)}function rc(t){const e=na(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?na(t.lastLimboFreeSnapshotVersion):fe.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return ue(i.documents.length===1),wn(iu(NC(i.documents[0])))}(t.query):function(i){return wn(MC(i))}(t.query),new xs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Et.fromBase64String(t.resumeToken))}function zC(t,e){const n=ta(e.snapshotVersion),r=ta(e.lastLimboFreeSnapshotVersion);let s;s=em(e.target)?VC(t.ct,e.target):Zm(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jo(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function gw(t){const e=MC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nm(e,e.limit,"L"):e}function wg(t,e){return new fw(e.largestBatchId,lv(t.ct,e.overlayMutation))}function ZT(t,e){const n=e.path.lastSegment();return[t,_n(e.path.popLast()),n]}function ex(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ta(r.readTime),documentKey:_n(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{getBundleMetadata(e,n){return tx(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:na(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return tx(e).put(function(s){return{bundleId:s.id,createTime:ta(Dt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return nx(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:gw(i.bundledQuery),readTime:na(i.readTime)}}(r)})}saveNamedQuery(e,n){return nx(e).put(function(s){return{name:s.name,readTime:ta(Dt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function tx(t){return Gt(t,"bundles")}function nx(t){return Gt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new ep(e,r)}getOverlay(e,n){return Fu(e).get(ZT(this.userId,n)).next(r=>r?wg(this.serializer,r):null)}getOverlays(e,n){const r=Hr();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new fw(n,o);s.push(this.ht(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(_n(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Fu(e).j("collectionPathOverlayIndex",a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hr(),i=_n(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Fu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=wg(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fu(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=wg(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}ht(e,n){return Fu(e).put(function(s,i,o){const[a,l,c]=ZT(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:id(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Fu(t){return Gt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{Pt(e){return Gt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Et.fromUint8Array(r):Et.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(ct(e.integerValue));else if("doubleValue"in e){const r=ct(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Zc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ls(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ms(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Yk(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Ym(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ie()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(ct(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),te.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Co.vt=new Co;function ZB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function rx(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=ZB(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class e5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=rx(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=rx(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class t5{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class n5{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ju{constructor(){this.jt=new e5,this.Ht=new t5(this.jt),this.Jt=new n5(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Po(this.indexId,this.documentKey,this.arrayValue,r)}}function ti(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=sx(t.arrayValue,e.arrayValue),n!==0?n:(n=sx(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function sx(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.Xt=new He((n,r)=>st.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ue(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Xy(e);if(n!==void 0&&!this.sn(n))return!1;const r=So(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new He(st.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new zo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new zo(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new zo(r.field,r.dir==="asc"?0:1)));return new Cl(Cl.UNKNOWN_ID,this.collectionId,n,Pl.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t){var e,n;if(ue(t instanceof Pe||t instanceof We),t instanceof Pe){if(t instanceof iC){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Pe.create(t.field,"==",i)))||[];return We.create(s,"or")}return t}const r=t.filters.map(s=>$C(s));return We.create(r,t.op)}function r5(t){if(t.getFilters().length===0)return[];const e=dv($C(t));return ue(qC(e)),uv(e)||cv(e)?[e]:e.getFilters()}function uv(t){return t instanceof Pe}function cv(t){return t instanceof We&&ow(t)}function qC(t){return uv(t)||cv(t)||function(n){if(n instanceof We&&tv(n)){for(const r of n.getFilters())if(!uv(r)&&!cv(r))return!1;return!0}return!1}(t)}function dv(t){if(ue(t instanceof Pe||t instanceof We),t instanceof Pe)return t;if(t.filters.length===1)return dv(t.filters[0]);const e=t.filters.map(r=>dv(r));let n=We.create(e,t.op);return n=im(n),qC(n)?n:(ue(n instanceof We),ue(Dl(n)),ue(n.filters.length>1),n.filters.reduce((r,s)=>yw(r,s)))}function yw(t,e){let n;return ue(t instanceof Pe||t instanceof We),ue(e instanceof Pe||e instanceof We),n=t instanceof Pe?e instanceof Pe?function(s,i){return We.create([s,i],"and")}(t,e):ox(t,e):e instanceof Pe?ox(e,t):function(s,i){if(ue(s.filters.length>0&&i.filters.length>0),Dl(s)&&Dl(i))return nC(s,i.getFilters());const o=tv(s)?s:i,a=tv(s)?i:s,l=o.filters.map(c=>yw(c,a));return We.create(l,"or")}(t,e),im(n)}function ox(t,e){if(Dl(e))return nC(e,t.getFilters());{const n=e.filters.map(r=>yw(t,r));return We.create(n,"or")}}function im(t){if(ue(t instanceof Pe||t instanceof We),t instanceof Pe)return t;const e=t.getFilters();if(e.length===1)return im(e[0]);if(eC(t))return t;const n=e.map(s=>im(s)),r=[];return n.forEach(s=>{s instanceof Pe?r.push(s):s instanceof We&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:We.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.un=new vw}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(sr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(sr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class vw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(Ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Uint8Array(0);class i5{constructor(e,n){this.databaseId=n,this.cn=new vw,this.ln=new zs(r=>Jo(r),(r,s)=>Ad(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:_n(s)};return ax(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Lk(n),""],!1,!0);return ax(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Gr(o.parent))}return r})}addFieldIndex(e,n){const r=Uu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Na(e);return i.next(a=>{o.put(ex(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Uu(e),s=Na(e),i=Pa(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Uu(e),r=Pa(e),s=Na(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return V.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new ix(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Pa(e);let s=!0;const i=new Map;return V.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ee();const a=[];return V.forEach(i,(l,c)=>{W("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(l)} to execute ${Jo(n)}`);const d=function(E,O){const L=Xy(O);if(L===void 0)return null;for(const j of tm(E,L.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(c,l),h=function(E,O){const L=new Map;for(const j of So(O))for(const S of tm(E,j.fieldPath))switch(S.op){case"==":case"in":L.set(j.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return L.set(j.fieldPath.canonicalString(),S.value),Array.from(L.values())}return null}(c,l),p=function(E,O){const L=[];let j=!0;for(const S of So(O)){const I=S.kind===0?jT(E,S.fieldPath,E.startAt):UT(E,S.fieldPath,E.startAt);L.push(I.value),j&&(j=I.inclusive)}return new Ki(L,j)}(c,l),g=function(E,O){const L=[];let j=!0;for(const S of So(O)){const I=S.kind===0?UT(E,S.fieldPath,E.endAt):jT(E,S.fieldPath,E.endAt);L.push(I.value),j&&(j=I.inclusive)}return new Ki(L,j)}(c,l),T=this.In(l,c,p),_=this.In(l,c,g),b=this.Tn(l,c,h),w=this.En(l.indexId,d,T,p.inclusive,_,g.inclusive,b);return V.forEach(w,v=>r.G(v,n.limit).next(E=>{E.forEach(O=>{const L=te.fromSegments(O.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return V.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=r5(We.create(e.filters,"and")).map(r=>rv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.dn(n[h/c]):xh,g=this.An(e,p,r[h%c],s),T=this.Rn(e,p,i[h%c],o),_=a.map(b=>this.An(e,p,b,!0));d.push(...this.createRange(g,T,_))}return d}An(e,n,r,s){const i=new Po(e,te.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new Po(e,te.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new ix(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return V.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new He(st.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new ju;for(const s of So(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);Co.vt.It(i,o)}return r.zt()}dn(e){const n=new ju;return Co.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new ju;return Co.vt.It(Xo(this.databaseId,n),r.Yt(function(i){const o=So(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new ju);let i=0;for(const o of So(e)){const a=r[i++];for(const l of s)if(this.fn(n,o.fieldPath)&&nd(a))s=this.gn(s,o,a);else{const c=l.Yt(o.kind);Co.vt.It(a,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new ju;l.seed(a.zt()),Co.vt.It(o,l.Yt(n.kind)),i.push(l)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof Pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Uu(e),s=Na(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Pl(h.sequenceNumber,new sr(na(h.readTime),new te(Gr(h.documentKey)),h.largestBatchId)):Pl.empty(),g=d.fields.map(([T,_])=>new zo(st.fromServerFormat(T),_));return new Cl(d.indexId,d.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ye(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Uu(e),i=Na(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>i.put(ex(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.wn(e,s,l).next(c=>{const d=this.Sn(i,l);return c.isEqual(d)?V.resolve():this.bn(e,i,l,c,d)}))))})}Dn(e,n,r,s){return Pa(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return Pa(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=Pa(e);let i=new He(ti);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new Po(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new He(ti);const s=this.Vn(n,e);if(s==null)return r;const i=Xy(n);if(i!=null){const o=e.data.field(i.fieldPath);if(nd(o))for(const a of o.arrayValue.values||[])r=r.add(new Po(n.indexId,e.key,this.dn(a),s))}else r=r.add(new Po(n.indexId,e.key,xh,s));return r}bn(e,n,r,s,i){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const g=l.getIterator(),T=c.getIterator();let _=Ca(g),b=Ca(T);for(;_||b;){let w=!1,v=!1;if(_&&b){const E=d(_,b);E<0?v=!0:E>0&&(w=!0)}else _!=null?v=!0:w=!0;w?(h(b),b=Ca(T)):v?(p(_),_=Ca(g)):(_=Ca(g),b=Ca(T))}}(s,i,ti,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),V.waitFor(o)}yn(e){let n=1;return Na(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ti(o,a)).filter((o,a,l)=>!a||ti(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=ti(o,e),l=ti(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&l<0)s.push(o),s.push(o.Zt());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,xh,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,xh,[]];i.push(IDBKeyRange.bound(a,l))}return i}Cn(e,n){return ti(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(lx)}getMinOffset(e,n){return V.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||ie())).next(lx)}}function ax(t){return Gt(t,"collectionParents")}function Pa(t){return Gt(t,"indexEntries")}function Uu(t){return Gt(t,"indexConfiguration")}function Na(t){return Gt(t,"indexState")}function lx(t){ue(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;rw(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new sr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,h,p)=>(a++,p.delete()));i.push(l.next(()=>{ue(a===1)}));const c=[];for(const d of n.mutations){const h=$k(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return V.waitFor(i).next(()=>c)}function om(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ie();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(41943040,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);class tp{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){ue(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new tp(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ni(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Wa(e),o=ni(e);return o.add({}).next(a=>{ue(typeof a=="number");const l=new dw(a,n,r,s),c=function(g,T,_){const b=_.baseMutations.map(v=>id(g.ct,v)),w=_.mutations.map(v=>id(g.ct,v));return{userId:T,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:b,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new He((p,g)=>ye(p.canonicalString(),g.canonicalString()));for(const p of s){const g=$k(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(i.put(g,G4))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return ni(e).get(n).next(r=>r?(ue(r.userId===this.userId),ko(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?V.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ni(e).J({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(ue(a.batchId>=r),i=ko(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ni(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ni(e).U("userMutationsIndex",n).next(r=>r.map(s=>ko(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=sf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Wa(e).J({range:s},(o,a,l)=>{const[c,d,h]=o,p=Gr(d);if(c===this.userId&&n.path.isEqual(p))return ni(e).get(h).next(g=>{if(!g)throw ie();ue(g.userId===this.userId),i.push(ko(this.serializer,g))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(ye);const s=[];return n.forEach(i=>{const o=sf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Wa(e).J({range:a},(c,d,h)=>{const[p,g,T]=c,_=Gr(g);p===this.userId&&i.path.isEqual(_)?r=r.add(T):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=sf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new He(ye);return Wa(e).J({range:o},(l,c,d)=>{const[h,p,g]=l,T=Gr(p);h===this.userId&&r.isPrefixOf(T)?T.length===s&&(a=a.add(g)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(ni(e).get(i).next(o=>{if(o===null)throw ie();ue(o.userId===this.userId),r.push(ko(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return WC(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Wa(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Gr(i[1]);s.push(l)}else a.done()}).next(()=>{ue(s.length===0)})})}containsKey(e,n){return GC(e,this.userId,n)}Nn(e){return HC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GC(t,e,n){const r=sf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Wa(t).J({range:i,H:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function ni(t){return Gt(t,"mutations")}function Wa(t){return Gt(t,"documentMutations")}function HC(t){return Gt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ra(0)}static kn(){return new ra(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new ra(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>fe.fromTimestamp(new ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Da(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ue(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Da(e).J((o,a)=>{const l=rc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Da(e).J((r,s)=>{const i=rc(s);n(i)})}qn(e){return cx(e).get("targetGlobalKey").next(n=>(ue(n!==null),n))}Qn(e,n){return cx(e).put("targetGlobalKey",n)}Kn(e,n){return Da(e).put(zC(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Jo(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Da(e).J({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const c=rc(a);Ad(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=fi(e);return n.forEach(o=>{const a=_n(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=fi(e);return V.forEach(n,i=>{const o=_n(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=fi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=fi(e);let i=Ee();return s.J({range:r,H:!0},(o,a,l)=>{const c=Gr(o[1]),d=new te(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=_n(n.path),s=IDBKeyRange.bound([r],[Lk(r)],!1,!0);let i=0;return fi(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,n){return Da(e).get(n).next(r=>r?rc(r):null)}}function Da(t){return Gt(t,"targets")}function cx(t){return Gt(t,"targetGlobal")}function fi(t){return Gt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx([t,e],[n,r]){const s=ye(t,n);return s===0?ye(e,r):s}class a5{constructor(e){this.Un=e,this.buffer=new He(dx),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();dx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ao(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await oo(n)}await this.Hn(3e5)})}}class l5{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(jn.oe);const r=new a5(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(ux)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ux):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),za()<=Re.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function QC(t,e){return new l5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n){this.db=e,this.garbageCollector=QC(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return bh(e,r)}removeReference(e,n,r){return bh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return bh(e,n)}nr(e,n){return function(s,i){let o=!1;return HC(s).Y(a=>GC(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,fe.min()),fi(e).delete(function(h){return[0,_n(h.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return bh(e,n)}tr(e,n){const r=fi(e);let s,i=jn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==jn.oe&&n(new te(Gr(s)),i),i=c,s=l):i=jn.oe}).next(()=>{i!==jn.oe&&n(new te(Gr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bh(t,e){return fi(t).put(function(r,s){return{targetId:0,path:_n(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Io(e).put(r)}removeEntry(e,n,r){return Io(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sm(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=rt.newInvalidDocument(n);return Io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bu(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:rt.newInvalidDocument(n)};return Io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bu(n))},(s,i)=>{r={document:this.ir(n,i),size:om(i)}}).next(()=>r)}getEntries(e,n){let r=Bn();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Bn(),s=new et(te.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,om(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return V.resolve();let s=new He(mx);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Bu(s.first()),Bu(s.last())),o=s.getIterator();let a=o.getNext();return Io(e).J({index:"documentKeyIndex",range:i},(l,c,d)=>{const h=te.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&mx(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(Bu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),sm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Io(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Bn();for(const h of c){const p=this.ir(te.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(kd(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Bn();const o=fx(n,r),a=fx(n,sr.max());return Io(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.ir(te.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new d5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return hx(e).get("remoteDocumentGlobalKey").next(n=>(ue(!!n),n))}rr(e,n){return hx(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=YB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return rt.newInvalidDocument(e)}}function XC(t){return new c5(t)}class d5 extends YC{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new zs(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new He((i,o)=>ye(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=JT(this.cr.serializer,o);s=s.add(i.path.popLast());const c=om(l);r+=c-a.size,n.push(this.cr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=JT(this.cr.serializer,o.convertToNoDocument(fe.min()));n.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function hx(t){return Gt(t,"remoteDocumentGlobal")}function Io(t){return Gt(t,"remoteDocumentsV14")}function Bu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fx(t,e){const n=e.documentKey.path.toArray();return[t,sm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mx(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ye(n[i],r[i]),s)return s;return s=ye(n.length,r.length),s||(s=ye(n[n.length-2],r[r.length-2]),s||ye(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wc(r.mutation,s,Un.empty(),ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const s=Hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=tc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Bn();const o=_c(),a=function(){return _c()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof $s)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),wc(d.mutation,c,d.mutation.getFieldMask(),ft.now())):o.set(c.key,Un.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new h5(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_c();let s=new et((o,a)=>o-a),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Un.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ee()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=mC();d.forEach(p=>{if(!i.has(p)){const g=EC(n.get(p),r.get(p));g!==null&&h.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(Hr());let a=-1,l=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ee())).next(d=>({batchId:a,changes:fC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=tc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=tc();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const c=function(h,p){return new Bs(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,rt.newInvalidDocument(d)))});let a=tc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&wc(d.mutation,c,Un.empty(),ft.now()),kd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Dt(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:gw(s.bundledQuery),readTime:Dt(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.overlays=new et(te.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=Hr(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new et((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Hr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Hr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fw(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ee(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.Tr=new He(Ht.Er),this.dr=new He(Ht.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ht(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ht(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Ce([])),r=new Ht(n,e),s=new Ht(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Ce([])),r=new Ht(n,e),s=new Ht(n,e+1);let i=Ee();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ht(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new He(Ht.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ht(n,0),s=new Ht(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(ye);return n.forEach(s=>{const i=new Ht(s,0),o=new Ht(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Ht(new te(i),0);let a=new He(ye);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),V.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,s=>{const i=new Ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ht(n,0),s=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.Mr=e,this.docs=function(){return new et(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rt.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bn();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||rw(Fk(d),r)<=0||(s.has(d.key)||kd(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new v5(this)}getSize(e){return V.resolve(this.size)}}class v5 extends YC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.persistence=e,this.Nr=new zs(n=>Jo(n),Ad),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _w,this.targetCount=0,this.kr=ra.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ra(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jn(0),this.Kr=!1,this.Kr=!0,this.$r=new p5,this.referenceDelegate=e(this),this.Ur=new _5(this),this.indexManager=new s5,this.remoteDocumentCache=function(s){return new y5(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new BC(n),this.Gr=new f5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new m5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new g5(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new w5(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class w5 extends Uk{constructor(e){super(),this.currentSequenceNumber=e}}class np{constructor(e){this.persistence=e,this.Jr=new _w,this.Yr=null}static Zr(e){return new np(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{const s=te.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class am{constructor(e,n){this.persistence=e,this.ti=new zs(r=>_n(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=QC(this,n)}static Zr(e,n){return new am(e,n)}zr(){}jr(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}Zn(e,n){return V.forEach(this.ti,(r,s)=>this.nr(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Or(e,o=>this.nr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,fe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),V.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=af(e.data.value)),n}nr(e,n,r){return V.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.ti.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Hm("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RT,{unique:!0}),l.createObjectStore("documentMutations")}(e),px(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),px(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RT,{unique:!0});const h=c.store("mutations"),p=d.map(g=>h.put(g));return V.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:sB});c.createIndex("collectionPathOverlayIndex",iB,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",oB,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:H4});c.createIndex("documentKeyIndex",K4),c.createIndex("collectionGroupIndex",Q4)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:eB}).createIndex("sequenceNumberIndex",tB,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:nB}).createIndex("documentKeyIndex",rB,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=om(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>V.forEach(a,l=>{ue(l.userId===i.userId);const c=ko(this.serializer,l);return WC(e,i.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const l=new Ce(o),c=function(h){return[0,_n(h)]}(l);i.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:_n(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:Z4});const r=n.store("collectionParents"),s=new vw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:_n(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ce(o);return i(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=Gr(a);return i(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=rc(s),o=zC(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new te(Ce.fromString(h.document.name).popFirst(5)):h.noDocument?te.fromSegments(h.noDocument.path):h.unknownDocument?te.fromSegments(h.unknownDocument.path):ie()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>V.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=XC(this.serializer),i=new ww(np.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Ee();ko(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),V.forEach(a,(l,c)=>{const d=new Qt(c),h=ep.lt(this.serializer,d),p=i.getIndexManager(d),g=tp.lt(d,this.serializer,p,i.referenceDelegate);return new JC(s,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Jy(n,jn.oe),l).next()})})}}function px(t){t.createObjectStore("targetDocuments",{keyPath:X4}).createIndex("documentTargetsIndex",J4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Y4,{unique:!0}),t.createObjectStore("targetGlobal")}const Eg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ew{constructor(e,n,r,s,i,o,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Ew.D())throw new q(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new u5(this,s),this.Ai=n+"main",this.serializer=new BC(l),this.Ri=new Zr(this.Ai,this.hi,new E5(this.serializer)),this.$r=new JB,this.Ur=new o5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XC(this.serializer),this.Gr=new XB,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ct("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(U.FAILED_PRECONDITION,Eg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new jn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ao(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return zu(e).get("owner").next(n=>V.resolve(this.vi(n)))}Ci(e){return Sh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Gt(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?V.resolve(!0):zu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new q(U.FAILED_PRECONDITION,Eg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sh(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Jy(e,jn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Sh(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return tp.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new i5(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ep.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===17?uB:l===16?lB:l===15?iw:l===14?Gk:l===13?Wk:l===12?aB:l===11?qk:void ie()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new Jy(a,this.Qr?this.Qr.next():jn.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new q(U.FAILED_PRECONDITION,jk);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return zu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(U.FAILED_PRECONDITION,Eg)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zu(e).put("owner",n)}static D(){return Zr.D()}bi(e){const n=zu(e);return n.get("owner").next(r=>this.vi(r)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;hR()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ct("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ct("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zu(t){return Gt(t,"owner")}function Sh(t){return Gt(t,"clientMetadata")}function Iw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ee(),s=Ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Tw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hR()?8:Bk(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new I5;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(za()<=Re.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",$a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(za()<=Re.DEBUG&&W("QueryEngine","Query:",$a(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(za()<=Re.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",$a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):V.resolve())}Yi(e,n){if(BT(n))return V.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nm(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ee(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,nm(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return BT(n)||s.isEqual(fe.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?V.resolve(null):(za()<=Re.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$a(n)),this.rs(e,o,n,Mk(s,-1)).next(a=>a))})}ts(e,n){let r=new He(dC(e));return n.forEach((s,i)=>{kd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return za()<=Re.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",$a(n)),this.Ji.getDocumentsMatchingQuery(e,n,sr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new et(ye),this._s=new zs(i=>Jo(i),Ad),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eP(t,e,n,r){return new T5(t,e,n,r)}async function tP(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ee();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function x5(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let g=V.resolve();return p.forEach(T=>{g=g.next(()=>d.getEntry(l,T)).next(_=>{const b=c.docVersions.get(T);ue(b!==null),_.version.compareTo(b)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function nP(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function b5(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,h)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Et.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(_,b,w){return _.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,d)&&a.push(n.Ur.updateTargetData(i,g))});let l=Bn(),c=Ee();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(rP(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(fe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(h=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function rP(t,e,n){let r=Ee(),s=Ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function S5(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ml(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new xs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fl(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ao(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function lm(t,e,n){const r=Z(t);let s=fe.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Z(l),p=h._s.get(d);return p!==void 0?V.resolve(h.os.get(p)):h.Ur.getTargetData(c,d)}(r,o,wn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:fe.min(),n?i:Ee())).next(a=>(oP(r,cC(e),a),{documents:a,Ts:i})))}function sP(t,e){const n=Z(t),r=Z(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function iP(t,e){const n=Z(t),r=n.us.get(e)||fe.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,Mk(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(oP(n,e,s),s))}function oP(t,e,n){let r=t.us.get(e)||fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}async function A5(t,e,n,r){const s=Z(t);let i=Ee(),o=Bn();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(i=i.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,h)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),l=await Ml(s,function(d){return wn(iu(Ce.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>rP(c,a,o).next(d=>(a.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Ur.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function R5(t,e,n=Ee()){const r=await Ml(t,wn(gw(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=Dt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Gr.saveNamedQuery(i,e);const a=r.withResumeToken(Et.EMPTY_BYTE_STRING,o);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(i,a).next(()=>s.Ur.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Ur.addMatchingKeys(i,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(i,e))})}function gx(t,e){return`firestore_clients_${t}_${e}`}function yx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ig(t,e){return`firestore_targets_${t}_${e}`}class um{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new um(e,n,s.state,i):(Ct("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ec{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new Ec(e,r.state,s):(Ct("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=lw();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=zk(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new cm(e,i):(Ct("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class xw{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new xw(n.clientId,n.onlineState):(Ct("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hv{constructor(){this.activeTargetIds=lw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tg{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new et(ye),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=gx(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new hv),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(gx(this.persistenceKey,r));if(s){const i=cm.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ig(this.persistenceKey,e));if(s){const i=Ec.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ig(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=jn.oe;if(i!=null)try{const a=JSON.parse(i);ue(typeof a=="number"),o=a}catch(a){Ct("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==jn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new um(this.currentUser,e,n,r),i=yx(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=yx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=Ig(this.persistenceKey,e),i=new Ec(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return cm.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return um.Rs(new Qt(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return Ec.Rs(s,n)}Ls(e){return xw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=lw();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class aP{constructor(){this.so=new hv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=null;function xg(){return Ah===null?Ah=function(){return 268435456+Math.round(2147483648*Math.random())}():Ah++,"0x"+Ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class N5 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=xg(),l=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(W("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw rr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+su}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=C5[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=xg();return new Promise((o,a)=>{const l=new Rk;l.setWithCredentials(!0),l.listenOnce(kk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rf.NO_ERROR:const d=l.getResponseJson();W(pn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case rf.TIMEOUT:W(pn,`RPC '${e}' ${i} timed out`),a(new q(U.DEADLINE_EXCEEDED,"Request time out"));break;case rf.HTTP_ERROR:const h=l.getStatus();if(W(pn,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const T=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(g.status);a(new q(T,g.message))}else a(new q(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(U.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{W(pn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(pn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=xg(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nk(),a=Pk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");W(pn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,g=!1;const T=new P5({Io:b=>{g?W(pn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(W(pn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),W(pn,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},To:()=>h.close()}),_=(b,w,v)=>{b.listen(w,E=>{try{v(E)}catch(O){setTimeout(()=>{throw O},0)}})};return _(h,ec.EventType.OPEN,()=>{g||(W(pn,`RPC '${e}' stream ${s} transport opened.`),T.yo())}),_(h,ec.EventType.CLOSE,()=>{g||(g=!0,W(pn,`RPC '${e}' stream ${s} transport closed`),T.So())}),_(h,ec.EventType.ERROR,b=>{g||(g=!0,rr(pn,`RPC '${e}' stream ${s} transport errored:`,b),T.So(new q(U.UNAVAILABLE,"The operation could not be completed")))}),_(h,ec.EventType.MESSAGE,b=>{var w;if(!g){const v=b.data[0];ue(!!v);const E=v,O=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(O){W(pn,`RPC '${e}' stream ${s} received error:`,O);const L=O.status;let j=function(C){const A=Vt[C];if(A!==void 0)return bC(A)}(L),S=O.message;j===void 0&&(j=U.INTERNAL,S="Unknown error status: "+L+" with message "+O.message),g=!0,T.So(new q(j,S)),h.close()}else W(pn,`RPC '${e}' stream ${s} received:`,v),T.bo(v)}}),_(a,Ck.STAT_EVENT,b=>{b.stat===Yy.PROXY?W(pn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Yy.NOPROXY&&W(pn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(){return typeof window<"u"?window:null}function df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){return new UB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Ct(n.toString()),Ct("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class D5 extends uP{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$B(this.serializer,e),r=function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?Dt(o.readTime):fe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=av(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=em(l)?{documents:VC(i,l)}:{query:Zm(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kC(i,o.resumeToken);const c=iv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=Ll(i,o.snapshotVersion.toTimestamp());const c=iv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=WB(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=av(this.serializer),n.removeTarget=e,this.a_(n)}}class O5 extends uP{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ue(!!e.streamToken),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qB(e.writeResults,e.commitTime),r=Dt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=av(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>id(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,ov(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ov(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class L5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ct(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{uo(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.L_.add(4),await lu(c),c.q_.set("Unknown"),c.L_.delete(4),await Od(c)}(this))})}),this.q_=new L5(r,s)}}async function Od(t){if(uo(t))for(const e of t.B_)await e(!0)}async function lu(t){for(const e of t.B_)await e(!1)}function rp(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Rw(n)?Aw(n):cu(n).r_()&&Sw(n,e))}function jl(t,e){const n=Z(t),r=cu(n);n.N_.delete(e),r.r_()&&cP(n,e),n.N_.size===0&&(r.r_()?r.o_():uo(n)&&n.q_.set("Unknown"))}function Sw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cu(t).A_(e)}function cP(t,e){t.Q_.xe(e),cu(t).R_(e)}function Aw(t){t.Q_=new LB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),cu(t).start(),t.q_.v_()}function Rw(t){return uo(t)&&!cu(t).n_()&&t.N_.size>0}function uo(t){return Z(t).L_.size===0}function dP(t){t.Q_=void 0}async function F5(t){t.q_.set("Online")}async function j5(t){t.N_.forEach((e,n)=>{Sw(t,e)})}async function U5(t,e){dP(t),Rw(t)?(t.q_.M_(e),Aw(t)):t.q_.set("Unknown")}async function B5(t,e,n){if(t.q_.set("Online"),e instanceof RC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dm(t,r)}else if(e instanceof cf?t.Q_.Ke(e):e instanceof AC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(fe.min()))try{const r=await nP(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(Et.EMPTY_BYTE_STRING,d.snapshotVersion)),cP(i,l);const h=new xs(d.target,l,c,d.sequenceNumber);Sw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await dm(t,r)}}async function dm(t,e,n){if(!ao(e))throw e;t.L_.add(1),await lu(t),t.q_.set("Offline"),n||(n=()=>nP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Od(t)})}function hP(t,e){return e().catch(n=>dm(t,n,e))}async function uu(t){const e=Z(t),n=Qi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;z5(e);)try{const s=await S5(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,$5(e,s)}catch(s){await dm(e,s)}fP(e)&&mP(e)}function z5(t){return uo(t)&&t.O_.length<10}function $5(t,e){t.O_.push(e);const n=Qi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function fP(t){return uo(t)&&!Qi(t).n_()&&t.O_.length>0}function mP(t){Qi(t).start()}async function q5(t){Qi(t).p_()}async function W5(t){const e=Qi(t);for(const n of t.O_)e.m_(n.mutations)}async function G5(t,e,n){const r=t.O_.shift(),s=hw.from(r,e,n);await hP(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await uu(t)}async function H5(t,e){e&&Qi(t).V_&&await async function(r,s){if(function(o){return xC(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Qi(r).s_(),await hP(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await uu(r)}}(t,e),fP(t)&&mP(t)}async function _x(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=uo(n);n.L_.add(3),await lu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Od(n)}async function fv(t,e){const n=Z(t);e?(n.L_.delete(2),await Od(n)):e||(n.L_.add(2),await lu(n),n.q_.set("Unknown"))}function cu(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new D5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:F5.bind(null,t),Ro:j5.bind(null,t),mo:U5.bind(null,t),d_:B5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Rw(t)?Aw(t):t.q_.set("Unknown")):(await t.K_.stop(),dP(t))})),t.K_}function Qi(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new O5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:q5.bind(null,t),mo:H5.bind(null,t),f_:W5.bind(null,t),g_:G5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await uu(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new kw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function du(t,e){if(Ct("AsyncQueue",`${e}: ${t}`),ao(t))return new q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=tc(),this.sortedSet=new et(this.comparator)}static emptySet(e){return new ml(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.W_=new et(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ul{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ul(e,n,ml.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Q5{constructor(){this.queries=Ex(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Ex(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new q(U.ABORTED,"Firestore shutting down"))}}function Ex(){return new zs(t=>uC(t),Rd)}async function Cw(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new K5,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=du(o,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Nw(n)}async function Pw(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Y5(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Nw(n)}function X5(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Nw(t){t.Y_.forEach(e=>{e.next()})}var mv,Ix;(Ix=mv||(mv={})).ea="default",Ix.Cache="cache";class Dw{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==mv.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.serializer=e}Es(e){return es(this.serializer,e)}ds(e){return e.metadata.exists?OC(this.serializer,e.document,!1):rt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Dt(e)}}class Z5{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Ce.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new Tx(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Es(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Ee()).add(i);n.set(o,a)}}return n}async complete(){const e=await A5(this.localStore,new Tx(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await R5(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function pP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.key=e}}class yP{constructor(e){this.key=e}}class vP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ee(),this.mutatedKeys=Ee(),this.Aa=dC(e),this.Ra=new ml(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new wx,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),g=kd(this.query,h)?h:null,T=!!p&&this.mutatedKeys.has(p.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?T!==_&&(r.track({type:3,doc:g}),b=!0):this.ga(p,g)||(r.track({type:2,doc:g}),b=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),b=!0):p&&!g&&(r.track({type:1,doc:p}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,T){const _=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return _(g)-_(T)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ul(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new yP(r))}),this.da.forEach(r=>{e.has(r)||n.push(new gP(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ul.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class e6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class t6{constructor(e){this.key=e,this.va=!1}}class n6{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new zs(a=>uC(a),Rd),this.Ma=new Map,this.xa=new Set,this.Oa=new et(te.comparator),this.Na=new Map,this.La=new _w,this.Ba={},this.ka=new Map,this.qa=ra.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function r6(t,e,n=!0){const r=sp(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await _P(r,e,n,!0),s}async function s6(t,e){const n=sp(t);await _P(n,e,!0,!1)}async function _P(t,e,n,r){const s=await Ml(t.localStore,wn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Ow(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&rp(t.remoteStore,s),a}async function Ow(t,e,n,r,s){t.Ka=(h,p,g)=>async function(_,b,w,v){let E=b.view.ma(w);E.ns&&(E=await lm(_.localStore,b.query,!1).then(({documents:S})=>b.view.ma(S,E)));const O=v&&v.targetChanges.get(b.targetId),L=v&&v.targetMismatches.get(b.targetId)!=null,j=b.view.applyChanges(E,_.isPrimaryClient,O,L);return pv(_,b.targetId,j.wa),j.snapshot}(t,h,p,g);const i=await lm(t.localStore,e,!0),o=new vP(e,i.Ts),a=o.ma(i.documents),l=Nd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);pv(t,n,c.wa);const d=new e6(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function i6(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Rd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&jl(r.remoteStore,s.targetId),Bl(r,s.targetId)}).catch(oo)):(Bl(r,s.targetId),await Fl(r.localStore,s.targetId,!0))}async function o6(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jl(n.remoteStore,r.targetId))}async function a6(t,e,n){const r=Fw(t);try{const s=await function(o,a){const l=Z(o),c=ft.now(),d=a.reduce((g,T)=>g.add(T.key),Ee());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=Bn(),_=Ee();return l.cs.getEntries(g,d).next(b=>{T=b,T.forEach((w,v)=>{v.isValidDocument()||(_=_.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,T)).next(b=>{h=b;const w=[];for(const v of a){const E=DB(v,h.get(v.key).overlayedDocument);E!=null&&w.push(new $s(v.key,E,Jk(E.value.mapValue),ht.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(b=>{p=b;const w=b.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(g,b.batchId,w)})}).then(()=>({batchId:p.batchId,changes:fC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new et(ye)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await qs(r,s.changes),await uu(r.remoteStore)}catch(s){const i=du(s,"Failed to persist write");n.reject(i)}}async function wP(t,e){const n=Z(t);try{const r=await b5(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ue(o.va):s.removedDocuments.size>0&&(ue(o.va),o.va=!1))}),await qs(n,r,e)}catch(r){await oo(r)}}function xx(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&Nw(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function l6(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new et(te.comparator);o=o.insert(i,rt.newNoDocument(i,fe.min()));const a=Ee().add(i),l=new Pd(fe.min(),new Map,new et(ye),o,a);await wP(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Mw(r)}else await Fl(r.localStore,e,!1).then(()=>Bl(r,e,n)).catch(oo)}async function u6(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await x5(n.localStore,e);Lw(n,r,null),Vw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qs(n,s)}catch(s){await oo(s)}}async function c6(t,e,n){const r=Z(t);try{const s=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ue(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Lw(r,e,n),Vw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qs(r,s)}catch(s){await oo(s)}}async function d6(t,e){const n=Z(t);uo(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=du(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Vw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Lw(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Bl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||EP(t,r)})}function EP(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(jl(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mw(t))}function pv(t,e,n){for(const r of n)r instanceof gP?(t.La.addReference(r.key,e),h6(t,r)):r instanceof yP?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||EP(t,r.key)):ie()}function h6(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Mw(t))}function Mw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Ce.fromString(e)),r=t.qa.next();t.Na.set(r,new t6(n)),t.Oa=t.Oa.insert(n,r),rp(t.remoteStore,new xs(wn(iu(n.path)),r,"TargetPurposeLimboResolution",jn.oe))}}async function qs(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Tw.Wi(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=Z(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,p=>V.forEach(p.$i,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>V.forEach(p.Ui,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!ao(h))throw h;W("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const g=d.os.get(p),T=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(T);d.os=d.os.insert(p,_)}}}(r.localStore,i))}async function f6(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await tP(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qs(n,r.hs)}}function m6(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return Ee().add(r.key);{let s=Ee();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}async function p6(t,e){const n=Z(t),r=await lm(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&pv(n,e.targetId,s.wa),s}async function g6(t,e){const n=Z(t);return iP(n.localStore,e).then(r=>qs(n,r))}async function y6(t,e,n,r){const s=Z(t),i=await function(a,l){const c=Z(a),d=Z(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):V.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await uu(s.remoteStore):n==="acknowledged"||n==="rejected"?(Lw(s,e,r||null),Vw(s,e),function(a,l){Z(Z(a).mutationQueue).On(l)}(s.localStore,e)):ie(),await qs(s,i)):W("SyncEngine","Cannot apply mutation batch with id: "+e)}async function v6(t,e){const n=Z(t);if(sp(n),Fw(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await bx(n,r.toArray());n.Qa=!0,await fv(n.remoteStore,!0);for(const i of s)rp(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Bl(n,o),Fl(n.localStore,o,!0))),jl(n.remoteStore,o)}),await s,await bx(n,r),function(o){const a=Z(o);a.Na.forEach((l,c)=>{jl(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new et(te.comparator)}(n),n.Qa=!1,await fv(n.remoteStore,!1)}}async function bx(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Ml(r.localStore,wn(l[0]));for(const c of l){const d=r.Fa.get(c),h=await p6(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await sP(r.localStore,o);a=await Ml(r.localStore,c),await Ow(r,IP(c),o,!1,a.resumeToken)}s.push(a)}return r.Ca.d_(i),s}function IP(t){return oC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _6(t){return function(n){return Z(Z(n).persistence).Qi()}(Z(t).localStore)}async function w6(t,e,n,r){const s=Z(t);if(s.Qa)return void W("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await iP(s.localStore,cC(i[0])),a=Pd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Et.EMPTY_BYTE_STRING);await qs(s,o,a);break}case"rejected":await Fl(s.localStore,e,!0),Bl(s,e,r);break;default:ie()}}async function E6(t,e,n){const r=sp(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){W("SyncEngine","Adding an already active target "+s);continue}const i=await sP(r.localStore,s),o=await Ml(r.localStore,i);await Ow(r,IP(i),o.targetId,!1,o.resumeToken),rp(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await Fl(r.localStore,s,!1).then(()=>{jl(r.remoteStore,s),Bl(r,s)}).catch(oo)}}function sp(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l6.bind(null,e),e.Ca.d_=Y5.bind(null,e.eventManager),e.Ca.$a=X5.bind(null,e.eventManager),e}function Fw(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c6.bind(null,e),e}function I6(t,e,n){const r=Z(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(g,T){const _=Z(g),b=Dt(T.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",w=>_.Gr.getBundleMetadata(w,T.id)).then(w=>!!w&&w.createTime.compareTo(b)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(pP(l));const c=new Z5(l,i.localStore,o.serializer);let d=await o.Ua();for(;d;){const p=await c.la(d);p&&a._updateProgress(p),d=await o.Ua()}const h=await c.complete();return await qs(i,h.Ia,void 0),await function(g,T){const _=Z(g);return _.persistence.runTransaction("Save bundle","readwrite",b=>_.Gr.saveBundleMetadata(b,T))}(i.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return rr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Yi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eP(this.persistence,new ZC,e.initialUser,this.serializer)}Ga(e){return new ww(np.Zr,this.serializer)}Wa(e){return new aP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yi.provider={build:()=>new Yi};class T6 extends Yi{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){ue(this.persistence.referenceDelegate instanceof am);const r=this.persistence.referenceDelegate.garbageCollector;return new KC(r,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new ww(r=>am.Zr(r,n),this.serializer)}}class jw extends Yi{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Fw(this.Ja.syncEngine),await uu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return eP(this.persistence,new ZC,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new KC(r,e.asyncQueue,n)}Ha(e,n){const r=new q4(n,this.persistence);return new $4(e.asyncQueue,r)}Ga(e){const n=Iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new Ew(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,lP(),df(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new aP}}class TP extends jw{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Tg&&(this.sharedClientState.syncEngine={no:y6.bind(null,n),ro:w6.bind(null,n),io:E6.bind(null,n),Qi:_6.bind(null,n),eo:g6.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await v6(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=lP();if(!Tg.D(n))throw new q(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Xi{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f6.bind(null,this.syncEngine),await fv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q5}()}createDatastore(e){const n=Dd(e.databaseInfo.databaseId),r=function(i){return new N5(i)}(e.databaseInfo);return function(i,o,a,l){return new V5(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new M5(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>xx(this.syncEngine,n,0),function(){return vx.D()?new vx:new k5}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new n6(s,i,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await lu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xi.provider={build:()=>new Xi};function Sx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ct("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new Jt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new J5(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=Z(s),a={documents:i.map(h=>sd(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ce.emptyPath(),a,i.length),c=new Map;l.forEach(h=>{const p=zB(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return i.forEach(h=>{const p=c.get(h.toString());ue(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new au(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=te.fromPath(r);this.mutations.push(new cw(s,this.precondition(s)))}),await async function(r,s){const i=Z(r),o={writes:s.map(a=>id(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,Ce.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie();n=fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(fe.min())?ht.exists(!1):ht.updateTime(n):ht.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(fe.min()))throw new q(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ht.updateTime(n)}return ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new bw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new b6(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Sd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Qt.UNAUTHENTICATED,this.clientId=nw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=du(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bg(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await tP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ax(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Uw(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_x(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_x(e.remoteStore,s)),t._onlineComponents=e}async function Uw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await bg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;rr("Error using user provided cache. Falling back to memory cache: "+n),await bg(t,new Yi)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await bg(t,new Yi);return t._offlineComponents}async function op(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Ax(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Ax(t,new Xi))),t._onlineComponents}function xP(t){return Uw(t).then(e=>e.persistence)}function hu(t){return Uw(t).then(e=>e.localStore)}function bP(t){return op(t).then(e=>e.remoteStore)}function Bw(t){return op(t).then(e=>e.syncEngine)}function SP(t){return op(t).then(e=>e.datastore)}async function zl(t){const e=await op(t),n=e.eventManager;return n.onListen=r6.bind(null,e.syncEngine),n.onUnlisten=i6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=s6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=o6.bind(null,e.syncEngine),n}function R6(t){return t.asyncQueue.enqueue(async()=>{const e=await xP(t),n=await bP(t);return e.setNetworkEnabled(!0),function(s){const i=Z(s);return i.L_.delete(0),Od(i)}(n)})}function k6(t){return t.asyncQueue.enqueue(async()=>{const e=await xP(t),n=await bP(t);return e.setNetworkEnabled(!1),async function(s){const i=Z(s);i.L_.add(0),await lu(i),i.q_.set("Offline")}(n)})}function C6(t,e){const n=new Jt;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=Z(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=du(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await hu(t),e,n)),n.promise}function AP(t,e,n={}){const r=new Jt;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new ip({next:p=>{d.Za(),o.enqueueAndForget(()=>Pw(i,h));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Dw(iu(a.path),d,{includeMetadataChanges:!0,_a:!0});return Cw(i,h)}(await zl(t),t.asyncQueue,e,n,r)),r.promise}function P6(t,e){const n=new Jt;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await lm(s,i,!0),l=new vP(i,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=du(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await hu(t),e,n)),n.promise}function RP(t,e,n={}){const r=new Jt;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new ip({next:p=>{d.Za(),o.enqueueAndForget(()=>Pw(i,h)),p.fromCache&&l.source==="server"?c.reject(new q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Dw(a,d,{includeMetadataChanges:!0,_a:!0});return Cw(i,h)}(await zl(t),t.asyncQueue,e,n,r)),r.promise}function N6(t,e,n){const r=new Jt;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await SP(t);r.resolve(async function(o,a,l){var c;const d=Z(o),{request:h,ut:p,parent:g}=LC(d.serializer,aC(a),l);d.connection.Fo||delete h.parent;const T=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,g,h,1)).filter(b=>!!b.result);ue(T.length===1);const _=(c=T[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(_).reduce((b,w)=>(b[p[w]]=_[w],b),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function D6(t,e){const n=new ip(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){Z(s).Y_.add(i),i.next()}(await zl(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){Z(s).Y_.delete(i)}(await zl(t),n))}}function O6(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?SC().encode(o):o,function(d,h){return new x6(d,h)}(function(d,h){if(d instanceof Uint8Array)return Sx(d,h);if(d instanceof ArrayBuffer)return Sx(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Dd(e));t.asyncQueue.enqueueAndForget(async()=>{I6(await Bw(t),s,r)})}function V6(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=Z(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Gr.getNamedQuery(o,s))}(await hu(t),e))}function L6(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=Z(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,p,g,T,_){h=[...h],p=[...p],h.sort(g),p.sort(g);const b=h.length,w=p.length;let v=0,E=0;for(;v<w&&E<b;){const O=g(h[E],p[v]);O<0?_(h[E++]):O>0?T(p[v++]):(v++,E++)}for(;v<w;)T(p[v++]);for(;E<b;)_(h[E++])}(c,s,j4,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>V.waitFor(a)))}(await hu(t),e))}function M6(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){Z(r).ss.zi=s}(await hu(t),e))}function F6(t){return t.asyncQueue.enqueue(async()=>function(n){const r=Z(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await hu(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t,e,n){if(!n)throw new q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CP(t,e,n,r){if(e===!0&&r===!0)throw new q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kx(t){if(!te.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cx(t){if(te.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ap(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function xe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ap(t);throw new q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function PP(t,e){if(e<=0)throw new q(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Px({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Px(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ok;switch(r.type){case"firstParty":return new O4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Rx.get(n);r&&(W("ComponentProvider","Removing Datastore"),Rx.delete(n),r.terminate())}(this),Promise.resolve()}}function NP(t,e,n,r={}){var s;const i=(t=xe(t,Vd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Qt.MOCK_USER;else{a=dR(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Qt(c)}t._authCredentials=new P4(new Dk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zt(this.firestore,e,this._query)}}class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class Pr extends Zt{constructor(e,n,r){super(e,n,iu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new te(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function St(t,e,...n){if(t=ce(t),zw("collection","path",e),t instanceof Vd){const r=Ce.fromString(e,...n);return Cx(r),new Pr(t,null,r)}{if(!(t instanceof At||t instanceof Pr))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Cx(r),new Pr(t.firestore,null,r)}}function j6(t,e){if(t=xe(t,Vd),zw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zt(t,null,function(r){return new Bs(Ce.emptyPath(),r)}(e))}function ln(t,e,...n){if(t=ce(t),arguments.length===1&&(e=nw.newId()),zw("doc","path",e),t instanceof Vd){const r=Ce.fromString(e,...n);return kx(r),new At(t,null,new te(r))}{if(!(t instanceof At||t instanceof Pr))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return kx(r),new At(t.firestore,t instanceof Pr?t.converter:null,new te(r))}}function U6(t,e){return t=ce(t),e=ce(e),(t instanceof At||t instanceof Pr)&&(e instanceof At||e instanceof Pr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function $w(t,e){return t=ce(t),e=ce(e),t instanceof Zt&&e instanceof Zt&&t.firestore===e.firestore&&Rd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bw(this,"async_queue_retry"),this.Vu=()=>{const r=df();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=df();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ao(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ct("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=kw.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class DP{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=-1;class Ke extends Vd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Nx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nx(e),this._firestoreClient=void 0,await e}}}function z6(t,e,n){n||(n="(default)");const r=Zl(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(zi(i,e))return s;throw new q(U.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new q(U.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function OP(t,e){const n=typeof t=="object"?t:L_(),r=typeof t=="string"?t:e||"(default)",s=Zl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=lR("firestore");i&&NP(s,...i)}return s}function mt(t){if(t._terminated)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VP(t),t._firestoreClient}function VP(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new hB(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kP(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new A6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function $6(t,e){rr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return LP(t,Xi.provider,{build:r=>new jw(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function q6(t){rr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();LP(t,Xi.provider,{build:n=>new TP(n,e.cacheSizeBytes)})}function LP(t,e,n){if((t=xe(t,Ke))._firestoreClient||t._terminated)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},VP(t)}function W6(t){if(t._initialized&&!t._terminated)throw new q(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Zr.D())return Promise.resolve();const s=r+"main";await Zr.delete(s)}(Iw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function G6(t){return function(n){const r=new Jt;return n.asyncQueue.enqueueAndForget(async()=>d6(await Bw(n),r)),r.promise}(mt(t=xe(t,Ke)))}function H6(t){return R6(mt(t=xe(t,Ke)))}function K6(t){return k6(mt(t=xe(t,Ke)))}function Q6(t){return jM(t.app,"firestore",t._databaseId.database),t._delete()}function Y6(t,e){const n=mt(t=xe(t,Ke)),r=new DP;return O6(n,t._databaseId,e,r),r}function X6(t,e){return V6(mt(t=xe(t,Ke)),e).then(n=>n?new Zt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class MP{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ji(Et.fromBase64String(e))}catch(n){throw new q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ji(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function J6(){return new co("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=/^__.*__$/;class e9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $s(e,this.data,this.fieldMask,n,this.fieldTransforms):new ou(e,this.data,n,this.fieldTransforms)}}class FP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class up{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new up(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jP(this.Cu)&&Z6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class t9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dd(e)}Qu(e,n,r,s=!1){return new up({Cu:e,methodName:n,qu:r,path:st.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ma(t){const e=t._freezeSettings(),n=Dd(t._databaseId);return new t9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cp(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Yw("Data must be an object, but it was:",o,r);const a=zP(r,o);let l,c;if(i.merge)l=new Un(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=od(e,h,n);if(!o.contains(p))throw new q(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);qP(d,p)||d.push(p)}l=new Un(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new e9(new an(a),l,c)}class Md extends ho{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Md}}function UP(t,e,n){return new up({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class qw extends ho{_toFieldTransform(e){return new Cd(e.path,new Ol)}isEqual(e){return e instanceof qw}}class Ww extends ho{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=UP(this,e,!0),r=this.Ku.map(i=>pa(i,n)),s=new Zo(r);return new Cd(e.path,s)}isEqual(e){return e instanceof Ww&&zi(this.Ku,e.Ku)}}class Gw extends ho{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=UP(this,e,!0),r=this.Ku.map(i=>pa(i,n)),s=new ea(r);return new Cd(e.path,s)}isEqual(e){return e instanceof Gw&&zi(this.Ku,e.Ku)}}class Hw extends ho{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Vl(e.serializer,gC(e.serializer,this.$u));return new Cd(e.path,n)}isEqual(e){return e instanceof Hw&&this.$u===e.$u}}function Kw(t,e,n,r){const s=t.Qu(1,e,n);Yw("Data must be an object, but it was:",s,r);const i=[],o=an.empty();lo(r,(l,c)=>{const d=dp(e,l,n);c=ce(c);const h=s.Nu(d);if(c instanceof Md)i.push(d);else{const p=pa(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new Un(i);return new FP(o,a,s.fieldTransforms)}function Qw(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[od(e,r,n)],l=[s];if(i.length%2!=0)throw new q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(od(e,i[p])),l.push(i[p+1]);const c=[],d=an.empty();for(let p=a.length-1;p>=0;--p)if(!qP(c,a[p])){const g=a[p];let T=l[p];T=ce(T);const _=o.Nu(g);if(T instanceof Md)c.push(g);else{const b=pa(T,_);b!=null&&(c.push(g),d.set(g,b))}}const h=new Un(c);return new FP(d,h,o.fieldTransforms)}function BP(t,e,n,r=!1){return pa(n,t.Qu(r?4:3,e))}function pa(t,e){if($P(t=ce(t)))return Yw("Unsupported field value:",e,t),zP(t,e);if(t instanceof ho)return function(r,s){if(!jP(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=pa(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ft.fromDate(r);return{timestampValue:Ll(s.serializer,i)}}if(r instanceof ft){const i=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ll(s.serializer,i)}}if(r instanceof lp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ji)return{bytesValue:kC(s.serializer,r._byteString)};if(r instanceof At){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ld)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return uw(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ap(r)}`)}(t,e)}function zP(t,e){const n={};return Kk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(r,s)=>{const i=pa(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $P(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof lp||t instanceof Ji||t instanceof At||t instanceof ho||t instanceof Ld)}function Yw(t,e,n){if(!$P(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ap(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function od(t,e,n){if((e=ce(e))instanceof co)return e._internalPath;if(typeof e=="string")return dp(t,e);throw hm("Field path arguments must be of type string or ",t,!1,void 0,n)}const n9=new RegExp("[~\\*/\\[\\]]");function dp(t,e,n){if(e.search(n9)>=0)throw hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new co(...e.split("."))._internalPath}catch{throw hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new q(U.INVALID_ARGUMENT,a+t+l)}function qP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r9 extends ad{data(){return super.data()}}function hp(t,e){return typeof e=="string"?dp(t,e):e instanceof co?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xw{}class fu extends Xw{}function Ft(t,e,...n){let r=[];e instanceof Xw&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof ga).length,a=i.filter(l=>l instanceof mu).length;if(o>1||o>0&&a>0)throw new q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class mu extends fu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new mu(e,n,r)}_apply(e){const n=this._parse(e);return HP(e._query,n),new Zt(e.firestore,e.converter,sv(e._query,n))}_parse(e){const n=ma(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ox(h,d);const g=[];for(const T of h)g.push(Dx(l,i,T));p={arrayValue:{values:g}}}else p=Dx(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ox(h,d),p=BP(a,o,h,d==="in"||d==="not-in");return Pe.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bt(t,e,n){const r=e,s=hp("where",t);return mu._create(s,r,n)}class ga extends Xw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ga(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:We.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)HP(o,l),o=sv(o,l)}(e._query,n),new Zt(e.firestore,e.converter,sv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function s9(...t){return t.forEach(e=>KP("or",e)),ga._create("or",t)}function i9(...t){return t.forEach(e=>KP("and",e)),ga._create("and",t)}class fp extends fu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rd(i,o)}(e._query,this._field,this._direction);return new Zt(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Bs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Jw(t,e="asc"){const n=e,r=hp("orderBy",t);return fp._create(r,n)}class Fd extends fu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Fd(e,n,r)}_apply(e){return new Zt(e.firestore,e.converter,nm(e._query,this._limit,this._limitType))}}function dr(t){return PP("limit",t),Fd._create("limit",t,"F")}function o9(t){return PP("limitToLast",t),Fd._create("limitToLast",t,"L")}class jd extends fu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new jd(e,n,r)}_apply(e){const n=GP(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(s,i){return new Bs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function a9(...t){return jd._create("startAt",t,!0)}function l9(...t){return jd._create("startAfter",t,!1)}class Ud extends fu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ud(e,n,r)}_apply(e){const n=GP(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(s,i){return new Bs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function u9(...t){return Ud._create("endBefore",t,!1)}function c9(...t){return Ud._create("endAt",t,!0)}function GP(t,e,n,r){if(n[0]=ce(n[0]),n[0]instanceof ad)return function(i,o,a,l,c){if(!l)throw new q(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of fl(i))if(h.field.isKeyField())d.push(Xo(o,l.key));else{const p=l.data.field(h.field);if(Km(p))throw new q(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=h.field.canonicalString();throw new q(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new Ki(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=ma(t.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new q(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let T=0;T<d.length;T++){const _=d[T];if(p[T].field.isKeyField()){if(typeof _!="string")throw new q(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof _}`);if(!aw(o)&&_.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${_}' contains a slash.`);const b=o.path.child(Ce.fromString(_));if(!te.isDocumentKey(b))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const w=new te(b);g.push(Xo(a,w))}else{const b=BP(l,c,_);g.push(b)}}return new Ki(g,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Dx(t,e,n){if(typeof(n=ce(n))=="string"){if(n==="")throw new q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aw(e)&&n.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!te.isDocumentKey(r))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xo(t,new te(r))}if(n instanceof At)return Xo(t,n._key);throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(n)}.`)}function Ox(t,e){if(!Array.isArray(t)||t.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HP(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function KP(t,e){if(!(e instanceof mu||e instanceof ga))throw new q(U.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Zw{convertValue(e,n="none"){switch(Gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ct(o.doubleValue));return new Ld(i)}convertGeoPoint(e){return new lp(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ed(e));default:return null}}convertTimestamp(e){const n=Ls(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);ue(UC(r));const s=new Wi(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Ct(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class d9 extends Zw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t){return new $l("sum",od("sum",t))}function f9(t){return new $l("avg",od("average",t))}function QP(){return new $l("count")}function m9(t,e){var n,r;return t instanceof $l&&e instanceof $l&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function p9(t,e){return $w(t.query,e.query)&&zi(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sa extends ad{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ic extends sa{data(e={}){return super.data(e)}}class ia{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ei(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ic(this._firestore,this._userDataWriter,r.key,r,new Ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ic(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ei(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ic(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ei(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:g9(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function g9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function y9(t,e){return t instanceof sa&&e instanceof sa?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ia&&e instanceof ia&&t._firestore===e._firestore&&$w(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){t=xe(t,At);const e=xe(t.firestore,Ke);return AP(mt(e),t._key).then(n=>t0(e,t,n))}class fo extends Zw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function v9(t){t=xe(t,At);const e=xe(t.firestore,Ke),n=mt(e),r=new fo(e);return C6(n,t._key).then(s=>new sa(e,r,t._key,s,new Ei(s!==null&&s.hasLocalMutations,!0),t.converter))}function _9(t){t=xe(t,At);const e=xe(t.firestore,Ke);return AP(mt(e),t._key,{source:"server"}).then(n=>t0(e,t,n))}function Mn(t){t=xe(t,Zt);const e=xe(t.firestore,Ke),n=mt(e),r=new fo(e);return WP(t._query),RP(n,t._query).then(s=>new ia(e,r,t,s))}function w9(t){t=xe(t,Zt);const e=xe(t.firestore,Ke),n=mt(e),r=new fo(e);return P6(n,t._query).then(s=>new ia(e,r,t,s))}function E9(t){t=xe(t,Zt);const e=xe(t.firestore,Ke),n=mt(e),r=new fo(e);return RP(n,t._query,{source:"server"}).then(s=>new ia(e,r,t,s))}function e0(t,e,n){t=xe(t,At);const r=xe(t.firestore,Ke),s=mp(t.converter,e,n);return pu(r,[cp(ma(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ht.none())])}function ql(t,e,n,...r){t=xe(t,At);const s=xe(t.firestore,Ke),i=ma(s);let o;return o=typeof(e=ce(e))=="string"||e instanceof co?Qw(i,"updateDoc",t._key,e,n,r):Kw(i,"updateDoc",t._key,e),pu(s,[o.toMutation(t._key,ht.exists(!0))])}function ld(t){return pu(xe(t.firestore,Ke),[new au(t._key,ht.none())])}function gp(t,e){const n=xe(t.firestore,Ke),r=ln(t),s=mp(t.converter,e);return pu(n,[cp(ma(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ht.exists(!1))]).then(()=>r)}function I9(t,...e){var n,r,s;t=ce(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gv(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gv(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,d;if(t instanceof At)c=xe(t.firestore,Ke),d=iu(t._key.path),l={next:h=>{e[o]&&e[o](t0(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=xe(t,Zt);c=xe(h.firestore,Ke),d=h._query;const p=new fo(c);l={next:g=>{e[o]&&e[o](new ia(c,p,h,g))},error:e[o+1],complete:e[o+2]},WP(t._query)}return function(p,g,T,_){const b=new ip(_),w=new Dw(g,b,T);return p.asyncQueue.enqueueAndForget(async()=>Cw(await zl(p),w)),()=>{b.Za(),p.asyncQueue.enqueueAndForget(async()=>Pw(await zl(p),w))}}(mt(c),d,a,l)}function T9(t,e){return D6(mt(t=xe(t,Ke)),gv(e)?e:{next:e})}function pu(t,e){return function(r,s){const i=new Jt;return r.asyncQueue.enqueueAndForget(async()=>a6(await Bw(r),s,i)),i.promise}(mt(t),e)}function t0(t,e,n){const r=n.docs.get(e._key),s=new fo(t);return new sa(t,s,e._key,r,new Ei(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(t){return YP(t,{count:QP()})}function YP(t,e){const n=xe(t.firestore,Ke),r=mt(n),s=Hk(e,(i,o)=>new TC(o,i.aggregateType,i._internalFieldPath));return N6(r,t._query,s).then(i=>function(a,l,c){const d=new fo(a);return new MP(l,d,c)}(n,t,i))}class b9{constructor(e){this.kind="memory",this._onlineComponentProvider=Xi.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Yi.provider}toJSON(){return{kind:this.kind}}}class S9{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=XP(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class A9{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Yi.provider}toJSON(){return{kind:this.kind}}}class R9{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new T6(e)}}toJSON(){return{kind:this.kind}}}function k9(){return new A9}function C9(t){return new R9(t==null?void 0:t.cacheSizeBytes)}function P9(t){return new b9(t)}function N9(t){return new S9(t)}class D9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Xi.provider,this._offlineComponentProvider={build:n=>new jw(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class O9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Xi.provider,this._offlineComponentProvider={build:n=>new TP(n,e==null?void 0:e.cacheSizeBytes)}}}function XP(t){return new D9(t==null?void 0:t.forceOwnership)}function V9(){return new O9}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ma(e)}set(e,n,r){this._verifyNotCommitted();const s=mi(e,this._firestore),i=mp(s.converter,n,r),o=cp(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,ht.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=mi(e,this._firestore);let o;return o=typeof(n=ce(n))=="string"||n instanceof co?Qw(this._dataReader,"WriteBatch.update",i._key,n,r,s):Kw(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,ht.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mi(e,this._firestore);return this._mutations=this._mutations.concat(new au(n._key,ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mi(t,e){if((t=ce(t)).firestore!==e)throw new q(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ma(n)}get(n){const r=mi(n,this._firestore),s=new d9(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ie();const o=i[0];if(o.isFoundDocument())return new ad(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new ad(this._firestore,s,r._key,null,r.converter);throw ie()})}set(n,r,s){const i=mi(n,this._firestore),o=mp(i.converter,r,s),a=cp(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=mi(n,this._firestore);let a;return a=typeof(r=ce(r))=="string"||r instanceof co?Qw(this._dataReader,"Transaction.update",o._key,r,s,i):Kw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=mi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=mi(e,this._firestore),r=new fo(this._firestore);return super.get(e).then(s=>new sa(this._firestore,r,n._key,s._document,new Ei(!1,!1),n.converter))}}function M9(t,e,n){t=xe(t,Ke);const r=Object.assign(Object.assign({},L9),n);return function(i){if(i.maxAttempts<1)throw new q(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new Jt;return i.asyncQueue.enqueueAndForget(async()=>{const c=await SP(i);new S6(i.asyncQueue,c,a,o,l).au()}),l.promise}(mt(t),s=>e(new ZP(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(){return new Md("deleteField")}function bn(){return new qw("serverTimestamp")}function j9(...t){return new Ww("arrayUnion",t)}function U9(...t){return new Gw("arrayRemove",t)}function B9(t){return new Hw("increment",t)}function z9(t){return new Ld(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(t){return mt(t=xe(t,Ke)),new JP(t,e=>pu(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t,e){const n=mt(t=xe(t,Ke));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return rr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new q(U.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=Vx(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const p=dp("setIndexConfiguration",Vx(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new zo(p,2)):h.order==="ASCENDING"?d.push(new zo(p,0)):h.order==="DESCENDING"&&d.push(new zo(p,1))}a.push(new Cl(Cl.UNKNOWN_ID,c,d,Pl.empty()))}return a}(e);return L6(n,r)}function Vx(t,e){if(typeof t[e]!="string")throw new q(U.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function W9(t){var e;t=xe(t,Ke);const n=Lx.get(t);if(n)return n;if(((e=mt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new eN(t);return Lx.set(t,r),r}function G9(t){tN(t,!0)}function H9(t){tN(t,!1)}function K9(t){F6(mt(t._firestore)).then(e=>W("deleting all persistent cache indexes succeeded")).catch(e=>rr("deleting all persistent cache indexes failed",e))}function tN(t,e){M6(mt(t._firestore),e).then(n=>W(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>rr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const Lx=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q9(t){var e;const n=(e=mt(xe(t.firestore,Ke))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:Zm(n,wn(t._query))._t}function Y9(t,e){var n;const r=Hk(e,(i,o)=>new TC(o,i.aggregateType,i._internalFieldPath)),s=(n=mt(xe(t.firestore,Ke))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return s===void 0?null:LC(s,aC(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return n0.instance.onExistenceFilterMismatch(e)}}class n0{constructor(){this.Uu=new Map}static get instance(){return Rh||(Rh=new n0,function(n){if(rm)throw new Error("a TestingHooksSpi instance is already set");rm=n}(Rh)),Rh}et(e){this.Uu.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Uu;return r.set(n,e),()=>r.delete(n)}}let Rh=null;(function(e,n=!0){(function(s){su=s})(ha),Yo(new $i("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ke(new N4(r.getProvider("auth-internal")),new V4(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wi(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Jr(bT,"4.7.3",e),Jr(bT,"4.7.3","esm2017")})();const J9=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Zw,AggregateField:$l,AggregateQuerySnapshot:MP,Bytes:Ji,CACHE_SIZE_UNLIMITED:B6,CollectionReference:Pr,DocumentReference:At,DocumentSnapshot:sa,FieldPath:co,FieldValue:ho,Firestore:Ke,FirestoreError:q,GeoPoint:lp,LoadBundleTask:DP,PersistentCacheIndexManager:eN,Query:Zt,QueryCompositeFilterConstraint:ga,QueryConstraint:fu,QueryDocumentSnapshot:Ic,QueryEndAtConstraint:Ud,QueryFieldFilterConstraint:mu,QueryLimitConstraint:Fd,QueryOrderByConstraint:fp,QuerySnapshot:ia,QueryStartAtConstraint:jd,SnapshotMetadata:Ei,Timestamp:ft,Transaction:ZP,VectorValue:Ld,WriteBatch:JP,_AutoId:nw,_ByteString:Et,_DatabaseId:Wi,_DocumentKey:te,_EmptyAppCheckTokenProvider:L4,_EmptyAuthCredentialsProvider:Ok,_FieldPath:st,_TestingHooks:X9,_cast:xe,_debugAssert:C4,_internalAggregationQueryToProtoRunAggregationQueryRequest:Y9,_internalQueryToProtoQueryTarget:Q9,_isBase64Available:cB,_logWarn:rr,_validateIsNotUsedTogether:CP,addDoc:gp,aggregateFieldEqual:m9,aggregateQuerySnapshotEqual:p9,and:i9,arrayRemove:U9,arrayUnion:j9,average:f9,clearIndexedDbPersistence:W6,collection:St,collectionGroup:j6,connectFirestoreEmulator:NP,count:QP,deleteAllPersistentCacheIndexes:K9,deleteDoc:ld,deleteField:F9,disableNetwork:K6,disablePersistentCacheIndexAutoCreation:H9,doc:ln,documentId:J6,enableIndexedDbPersistence:$6,enableMultiTabIndexedDbPersistence:q6,enableNetwork:H6,enablePersistentCacheIndexAutoCreation:G9,endAt:c9,endBefore:u9,ensureFirestoreConfigured:mt,executeWrite:pu,getAggregateFromServer:YP,getCountFromServer:x9,getDoc:pp,getDocFromCache:v9,getDocFromServer:_9,getDocs:Mn,getDocsFromCache:w9,getDocsFromServer:E9,getFirestore:OP,getPersistentCacheIndexManager:W9,increment:B9,initializeFirestore:z6,limit:dr,limitToLast:o9,loadBundle:Y6,memoryEagerGarbageCollector:k9,memoryLocalCache:P9,memoryLruGarbageCollector:C9,namedQuery:X6,onSnapshot:I9,onSnapshotsInSync:T9,or:s9,orderBy:Jw,persistentLocalCache:N9,persistentMultipleTabManager:V9,persistentSingleTabManager:XP,query:Ft,queryEqual:$w,refEqual:U6,runTransaction:M9,serverTimestamp:bn,setDoc:e0,setIndexConfiguration:q9,setLogLevel:k4,snapshotEqual:y9,startAfter:l9,startAt:a9,sum:h9,terminate:Q6,updateDoc:ql,vector:z9,waitForPendingWrites:G6,where:bt,writeBatch:$9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="firebasestorage.googleapis.com",rN="storageBucket",Z9=2*60*1e3,ez=10*60*1e3,tz=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It extends ss{constructor(e,n,r=0){super(Sg(e),`Firebase Storage: ${n} (${Sg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,It.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ot||(ot={}));function Sg(t){return"storage/"+t}function r0(){const t="An unknown error occurred, please check the error payload for server response.";return new It(ot.UNKNOWN,t)}function nz(t){return new It(ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function rz(t){return new It(ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sz(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new It(ot.UNAUTHENTICATED,t)}function iz(){return new It(ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function oz(t){return new It(ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function sN(){return new It(ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iN(){return new It(ot.CANCELED,"User canceled the upload/download.")}function az(t){return new It(ot.INVALID_URL,"Invalid URL '"+t+"'.")}function lz(t){return new It(ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function uz(){return new It(ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rN+"' property when initializing the app?")}function oN(){return new It(ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cz(){return new It(ot.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function dz(){return new It(ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hz(t){return new It(ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yv(t){return new It(ot.INVALID_ARGUMENT,t)}function aN(){return new It(ot.APP_DELETED,"The Firebase app was deleted.")}function fz(t){return new It(ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tc(t,e){return new It(ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $u(t){throw new It(ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jn.makeFromUrl(e,n)}catch{return new Jn(e,"")}if(r.path==="")return r;throw lz(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),T={bucket:1,path:3},_=n===nN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",w=new RegExp(`^https?://${_}/${s}/${b}`,"i"),E=[{regex:a,indices:l,postModify:i},{regex:g,indices:T,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let O=0;O<E.length;O++){const L=E[O],j=L.regex.exec(e);if(j){const S=j[L.indices.bucket];let I=j[L.indices.path];I||(I=""),r=new Jn(S,I),L.postModify(r);break}}if(r==null)throw az(e);return r}}class mz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...b){c||(c=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(g,l())},b)}function p(){i&&clearTimeout(i)}function g(b,...w){if(c){p();return}if(b){p(),d.call(null,b,...w);return}if(l()||o){p(),d.call(null,b,...w);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let T=!1;function _(b){T||(T=!0,p(),!c&&(s!==null?(b||(a=2),clearTimeout(s),h(0)):b||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function gz(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(t){return t!==void 0}function vz(t){return typeof t=="function"}function _z(t){return typeof t=="object"&&!Array.isArray(t)}function yp(t){return typeof t=="string"||t instanceof String}function Mx(t){return s0()&&t instanceof Blob}function s0(){return typeof Blob<"u"}function Fx(t,e,n,r){if(r<e)throw yv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw yv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function lN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var $o;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($o||($o={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,T)=>{this.resolve_=g,this.reject_=T,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new kh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===$o.NO_ERROR,l=i.getStatus();if(!a||uN(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===$o.ABORT;r(!1,new kh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new kh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());yz(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=r0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?aN():iN();o(l)}else{const l=sN();o(l)}};this.canceled_?n(!1,new kh(!1,null,!0)):this.backoffId_=pz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Ez(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Iz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Tz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function xz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function bz(t,e,n,r,s,i,o=!0){const a=lN(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Tz(c,e),Ez(c,n),Iz(c,i),xz(c,r),new wz(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Az(...t){const e=Sz();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(s0())return new Blob(t);throw new It(ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Rz(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kz(t){if(typeof atob>"u")throw hz("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ag{constructor(e,n){this.data=e,this.contentType=n||null}}function Cz(t,e){switch(t){case Kr.RAW:return new Ag(cN(e));case Kr.BASE64:case Kr.BASE64URL:return new Ag(dN(t,e));case Kr.DATA_URL:return new Ag(Nz(e),Dz(e))}throw r0()}function cN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Pz(t){let e;try{e=decodeURIComponent(t)}catch{throw Tc(Kr.DATA_URL,"Malformed data URL.")}return cN(e)}function dN(t,e){switch(t){case Kr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Tc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Kr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Tc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=kz(e)}catch(s){throw s.message.includes("polyfill")?s:Tc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class hN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Tc(Kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Oz(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Nz(t){const e=new hN(t);return e.base64?dN(Kr.BASE64,e.rest):Pz(e.rest)}function Dz(t){return new hN(t).contentType}function Oz(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){let r=0,s="";Mx(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Mx(this.data_)){const r=this.data_,s=Rz(r,e,n);return s===null?null:new pi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pi(r,!0)}}static getBlob(...e){if(s0()){const n=e.map(r=>r instanceof pi?r.data_:r);return new pi(Az.apply(null,n))}else{const n=e.map(o=>yp(o)?Cz(Kr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new pi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){let e;try{e=JSON.parse(t)}catch{return null}return _z(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Lz(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(t,e){return e}class In{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Mz}}let Ch=null;function Fz(t){return!yp(t)||t.length<2?t:mN(t)}function pN(){if(Ch)return Ch;const t=[];t.push(new In("bucket")),t.push(new In("generation")),t.push(new In("metageneration")),t.push(new In("name","fullPath",!0));function e(i,o){return Fz(o)}const n=new In("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new In("size");return s.xform=r,t.push(s),t.push(new In("timeCreated")),t.push(new In("updated")),t.push(new In("md5Hash",null,!0)),t.push(new In("cacheControl",null,!0)),t.push(new In("contentDisposition",null,!0)),t.push(new In("contentEncoding",null,!0)),t.push(new In("contentLanguage",null,!0)),t.push(new In("contentType",null,!0)),t.push(new In("metadata","customMetadata",!0)),Ch=t,Ch}function jz(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Jn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Uz(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return jz(r,t),r}function gN(t,e,n){const r=fN(e);return r===null?null:Uz(t,r,n)}function Bz(t,e,n,r){const s=fN(e);if(s===null||!yp(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),g=gu(p,n,r),T=lN({alt:"media",token:c});return g+T})[0]}function yN(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ya{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){if(!t)throw r0()}function i0(t,e){function n(r,s){const i=gN(t,s,e);return As(i!==null),i}return n}function zz(t,e){function n(r,s){const i=gN(t,s,e);return As(i!==null),Bz(i,s,t.host,t._protocol)}return n}function Bd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=iz():s=sz():n.getStatus()===402?s=rz(t.bucket):n.getStatus()===403?s=oz(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function o0(t){const e=Bd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=nz(t.path)),i.serverResponse=s.serverResponse,i}return n}function $z(t,e,n){const r=e.fullServerUrl(),s=gu(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ya(s,i,i0(t,n),o);return a.errorHandler=o0(e),a}function qz(t,e,n){const r=e.fullServerUrl(),s=gu(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ya(s,i,zz(t,n),o);return a.errorHandler=o0(e),a}function Wz(t,e){const n=e.fullServerUrl(),r=gu(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new ya(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=o0(e),a}function Gz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function vN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Gz(null,e)),r}function Hz(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let O=0;O<2;O++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=vN(e,r,s),d=yN(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",g=pi.getBlob(h,r,p);if(g===null)throw oN();const T={name:c.fullPath},_=gu(i,t.host,t._protocol),b="POST",w=t.maxUploadRetryTime,v=new ya(_,b,i0(t,n),w);return v.urlParams=T,v.headers=o,v.body=g.uploadData(),v.errorHandler=Bd(e),v}class fm{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function a0(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{As(!1)}return As(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Kz(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=vN(e,r,s),a={name:o.fullPath},l=gu(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=yN(o,n),p=t.maxUploadRetryTime;function g(_){a0(_);let b;try{b=_.getResponseHeader("X-Goog-Upload-URL")}catch{As(!1)}return As(yp(b)),b}const T=new ya(l,c,g,p);return T.urlParams=a,T.headers=d,T.body=h,T.errorHandler=Bd(e),T}function Qz(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=a0(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{As(!1)}h||As(!1);const p=Number(h);return As(!isNaN(p)),new fm(p,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ya(n,o,i,a);return l.headers=s,l.errorHandler=Bd(e),l}const jx=256*1024;function Yz(t,e,n,r,s,i,o,a){const l=new fm(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw cz();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,p=h+d;let g="";d===0?g="finalize":c===d?g="upload, finalize":g="upload";const T={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},_=r.slice(h,p);if(_===null)throw oN();function b(O,L){const j=a0(O,["active","final"]),S=l.current+d,I=r.size();let C;return j==="final"?C=i0(e,i)(O,L):C=null,new fm(S,I,j==="final",C)}const w="POST",v=e.maxUploadRetryTime,E=new ya(n,w,b,v);return E.headers=T,E.body=_.uploadData(),E.progressCallback=a||null,E.errorHandler=Bd(t),E}const Vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Rg(t){switch(t){case"running":case"pausing":case"canceling":return Vn.RUNNING;case"paused":return Vn.PAUSED;case"success":return Vn.SUCCESS;case"canceled":return Vn.CANCELED;case"error":return Vn.ERROR;default:return Vn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,n,r){if(vz(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Jz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw $u("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $u("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $u("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $u("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $u("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Zz extends Jz{initXhr(){this.xhr_.responseType="text"}}function No(){return new Zz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=pN(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(ot.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(uN(s.status,[]))if(i)s=sN();else{this.sleepTime=Math.max(this.sleepTime*2,tz),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(ot.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Kz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,No,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=Qz(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,No,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=jx*this._chunkMultiplier,n=new fm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Yz(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,No,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){jx*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=$z(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,No,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Hz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,No,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=iN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Rg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Xz(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Rg(this._state)){case Vn.SUCCESS:Oa(this._resolve.bind(null,this.snapshot))();break;case Vn.CANCELED:case Vn.ERROR:const n=this._reject;Oa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Rg(this._state)){case Vn.RUNNING:case Vn.PAUSED:e.next&&Oa(e.next.bind(e,this.snapshot))();break;case Vn.SUCCESS:e.complete&&Oa(e.complete.bind(e))();break;case Vn.CANCELED:case Vn.ERROR:e.error&&Oa(e.error.bind(e,this._error))();break;default:e.error&&Oa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this._service=e,n instanceof Jn?this._location=n:this._location=Jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oa(e,n)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mN(this._location.path)}get storage(){return this._service}get parent(){const e=Vz(this._location.path);if(e===null)return null;const n=new Jn(this._location.bucket,e);return new oa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fz(e)}}function t$(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new e$(t,new pi(e),n)}function n$(t){t._throwIfRoot("getDownloadURL");const e=qz(t.storage,t._location,pN());return t.storage.makeRequestWithTokens(e,No).then(n=>{if(n===null)throw dz();return n})}function r$(t){t._throwIfRoot("deleteObject");const e=Wz(t.storage,t._location);return t.storage.makeRequestWithTokens(e,No)}function s$(t,e){const n=Lz(t._location.path,e),r=new Jn(t._location.bucket,n);return new oa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(t){return/^[A-Za-z]+:\/\//.test(t)}function o$(t,e){return new oa(t,e)}function _N(t,e){if(t instanceof l0){const n=t;if(n._bucket==null)throw uz();const r=new oa(n,n._bucket);return e!=null?_N(r,e):r}else return e!==void 0?s$(t,e):t}function a$(t,e){if(e&&i$(e)){if(t instanceof l0)return o$(t,e);throw yv("To use ref(service, url), the first argument must be a Storage instance.")}else return _N(t,e)}function Ux(t,e){const n=e==null?void 0:e[rN];return n==null?null:Jn.makeFromBucketSpec(n,t)}function l$(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:dR(s,t.app.options.projectId))}class l0{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=nN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Z9,this._maxUploadRetryTime=ez,this._requests=new Set,s!=null?this._bucket=Jn.makeFromBucketSpec(s,this._host):this._bucket=Ux(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=Ux(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oa(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new mz(aN());{const o=bz(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Bx="@firebase/storage",zx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="storage";function u$(t,e,n){return t=ce(t),t$(t,e,n)}function c$(t){return t=ce(t),n$(t)}function $x(t){return t=ce(t),r$(t)}function qx(t,e){return t=ce(t),a$(t,e)}function d$(t=L_(),e){t=ce(t);const r=Zl(t,wN).getImmediate({identifier:e}),s=lR("storage");return s&&h$(r,...s),r}function h$(t,e,n,r={}){l$(t,e,n,r)}function f$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new l0(n,r,s,e,ha)}function m$(){Yo(new $i(wN,f$,"PUBLIC").setMultipleInstances(!0)),Jr(Bx,zx,""),Jr(Bx,zx,"esm2017")}m$();const p$={apiKey:"AIzaSyAIi_u8j576wCCle_sR9eUr_84MXH-VpoU",authDomain:"conexao-fa.firebaseapp.com",projectId:"conexao-fa",storageBucket:"conexao-fa.firebasestorage.app",messagingSenderId:"268358511326",appId:"1:268358511326:web:c68d5aa6537a12c0cdf04f"},u0=gR(p$),aa=Sk(u0),ke=OP(u0),vv=d$(u0),g$=Object.freeze(Object.defineProperty({__proto__:null,auth:aa,db:ke,storage:vv},Symbol.toStringTag,{value:"Module"}));var y$=t=>{switch(t){case"success":return w$;case"info":return I$;case"warning":return E$;case"error":return T$;default:return null}},v$=Array(12).fill(0),_$=({visible:t,className:e})=>G.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},v$.map((n,r)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),w$=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),E$=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),I$=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),T$=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),x$=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),b$=()=>{let[t,e]=G.useState(document.hidden);return G.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},_v=1,S$=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:_v++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async l=>{if(i=["resolve",l],G.isValidElement(l))s=!1,this.create({id:n,type:"default",message:l});else if(R$(l)&&!l.ok){s=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:d})}else if(e.success!==void 0){s=!1;let c=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:d})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let c=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:d})}}).finally(()=>{var l;s&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||_v++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Dn=new S$,A$=(t,e)=>{let n=(e==null?void 0:e.id)||_v++;return Dn.addToast({title:t,...e,id:n}),n},R$=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",k$=A$,C$=()=>Dn.toasts,P$=()=>Dn.getActiveToasts(),Ie=Object.assign(k$,{success:Dn.success,info:Dn.info,warning:Dn.warning,error:Dn.error,custom:Dn.custom,message:Dn.message,promise:Dn.promise,dismiss:Dn.dismiss,loading:Dn.loading},{getHistory:C$,getToasts:P$});function N$(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}N$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ph(t){return t.label!==void 0}var D$=3,O$="32px",V$="16px",Wx=4e3,L$=356,M$=14,F$=20,j$=200;function Ir(...t){return t.filter(Boolean).join(" ")}function U$(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var B$=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:p,toast:g,unstyled:T,interacting:_,setHeights:b,visibleToasts:w,heights:v,index:E,toasts:O,expanded:L,removeToast:j,defaultRichColors:S,closeButton:I,style:C,cancelButtonStyle:A,actionButtonStyle:D,className:N="",descriptionClassName:k="",duration:pe,position:Le,gap:Me,loadingIcon:Ne,expandByDefault:J,classNames:K,icons:ae,closeButtonAriaLabel:$e="Close toast",pauseWhenPageIsHidden:me}=t,[ge,Se]=G.useState(null),[Je,Bt]=G.useState(null),[De,is]=G.useState(!1),[Vr,Gn]=G.useState(!1),[Cn,os]=G.useState(!1),[as,mo]=G.useState(!1),[Gs,Hs]=G.useState(!1),[vu,po]=G.useState(0),[_u,ls]=G.useState(0),P=G.useRef(g.duration||pe||Wx),F=G.useRef(null),B=G.useRef(null),re=E===0,X=E+1<=w,$=g.type,ne=g.dismissible!==!1,Ae=g.className||"",Oe=g.descriptionClassName||"",gt=G.useMemo(()=>v.findIndex(ve=>ve.toastId===g.id)||0,[v,g.id]),_r=G.useMemo(()=>{var ve;return(ve=g.closeButton)!=null?ve:I},[g.closeButton,I]),en=G.useMemo(()=>g.duration||pe||Wx,[g.duration,pe]),Ks=G.useRef(0),Hn=G.useRef(0),Lr=G.useRef(0),Mr=G.useRef(null),[Ta,go]=Le.split("-"),Qs=G.useMemo(()=>v.reduce((ve,Fe,Qe)=>Qe>=gt?ve:ve+Fe.height,0),[v,gt]),wu=b$(),yo=g.invert||p,vo=$==="loading";Hn.current=G.useMemo(()=>gt*Me+Qs,[gt,Qs]),G.useEffect(()=>{P.current=en},[en]),G.useEffect(()=>{is(!0)},[]),G.useEffect(()=>{let ve=B.current;if(ve){let Fe=ve.getBoundingClientRect().height;return ls(Fe),b(Qe=>[{toastId:g.id,height:Fe,position:g.position},...Qe]),()=>b(Qe=>Qe.filter(tn=>tn.toastId!==g.id))}},[b,g.id]),G.useLayoutEffect(()=>{if(!De)return;let ve=B.current,Fe=ve.style.height;ve.style.height="auto";let Qe=ve.getBoundingClientRect().height;ve.style.height=Fe,ls(Qe),b(tn=>tn.find(Pn=>Pn.toastId===g.id)?tn.map(Pn=>Pn.toastId===g.id?{...Pn,height:Qe}:Pn):[{toastId:g.id,height:Qe,position:g.position},...tn])},[De,g.title,g.description,b,g.id]);let ar=G.useCallback(()=>{Gn(!0),po(Hn.current),b(ve=>ve.filter(Fe=>Fe.toastId!==g.id)),setTimeout(()=>{j(g)},j$)},[g,j,b,Hn]);G.useEffect(()=>{if(g.promise&&$==="loading"||g.duration===1/0||g.type==="loading")return;let ve;return L||_||me&&wu?(()=>{if(Lr.current<Ks.current){let Fe=new Date().getTime()-Ks.current;P.current=P.current-Fe}Lr.current=new Date().getTime()})():P.current!==1/0&&(Ks.current=new Date().getTime(),ve=setTimeout(()=>{var Fe;(Fe=g.onAutoClose)==null||Fe.call(g,g),ar()},P.current)),()=>clearTimeout(ve)},[L,_,g,$,me,wu,ar]),G.useEffect(()=>{g.delete&&ar()},[ar,g.delete]);function us(){var ve,Fe,Qe;return ae!=null&&ae.loading?G.createElement("div",{className:Ir(K==null?void 0:K.loader,(ve=g==null?void 0:g.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":$==="loading"},ae.loading):Ne?G.createElement("div",{className:Ir(K==null?void 0:K.loader,(Fe=g==null?void 0:g.classNames)==null?void 0:Fe.loader,"sonner-loader"),"data-visible":$==="loading"},Ne):G.createElement(_$,{className:Ir(K==null?void 0:K.loader,(Qe=g==null?void 0:g.classNames)==null?void 0:Qe.loader),visible:$==="loading"})}return G.createElement("li",{tabIndex:0,ref:B,className:Ir(N,Ae,K==null?void 0:K.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,K==null?void 0:K.default,K==null?void 0:K[$],(n=g==null?void 0:g.classNames)==null?void 0:n[$]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:S,"data-styled":!(g.jsx||g.unstyled||T),"data-mounted":De,"data-promise":!!g.promise,"data-swiped":Gs,"data-removed":Vr,"data-visible":X,"data-y-position":Ta,"data-x-position":go,"data-index":E,"data-front":re,"data-swiping":Cn,"data-dismissible":ne,"data-type":$,"data-invert":yo,"data-swipe-out":as,"data-swipe-direction":Je,"data-expanded":!!(L||J&&De),style:{"--index":E,"--toasts-before":E,"--z-index":O.length-E,"--offset":`${Vr?vu:Hn.current}px`,"--initial-height":J?"auto":`${_u}px`,...C,...g.style},onDragEnd:()=>{os(!1),Se(null),Mr.current=null},onPointerDown:ve=>{vo||!ne||(F.current=new Date,po(Hn.current),ve.target.setPointerCapture(ve.pointerId),ve.target.tagName!=="BUTTON"&&(os(!0),Mr.current={x:ve.clientX,y:ve.clientY}))},onPointerUp:()=>{var ve,Fe,Qe,tn;if(as||!ne)return;Mr.current=null;let Pn=Number(((ve=B.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ut=Number(((Fe=B.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fr=new Date().getTime()-((Qe=F.current)==null?void 0:Qe.getTime()),nn=ge==="x"?Pn:ut,Nn=Math.abs(nn)/Fr;if(Math.abs(nn)>=F$||Nn>.11){po(Hn.current),(tn=g.onDismiss)==null||tn.call(g,g),Bt(ge==="x"?Pn>0?"right":"left":ut>0?"down":"up"),ar(),mo(!0),Hs(!1);return}os(!1),Se(null)},onPointerMove:ve=>{var Fe,Qe,tn,Pn;if(!Mr.current||!ne||((Fe=window.getSelection())==null?void 0:Fe.toString().length)>0)return;let ut=ve.clientY-Mr.current.y,Fr=ve.clientX-Mr.current.x,nn=(Qe=t.swipeDirections)!=null?Qe:U$(Le);!ge&&(Math.abs(Fr)>1||Math.abs(ut)>1)&&Se(Math.abs(Fr)>Math.abs(ut)?"x":"y");let Nn={x:0,y:0};ge==="y"?(nn.includes("top")||nn.includes("bottom"))&&(nn.includes("top")&&ut<0||nn.includes("bottom")&&ut>0)&&(Nn.y=ut):ge==="x"&&(nn.includes("left")||nn.includes("right"))&&(nn.includes("left")&&Fr<0||nn.includes("right")&&Fr>0)&&(Nn.x=Fr),(Math.abs(Nn.x)>0||Math.abs(Nn.y)>0)&&Hs(!0),(tn=B.current)==null||tn.style.setProperty("--swipe-amount-x",`${Nn.x}px`),(Pn=B.current)==null||Pn.style.setProperty("--swipe-amount-y",`${Nn.y}px`)}},_r&&!g.jsx?G.createElement("button",{"aria-label":$e,"data-disabled":vo,"data-close-button":!0,onClick:vo||!ne?()=>{}:()=>{var ve;ar(),(ve=g.onDismiss)==null||ve.call(g,g)},className:Ir(K==null?void 0:K.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(i=ae==null?void 0:ae.close)!=null?i:x$):null,g.jsx||R.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:G.createElement(G.Fragment,null,$||g.icon||g.promise?G.createElement("div",{"data-icon":"",className:Ir(K==null?void 0:K.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||us():null,g.type!=="loading"?g.icon||(ae==null?void 0:ae[$])||y$($):null):null,G.createElement("div",{"data-content":"",className:Ir(K==null?void 0:K.content,(a=g==null?void 0:g.classNames)==null?void 0:a.content)},G.createElement("div",{"data-title":"",className:Ir(K==null?void 0:K.title,(l=g==null?void 0:g.classNames)==null?void 0:l.title)},typeof g.title=="function"?g.title():g.title),g.description?G.createElement("div",{"data-description":"",className:Ir(k,Oe,K==null?void 0:K.description,(c=g==null?void 0:g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),R.isValidElement(g.cancel)?g.cancel:g.cancel&&Ph(g.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||A,onClick:ve=>{var Fe,Qe;Ph(g.cancel)&&ne&&((Qe=(Fe=g.cancel).onClick)==null||Qe.call(Fe,ve),ar())},className:Ir(K==null?void 0:K.cancelButton,(d=g==null?void 0:g.classNames)==null?void 0:d.cancelButton)},g.cancel.label):null,R.isValidElement(g.action)?g.action:g.action&&Ph(g.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||D,onClick:ve=>{var Fe,Qe;Ph(g.action)&&((Qe=(Fe=g.action).onClick)==null||Qe.call(Fe,ve),!ve.defaultPrevented&&ar())},className:Ir(K==null?void 0:K.actionButton,(h=g==null?void 0:g.classNames)==null?void 0:h.actionButton)},g.action.label):null))};function Gx(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function z$(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?V$:O$;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var zd=R.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:p,style:g,visibleToasts:T=D$,toastOptions:_,dir:b=Gx(),gap:w=M$,loadingIcon:v,icons:E,containerAriaLabel:O="Notifications",pauseWhenPageIsHidden:L}=t,[j,S]=G.useState([]),I=G.useMemo(()=>Array.from(new Set([r].concat(j.filter(me=>me.position).map(me=>me.position)))),[j,r]),[C,A]=G.useState([]),[D,N]=G.useState(!1),[k,pe]=G.useState(!1),[Le,Me]=G.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ne=G.useRef(null),J=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=G.useRef(null),ae=G.useRef(!1),$e=G.useCallback(me=>{S(ge=>{var Se;return(Se=ge.find(Je=>Je.id===me.id))!=null&&Se.delete||Dn.dismiss(me.id),ge.filter(({id:Je})=>Je!==me.id)})},[]);return G.useEffect(()=>Dn.subscribe(me=>{if(me.dismiss){S(ge=>ge.map(Se=>Se.id===me.id?{...Se,delete:!0}:Se));return}setTimeout(()=>{OA.flushSync(()=>{S(ge=>{let Se=ge.findIndex(Je=>Je.id===me.id);return Se!==-1?[...ge.slice(0,Se),{...ge[Se],...me},...ge.slice(Se+1)]:[me,...ge]})})})}),[]),G.useEffect(()=>{if(d!=="system"){Me(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Me("dark"):Me("light")),typeof window>"u")return;let me=window.matchMedia("(prefers-color-scheme: dark)");try{me.addEventListener("change",({matches:ge})=>{Me(ge?"dark":"light")})}catch{me.addListener(({matches:Se})=>{try{Me(Se?"dark":"light")}catch(Je){console.error(Je)}})}},[d]),G.useEffect(()=>{j.length<=1&&N(!1)},[j]),G.useEffect(()=>{let me=ge=>{var Se,Je;s.every(Bt=>ge[Bt]||ge.code===Bt)&&(N(!0),(Se=Ne.current)==null||Se.focus()),ge.code==="Escape"&&(document.activeElement===Ne.current||(Je=Ne.current)!=null&&Je.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",me),()=>document.removeEventListener("keydown",me)},[s]),G.useEffect(()=>{if(Ne.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,ae.current=!1)}},[Ne.current]),G.createElement("section",{ref:e,"aria-label":`${O} ${J}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((me,ge)=>{var Se;let[Je,Bt]=me.split("-");return j.length?G.createElement("ol",{key:me,dir:b==="auto"?Gx():b,tabIndex:-1,ref:Ne,className:a,"data-sonner-toaster":!0,"data-theme":Le,"data-y-position":Je,"data-lifted":D&&j.length>1&&!i,"data-x-position":Bt,style:{"--front-toast-height":`${((Se=C[0])==null?void 0:Se.height)||0}px`,"--width":`${L$}px`,"--gap":`${w}px`,...g,...z$(l,c)},onBlur:De=>{ae.current&&!De.currentTarget.contains(De.relatedTarget)&&(ae.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||ae.current||(ae.current=!0,K.current=De.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{k||N(!1)},onDragEnd:()=>N(!1),onPointerDown:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||pe(!0)},onPointerUp:()=>pe(!1)},j.filter(De=>!De.position&&ge===0||De.position===me).map((De,is)=>{var Vr,Gn;return G.createElement(B$,{key:De.id,icons:E,index:is,toast:De,defaultRichColors:h,duration:(Vr=_==null?void 0:_.duration)!=null?Vr:p,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:n,visibleToasts:T,closeButton:(Gn=_==null?void 0:_.closeButton)!=null?Gn:o,interacting:k,position:me,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,removeToast:$e,toasts:j.filter(Cn=>Cn.position==De.position),heights:C.filter(Cn=>Cn.position==De.position),setHeights:A,expandByDefault:i,gap:w,loadingIcon:v,expanded:D,pauseWhenPageIsHidden:L,swipeDirections:t.swipeDirections})})):null}))});const $$={},Hx=t=>{let e;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(T=>T(e,g))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{($$?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},q$=t=>t?Hx(t):Hx;var EN={exports:{}},IN={},TN={exports:{}},xN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wl=R;function W$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var G$=typeof Object.is=="function"?Object.is:W$,H$=Wl.useState,K$=Wl.useEffect,Q$=Wl.useLayoutEffect,Y$=Wl.useDebugValue;function X$(t,e){var n=e(),r=H$({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Q$(function(){s.value=n,s.getSnapshot=e,kg(s)&&i({inst:s})},[t,n,e]),K$(function(){return kg(s)&&i({inst:s}),t(function(){kg(s)&&i({inst:s})})},[t]),Y$(n),n}function kg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!G$(t,n)}catch{return!0}}function J$(t,e){return e()}var Z$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?J$:X$;xN.useSyncExternalStore=Wl.useSyncExternalStore!==void 0?Wl.useSyncExternalStore:Z$;TN.exports=xN;var e3=TN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=R,t3=e3;function n3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var r3=typeof Object.is=="function"?Object.is:n3,s3=t3.useSyncExternalStore,i3=vp.useRef,o3=vp.useEffect,a3=vp.useMemo,l3=vp.useDebugValue;IN.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=i3(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=a3(function(){function l(g){if(!c){if(c=!0,d=g,g=r(g),s!==void 0&&o.hasValue){var T=o.value;if(s(T,g))return h=T}return h=g}if(T=h,r3(d,g))return T;var _=r(g);return s!==void 0&&s(T,_)?(d=g,T):(d=g,h=_)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=s3(t,i[0],i[1]);return o3(function(){o.hasValue=!0,o.value=a},[a]),l3(a),a};EN.exports=IN;var u3=EN.exports;const c3=Iv(u3),bN={},{useDebugValue:d3}=G,{useSyncExternalStoreWithSelector:h3}=c3;let Kx=!1;const f3=t=>t;function m3(t,e=f3,n){(bN?"production":void 0)!=="production"&&n&&!Kx&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Kx=!0);const r=h3(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return d3(r),r}const Qx=t=>{(bN?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?q$(t):t,n=(r,s)=>m3(e,r,s);return Object.assign(n,e),n},p3=t=>t?Qx(t):Qx,vr=p3(t=>({user:null,profile:null,loading:!0,setUser:e=>t({user:e}),setProfile:e=>t({profile:e}),setLoading:e=>t({loading:e})})),g3=D_({email:Al().email("Email invlido"),password:Al().min(6,"Senha deve ter pelo menos 6 caracteres")});function y3(){const t=da(),[e,n]=R.useState(!1),[r,s]=R.useState(!1),{user:i,profile:o,loading:a}=vr();R.useEffect(()=>{!a&&i&&(o?t("/",{replace:!0}):t("/setup",{replace:!0}))},[i,o,a,t]);const{register:l,handleSubmit:c,formState:{errors:d}}=C_({resolver:P_(g3)}),h=async p=>{n(!0);try{r?(await x_(async()=>{const{createUserWithEmailAndPassword:g}=await Promise.resolve().then(()=>S4);return{createUserWithEmailAndPassword:g}},void 0).then(({createUserWithEmailAndPassword:g})=>g(aa,p.email,p.password)),Ie.success("Conta criada! Verificando convite..."),t("/setup")):(await tk(aa,p.email,p.password),Ie.success("Login realizado!"))}catch(g){console.error(g);const T=g.code==="auth/email-already-in-use"?"Email j cadastrado.":g.code==="auth/invalid-credential"?"Credenciais invlidas.":"Ocorreu um erro. Tente novamente.";Ie.error(T)}finally{n(!1)}};return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[m.jsx(zd,{position:"top-right"}),m.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:r?"Criar nova conta":"Entrar na sua conta"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Conexo FA"})]}),m.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:m.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[m.jsxs("form",{className:"space-y-6",onSubmit:c(h),children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),m.jsxs("div",{className:"mt-1",children:[m.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",...l("email")}),d.email&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"}),m.jsxs("div",{className:"mt-1",children:[m.jsx("input",{id:"password",type:"password",autoComplete:"current-password",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",...l("password")}),d.password&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.password.message})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:e?"Processando...":r?"Criar Conta":"Entrar"})})]}),m.jsxs("div",{className:"mt-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-300"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-2 bg-white text-gray-500",children:r?"J tem uma conta?":"Novo por aqui?"})})]}),m.jsx("div",{className:"mt-6",children:m.jsx("button",{onClick:()=>s(!r),className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:r?"Fazer Login":"Criar Conta"})})]})]})})]})}const Zn={async log(t,e,n,r){try{if(!aa.currentUser)return;await gp(St(ke,"audit_logs"),{action:t,targetCollection:e,targetId:n,performedBy:aa.currentUser.uid,performedByRole:"unknown",details:r||{},timestamp:bn()})}catch(s){console.error("Failed to log audit:",s)}}},Ur="clients",Sr={async getAll(){const t=Ft(St(ke,Ur),Jw("createdAt","desc"));return(await Mn(t)).docs.map(n=>({id:n.id,...n.data()}))},async getById(t){const e=ln(ke,Ur,t),n=await pp(e);return n.exists()?{id:n.id,...n.data()}:null},async create(t){if(t.userId){const n=Ft(St(ke,Ur),bt("userId","==",t.userId));if(!(await Mn(n)).empty)throw new Error("Este usurio j est vinculado a outro cliente.")}const e=await gp(St(ke,Ur),{...t,assignedProfessionalIds:[],active:!0,createdAt:bn(),updatedAt:bn()});return await Zn.log("client_created","client",e.id,t),e.id},async update(t,e){if(e.userId){const n=Ft(St(ke,Ur),bt("userId","==",e.userId));if((await Mn(n)).docs.find(i=>i.id!==t))throw new Error("Este usurio j est vinculado a outro cliente.")}await ql(ln(ke,Ur,t),{...e,updatedAt:bn()}),await Zn.log("client_updated","client",t,e)},async assignProfessionals(t,e){await ql(ln(ke,Ur,t),{assignedProfessionalIds:e,updatedAt:bn()}),await Zn.log("professional_assigned","client",t,{professionalIds:e})},async getMyClients(t){const e=Ft(St(ke,Ur),bt("assignedProfessionalIds","array-contains",t),bt("active","==",!0),dr(100));return(await Mn(e)).docs.map(r=>({id:r.id,...r.data()}))},async getMyClientByUserId(t){const e=Ft(St(ke,Ur),bt("userId","==",t),bt("active","==",!0),dr(1)),n=await Mn(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},async delete(t){await ld(ln(ke,Ur,t)),await Zn.log("delete_client","client",t)}},ri="documents",Vi={async getByClientId(t,e){let n=Ft(St(ke,ri),bt("clientId","==",t),dr(100));return e&&e.role==="professional"?n=Ft(n,bt("assignedProfessionalIds","array-contains",e.uid)):e&&e.role==="client"&&(n=Ft(n,bt("clientUserId","==",e.uid))),(await Mn(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var c,d;const a=((c=i.createdAt)==null?void 0:c.seconds)||0;return(((d=o.createdAt)==null?void 0:d.seconds)||0)-a})},async getPendingCount(t){if(t.role!=="professional")return 0;const e=Ft(St(ke,ri),bt("assignedProfessionalIds","array-contains",t.uid),dr(100));return(await Mn(e)).docs.filter(r=>r.data().status==="pending").length},async getRecent(t,e){let n;return e&&e.role==="professional"?n=Ft(St(ke,ri),bt("assignedProfessionalIds","array-contains",e.uid),dr(50)):e&&e.role==="client"?n=Ft(St(ke,ri),bt("clientUserId","==",e.uid),dr(50)):n=Ft(St(ke,ri),Jw("createdAt","desc"),dr(t)),(await Mn(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var c,d;const a=((c=i.createdAt)==null?void 0:c.seconds)||0;return(((d=o.createdAt)==null?void 0:d.seconds)||0)-a}).slice(0,t)},async upload(t,e,n){const r=ln(St(ke,ri)),s=r.id,i=`clients/${e.clientId}/documents/${s}/${t.name}`,o=qx(vv,i),a=u$(o,t);return new Promise((l,c)=>{a.on("state_changed",d=>{const h=d.bytesTransferred/d.totalBytes*100;n&&n(h)},d=>{console.error("Upload error:",d),c(d)},async()=>{try{const d=await c$(a.snapshot.ref),{setDoc:h}=await x_(async()=>{const{setDoc:p}=await Promise.resolve().then(()=>J9);return{setDoc:p}},void 0);await h(r,{clientId:e.clientId,uploadedByUid:e.uploadedByUid,uploadedByRole:e.uploadedByRole,category:e.category,note:e.note||"",fileName:t.name,fileType:t.type,fileSize:t.size,filePath:i,downloadURL:d,status:"pending",createdAt:bn(),updatedAt:bn(),clientUserId:e.clientUserId||null,assignedProfessionalIds:e.assignedProfessionalIds||[]}),await Zn.log("document_uploaded","document",s,{fileName:t.name,clientId:e.clientId}),l()}catch(d){console.error("Firestore error:",d),await $x(o).catch(()=>{}),c(d)}})})},async updateStatus(t,e,n){const r={status:e,updatedAt:bn()};n!==void 0&&(r.note=n),await ql(ln(ke,ri,t),r),await Zn.log("document_status_changed","document",t,{status:e})},async delete(t,e){const n=qx(vv,e);await $x(n).catch(r=>console.warn("File not found in storage",r)),await ld(ln(ke,ri,t)),await Zn.log("document_deleted","document",t)}},Va="todos",Li={async getByClientId(t,e){let n=Ft(St(ke,Va),bt("clientId","==",t),dr(100));return e&&e.role==="professional"?n=Ft(n,bt("assignedProfessionalIds","array-contains",e.uid)):e&&e.role==="client"&&(n=Ft(n,bt("clientUserId","==",e.uid))),(await Mn(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var a,l;return(((a=o.createdAt)==null?void 0:a.seconds)||0)-(((l=i.createdAt)==null?void 0:l.seconds)||0)})},async getRecentOpen(t,e){let n;return e&&e.role==="professional"?n=Ft(St(ke,Va),bt("assignedProfessionalIds","array-contains",e.uid),bt("status","==","open"),dr(50)):e&&e.role==="client"?n=Ft(St(ke,Va),bt("clientUserId","==",e.uid),bt("status","==","open"),dr(50)):n=Ft(St(ke,Va),bt("status","==","open"),dr(100)),(await Mn(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{var a,l;return(((a=o.createdAt)==null?void 0:a.seconds)||0)-(((l=i.createdAt)==null?void 0:l.seconds)||0)}).slice(0,t)},async create(t){const e=await gp(St(ke,Va),{...t,status:"open",createdAt:bn(),updatedAt:bn(),clientUserId:t.clientUserId||null,assignedProfessionalIds:t.assignedProfessionalIds||[]});return await Zn.log("todo_created","todos",e.id,{title:t.title,clientId:t.clientId}),e.id},async updateStatus(t,e,n){const r={status:e,updatedAt:bn()};e==="resolved"&&(r.resolvedAt=bn()),await ql(ln(ke,Va,t),r),await Zn.log("todo_status_changed","todos",t,{status:e,updatedBy:n})}},Nh="users",Dh="invites",cr={async getAll(){return(await Mn(St(ke,Nh))).docs.map(e=>({uid:e.id,...e.data()}))},async update(t,e){await ql(ln(ke,Nh,t),e),await Zn.log("update_user","user",t,e)},async getAllInvites(){return(await Mn(St(ke,Dh))).docs.map(e=>({id:e.id,...e.data()}))},async createInvite(t){const e=t.email.trim().toLowerCase(),n=Ft(St(ke,Nh),bt("email","==",e));if(!(await Mn(n)).empty)throw new Error("Usurio j cadastrado no sistema.");return await e0(ln(ke,Dh,e),{...t,email:e,createdAt:bn()}),await Zn.log("create_invite","user",e,{...t,email:e}),e},async deleteInvite(t){await ld(ln(ke,Dh,t)),await Zn.log("delete_invite","user",t)},async getInviteByEmail(t){const e=t.trim().toLowerCase(),n=ln(ke,Dh,e),r=await pp(n);return r.exists()?{id:r.id,...r.data()}:null},async deleteUser(t){await ld(ln(ke,Nh,t)),await Zn.log("delete_user","user",t)}};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>R.createElement("svg",{ref:l,..._3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:SN("lucide",s),...a},[...o.map(([c,d])=>R.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(t,e)=>{const n=R.forwardRef(({className:r,...s},i)=>R.createElement(w3,{ref:i,iconNode:e,className:SN(`lucide-${v3(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=pt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=pt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=pt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=pt("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=pt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=pt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=pt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=pt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=pt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=pt("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=pt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=pt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function P3(){const{profile:t}=vr(),e=da(),[n,r]=R.useState(!0),[s,i]=R.useState({clientsCount:0,profCount:0,pendingDocsCount:0,recentDocs:[],recentTodos:[]});R.useEffect(()=>{if(t){if(t.role==="client"){e("/client/home");return}o()}},[t]);const o=async()=>{r(!0);try{if((t==null?void 0:t.role)==="admin"){const[c,d,h,p]=await Promise.all([Sr.getAll(),cr.getAll(),Vi.getRecent(5),Li.getRecentOpen(5)]),g=d.filter(_=>_.role==="professional"&&_.active).length,T=c.filter(_=>_.active).length;i({clientsCount:T,profCount:g,pendingDocsCount:0,recentDocs:h,recentTodos:p})}else if((t==null?void 0:t.role)==="professional"){const c=await Sr.getMyClients(t.uid),[d,h,p]=await Promise.all([Vi.getRecent(5,{uid:t.uid,role:"professional"}),Li.getRecentOpen(5,{uid:t.uid,role:"professional"}),Vi.getPendingCount({uid:t.uid,role:"professional"})]);i({clientsCount:c.length,profCount:0,pendingDocsCount:p,recentDocs:d,recentTodos:h})}}catch(c){console.error(c)}finally{r(!1)}};if(n)return m.jsx("div",{className:"flex h-full items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const a=(t==null?void 0:t.role)==="admin",l=({label:c,value:d,icon:h,colorClass:p})=>m.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg px-4 py-5 sm:p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:`p-3 rounded-md ${p}`,children:m.jsx(h,{className:"h-6 w-6 text-white"})}),m.jsxs("div",{className:"ml-5 w-0 flex-1",children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:c}),m.jsx("dd",{className:"flex items-baseline",children:m.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:d})})]})]})});return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Viso Geral"}),m.jsx("p",{className:"text-gray-500",children:"Resumo das atividades recentes"})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[m.jsx(l,{label:a?"Clientes Ativos":"Meus Clientes",value:s.clientsCount,icon:I3,colorClass:"bg-blue-500"}),a?m.jsx(l,{label:"Profissionais Ativos",value:s.profCount,icon:cd,colorClass:"bg-indigo-500"}):m.jsx(l,{label:"Docs para Aprovar",value:s.pendingDocsCount,icon:AN,colorClass:"bg-purple-500"}),m.jsx(l,{label:s.recentTodos.length>=5?"Pendncias (5+)":"Pendncias Abertas",value:s.recentTodos.length,icon:mm,colorClass:"bg-amber-500"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white shadow rounded-lg",children:[m.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6 flex justify-between items-center",children:m.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[m.jsx(_p,{className:"w-5 h-5 mr-2 text-gray-400"}),"Documentos Recentes"]})}),m.jsx("ul",{className:"divide-y divide-gray-200",children:s.recentDocs.length===0?m.jsx("li",{className:"px-4 py-4 text-sm text-gray-500 text-center",children:"Nenhum documento recente"}):s.recentDocs.map(c=>{var d,h;return m.jsx("li",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50 transition",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-sm font-medium text-primary-600 truncate max-w-[200px]",children:c.fileName}),m.jsxs("span",{className:"text-xs text-gray-500",children:[new Date(((h=(d=c.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))||Date.now()).toLocaleDateString()," - ",c.status==="pending"?"Pendente":c.status==="approved"?"Aprovado":"Rejeitado"]})]}),m.jsx("button",{onClick:()=>e(a?`/clients/${c.clientId}`:`/professional/clients/${c.clientId}`),className:"text-gray-400 hover:text-primary-600",title:"Ir para Cliente",children:m.jsx(Cg,{className:"w-4 h-4"})})]})},c.id)})})]}),m.jsxs("div",{className:"bg-white shadow rounded-lg",children:[m.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6 flex justify-between items-center",children:m.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[m.jsx(mm,{className:"w-5 h-5 mr-2 text-gray-400"}),"Pendncias Abertas (Recentes)"]})}),m.jsx("ul",{className:"divide-y divide-gray-200",children:s.recentTodos.length===0?m.jsx("li",{className:"px-4 py-4 text-sm text-gray-500 text-center",children:"Nenhuma pendncia aberta"}):s.recentTodos.map(c=>{var d,h;return m.jsx("li",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50 transition",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-sm font-medium text-gray-900 truncate max-w-[250px]",children:c.title}),m.jsx("span",{className:"text-xs text-gray-500",children:new Date(((h=(d=c.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))||Date.now()).toLocaleDateString()})]}),m.jsx("button",{onClick:()=>e(a?`/clients/${c.clientId}`:`/professional/clients/${c.clientId}`),className:"text-gray-400 hover:text-primary-600",title:"Ir para Cliente",children:m.jsx(Cg,{className:"w-4 h-4"})})]})},c.id)})})]})]}),!a&&m.jsx("div",{className:"flex justify-end",children:m.jsxs("button",{onClick:()=>e("/professional/clients"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200",children:["Ver todos os meus clientes",m.jsx(Cg,{className:"ml-2 -mr-1 w-4 h-4"})]})})]})}function N3(){const{user:t,setProfile:e}=vr(),n=da(),[r,s]=R.useState(!1);if(!t)return n("/login"),null;const i=async()=>{s(!0);try{const o=(t.email||"").trim().toLowerCase();console.log("=== DEBUG INVITE LOOKUP ==="),console.log("user.email raw:",t.email),console.log("normalizedEmail:",o),console.log("Expected doc path: invites/"+o);const a=await cr.getInviteByEmail(t.email||"");if(console.log("inviteSnapshot result:",a),!a){Ie.error("Nenhum convite encontrado para este email. Solicite acesso ao administrador."),s(!1);return}const l={uid:t.uid,email:t.email||"",name:a.name,role:a.role,active:!0,createdAt:bn()};console.log("Step 1: Creating user profile at users/"+t.uid);try{await e0(ln(ke,"users",t.uid),l),console.log("Step 1: SUCCESS - User profile created")}catch(c){throw console.error("Step 1: FAILED - Could not create user profile",c),c}console.log("Step 2: Deleting invite at invites/"+a.id);try{await cr.deleteInvite(a.id),console.log("Step 2: SUCCESS - Invite deleted")}catch(c){console.error("Step 2: FAILED - Could not delete invite",c)}e({...l,createdAt:new Date().toISOString()}),Ie.success("Conta configurada com sucesso!"),n("/")}catch(o){console.error("Setup failed:",o),Ie.error("Erro ao configurar perfil.")}finally{s(!1)}};return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Finalizar Cadastro"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Valide seu convite para acessar o sistema."})]}),m.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:m.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-blue-700",children:["Email autenticado: ",m.jsx("strong",{children:t.email})]})})})}),m.jsx("button",{onClick:i,disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:r?"Verificando...":"Verificar Convite e Entrar"}),m.jsx("button",{onClick:()=>{x_(async()=>{const{auth:o}=await Promise.resolve().then(()=>g$);return{auth:o}},void 0).then(({auth:o})=>o.signOut()),n("/login")},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none",children:"Sair"})]})})})]})}function Mi(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Zx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function d0(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Zx(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Zx(t[s],null)}}}}function va(...t){return R.useCallback(d0(...t),t)}function D3(t,e){const n=R.createContext(e),r=i=>{const{children:o,...a}=i,l=R.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=R.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function O3(t,e=[]){let n=[];function r(i,o){const a=R.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:p,children:g,...T}=h,_=((w=p==null?void 0:p[t])==null?void 0:w[l])||a,b=R.useMemo(()=>T,Object.values(T));return m.jsx(_.Provider,{value:b,children:g})};c.displayName=i+"Provider";function d(h,p){var _;const g=((_=p==null?void 0:p[t])==null?void 0:_[l])||a,T=R.useContext(g);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>R.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return R.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,V3(s,...e)]}function V3(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var dd=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},L3=Av[" useId ".trim().toString()]||(()=>{}),M3=0;function Pg(t){const[e,n]=R.useState(L3());return dd(()=>{n(r=>r??String(M3++))},[t]),t||(e?`radix-${e}`:"")}var F3=Av[" useInsertionEffect ".trim().toString()]||dd;function j3({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=U3({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=R.useRef(t!==void 0);R.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=R.useCallback(d=>{var h;if(a){const p=B3(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else i(d)},[a,t,i,o]);return[l,c]}function U3({defaultProp:t,onChange:e}){const[n,r]=R.useState(t),s=R.useRef(n),i=R.useRef(e);return F3(()=>{i.current=e},[e]),R.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function B3(t){return typeof t=="function"}function z3(t){const e=$3(t),n=R.forwardRef((r,s)=>{const{children:i,...o}=r,a=R.Children.toArray(i),l=a.find(W3);if(l){const c=l.props.children,d=a.map(h=>h===l?R.Children.count(c)>1?R.Children.only(null):R.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:R.isValidElement(c)?R.cloneElement(c,void 0,d):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function $3(t){const e=R.forwardRef((n,r)=>{const{children:s,...i}=n;if(R.isValidElement(s)){const o=H3(s),a=G3(i,s.props);return s.type!==R.Fragment&&(a.ref=r?d0(r,o):o),R.cloneElement(s,a)}return R.Children.count(s)>1?R.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var q3=Symbol("radix.slottable");function W3(t){return R.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===q3}function G3(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function H3(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var K3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ws=K3.reduce((t,e)=>{const n=z3(`Primitive.${e}`),r=R.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Q3(t,e){t&&v_.flushSync(()=>t.dispatchEvent(e))}function hd(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Y3(t,e=globalThis==null?void 0:globalThis.document){const n=hd(t);R.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var X3="DismissableLayer",wv="dismissableLayer.update",J3="dismissableLayer.pointerDownOutside",Z3="dismissableLayer.focusOutside",eb,PN=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),NN=R.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=R.useContext(PN),[d,h]=R.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=R.useState({}),T=va(e,S=>h(S)),_=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=_.indexOf(b),v=d?_.indexOf(d):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,O=v>=w,L=nq(S=>{const I=S.target,C=[...c.branches].some(A=>A.contains(I));!O||C||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},p),j=rq(S=>{const I=S.target;[...c.branches].some(A=>A.contains(I))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},p);return Y3(S=>{v===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),R.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(eb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),tb(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=eb)}},[d,p,n,c]),R.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),tb())},[d,c]),R.useEffect(()=>{const S=()=>g({});return document.addEventListener(wv,S),()=>document.removeEventListener(wv,S)},[]),m.jsx(Ws.div,{...l,ref:T,style:{pointerEvents:E?O?"auto":"none":void 0,...t.style},onFocusCapture:Mi(t.onFocusCapture,j.onFocusCapture),onBlurCapture:Mi(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Mi(t.onPointerDownCapture,L.onPointerDownCapture)})});NN.displayName=X3;var eq="DismissableLayerBranch",tq=R.forwardRef((t,e)=>{const n=R.useContext(PN),r=R.useRef(null),s=va(e,r);return R.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(Ws.div,{...t,ref:s})});tq.displayName=eq;function nq(t,e=globalThis==null?void 0:globalThis.document){const n=hd(t),r=R.useRef(!1),s=R.useRef(()=>{});return R.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){DN(J3,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function rq(t,e=globalThis==null?void 0:globalThis.document){const n=hd(t),r=R.useRef(!1);return R.useEffect(()=>{const s=i=>{i.target&&!r.current&&DN(Z3,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tb(){const t=new CustomEvent(wv);document.dispatchEvent(t)}function DN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Q3(s,i):s.dispatchEvent(i)}var Ng="focusScope.autoFocusOnMount",Dg="focusScope.autoFocusOnUnmount",nb={bubbles:!1,cancelable:!0},sq="FocusScope",ON=R.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=R.useState(null),c=hd(s),d=hd(i),h=R.useRef(null),p=va(e,_=>l(_)),g=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(r){let _=function(E){if(g.paused||!a)return;const O=E.target;a.contains(O)?h.current=O:ii(h.current,{select:!0})},b=function(E){if(g.paused||!a)return;const O=E.relatedTarget;O!==null&&(a.contains(O)||ii(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const L of E)L.removedNodes.length>0&&ii(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",b);const v=new MutationObserver(w);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",b),v.disconnect()}}},[r,a,g.paused]),R.useEffect(()=>{if(a){sb.add(g);const _=document.activeElement;if(!a.contains(_)){const w=new CustomEvent(Ng,nb);a.addEventListener(Ng,c),a.dispatchEvent(w),w.defaultPrevented||(iq(cq(VN(a)),{select:!0}),document.activeElement===_&&ii(a))}return()=>{a.removeEventListener(Ng,c),setTimeout(()=>{const w=new CustomEvent(Dg,nb);a.addEventListener(Dg,d),a.dispatchEvent(w),w.defaultPrevented||ii(_??document.body,{select:!0}),a.removeEventListener(Dg,d),sb.remove(g)},0)}}},[a,c,d,g]);const T=R.useCallback(_=>{if(!n&&!r||g.paused)return;const b=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,w=document.activeElement;if(b&&w){const v=_.currentTarget,[E,O]=oq(v);E&&O?!_.shiftKey&&w===O?(_.preventDefault(),n&&ii(E,{select:!0})):_.shiftKey&&w===E&&(_.preventDefault(),n&&ii(O,{select:!0})):w===v&&_.preventDefault()}},[n,r,g.paused]);return m.jsx(Ws.div,{tabIndex:-1,...o,ref:p,onKeyDown:T})});ON.displayName=sq;function iq(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ii(r,{select:e}),document.activeElement!==n)return}function oq(t){const e=VN(t),n=rb(e,t),r=rb(e.reverse(),t);return[n,r]}function VN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function rb(t,e){for(const n of t)if(!aq(n,{upTo:e}))return n}function aq(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lq(t){return t instanceof HTMLInputElement&&"select"in t}function ii(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&lq(t)&&e&&t.select()}}var sb=uq();function uq(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ib(t,e),t.unshift(e)},remove(e){var n;t=ib(t,e),(n=t[0])==null||n.resume()}}}function ib(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function cq(t){return t.filter(e=>e.tagName!=="A")}var dq="Portal",LN=R.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=R.useState(!1);dd(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?OA.createPortal(m.jsx(Ws.div,{...r,ref:e}),o):null});LN.displayName=dq;function hq(t,e){return R.useReducer((n,r)=>e[n][r]??n,t)}var wp=t=>{const{present:e,children:n}=t,r=fq(e),s=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),i=va(r.ref,mq(s));return typeof n=="function"||r.isPresent?R.cloneElement(s,{ref:i}):null};wp.displayName="Presence";function fq(t){const[e,n]=R.useState(),r=R.useRef(null),s=R.useRef(t),i=R.useRef("none"),o=t?"mounted":"unmounted",[a,l]=hq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const c=Oh(r.current);i.current=a==="mounted"?c:"none"},[a]),dd(()=>{const c=r.current,d=s.current;if(d!==t){const p=i.current,g=Oh(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),dd(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=g=>{const _=Oh(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&_&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(i.current=Oh(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:R.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Oh(t){return(t==null?void 0:t.animationName)||"none"}function mq(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Og=0;function pq(){R.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ob()),document.body.insertAdjacentElement("beforeend",t[1]??ob()),Og++,()=>{Og===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Og--}},[])}function ob(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var hf="right-scroll-bar-position",ff="width-before-scroll-bar",gq="with-scroll-bars-hidden",yq="--removed-body-scroll-bar-size";function Vg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vq(t,e){var n=R.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var _q=typeof window<"u"?R.useLayoutEffect:R.useEffect,ab=new WeakMap;function wq(t,e){var n=vq(null,function(r){return t.forEach(function(s){return Vg(s,r)})});return _q(function(){var r=ab.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Vg(a,null)}),i.forEach(function(a){s.has(a)||Vg(a,o)})}ab.set(n,t)},[t]),n}function Eq(t){return t}function Iq(t,e){e===void 0&&(e=Eq);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function Tq(t){t===void 0&&(t={});var e=Iq(null);return e.options=qr({async:!0,ssr:!1},t),e}var MN=function(t){var e=t.sideCar,n=Ed(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,qr({},n))};MN.isSideCarExport=!0;function xq(t,e){return t.useMedium(e),MN}var FN=Tq(),Lg=function(){},Ep=R.forwardRef(function(t,e){var n=R.useRef(null),r=R.useState({onScrollCapture:Lg,onWheelCapture:Lg,onTouchMoveCapture:Lg}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,p=t.sideCar,g=t.noRelative,T=t.noIsolation,_=t.inert,b=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,E=t.gapMode,O=Ed(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=p,j=wq([n,e]),S=qr(qr({},O),s);return R.createElement(R.Fragment,null,d&&R.createElement(L,{sideCar:FN,removeScrollBar:c,shards:h,noRelative:g,noIsolation:T,inert:_,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:E}),o?R.cloneElement(R.Children.only(a),qr(qr({},S),{ref:j})):R.createElement(v,qr({},S,{className:l,ref:j}),a))});Ep.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ep.classNames={fullWidth:ff,zeroRight:hf};var bq=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Sq(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=bq();return e&&t.setAttribute("nonce",e),t}function Aq(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Rq(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var kq=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Sq())&&(Aq(e,n),Rq(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Cq=function(){var t=kq();return function(e,n){R.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},jN=function(){var t=Cq(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Pq={left:0,top:0,right:0,gap:0},Mg=function(t){return parseInt(t||"",10)||0},Nq=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Mg(n),Mg(r),Mg(s)]},Dq=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Pq;var e=Nq(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Oq=jN(),pl="data-scroll-locked",Vq=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(gq,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(pl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hf,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ff,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(hf," .").concat(hf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ff," .").concat(ff,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pl,`] {
    `).concat(yq,": ").concat(a,`px;
  }
`)},lb=function(){var t=parseInt(document.body.getAttribute(pl)||"0",10);return isFinite(t)?t:0},Lq=function(){R.useEffect(function(){return document.body.setAttribute(pl,(lb()+1).toString()),function(){var t=lb()-1;t<=0?document.body.removeAttribute(pl):document.body.setAttribute(pl,t.toString())}},[])},Mq=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Lq();var i=R.useMemo(function(){return Dq(s)},[s]);return R.createElement(Oq,{styles:Vq(i,!e,s,n?"":"!important")})},Ev=!1;if(typeof window<"u")try{var Vh=Object.defineProperty({},"passive",{get:function(){return Ev=!0,!0}});window.addEventListener("test",Vh,Vh),window.removeEventListener("test",Vh,Vh)}catch{Ev=!1}var La=Ev?{passive:!1}:!1,Fq=function(t){return t.tagName==="TEXTAREA"},UN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Fq(t)&&n[e]==="visible")},jq=function(t){return UN(t,"overflowY")},Uq=function(t){return UN(t,"overflowX")},ub=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=BN(t,r);if(s){var i=zN(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Bq=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},zq=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},BN=function(t,e){return t==="v"?jq(e):Uq(e)},zN=function(t,e){return t==="v"?Bq(e):zq(e)},$q=function(t,e){return t==="h"&&e==="rtl"?-1:1},qq=function(t,e,n,r,s){var i=$q(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,p=0;do{if(!a)break;var g=zN(t,a),T=g[0],_=g[1],b=g[2],w=_-b-i*T;(T||w)&&BN(t,a)&&(h+=w,p+=T);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(c=!0),c},Lh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},cb=function(t){return[t.deltaX,t.deltaY]},db=function(t){return t&&"current"in t?t.current:t},Wq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Gq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Hq=0,Ma=[];function Kq(t){var e=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),s=R.useState(Hq++)[0],i=R.useState(jN)[0],o=R.useRef(t);R.useEffect(function(){o.current=t},[t]),R.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=XM([t.lockRef.current],(t.shards||[]).map(db),!0).filter(Boolean);return _.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=R.useCallback(function(_,b){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var w=Lh(_),v=n.current,E="deltaX"in _?_.deltaX:v[0]-w[0],O="deltaY"in _?_.deltaY:v[1]-w[1],L,j=_.target,S=Math.abs(E)>Math.abs(O)?"h":"v";if("touches"in _&&S==="h"&&j.type==="range")return!1;var I=window.getSelection(),C=I&&I.anchorNode,A=C?C===j||C.contains(j):!1;if(A)return!1;var D=ub(S,j);if(!D)return!0;if(D?L=S:(L=S==="v"?"h":"v",D=ub(S,j)),!D)return!1;if(!r.current&&"changedTouches"in _&&(E||O)&&(r.current=L),!L)return!0;var N=r.current||L;return qq(N,b,_,N==="h"?E:O)},[]),l=R.useCallback(function(_){var b=_;if(!(!Ma.length||Ma[Ma.length-1]!==i)){var w="deltaY"in b?cb(b):Lh(b),v=e.current.filter(function(L){return L.name===b.type&&(L.target===b.target||b.target===L.shadowParent)&&Wq(L.delta,w)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var E=(o.current.shards||[]).map(db).filter(Boolean).filter(function(L){return L.contains(b.target)}),O=E.length>0?a(b,E[0]):!o.current.noIsolation;O&&b.cancelable&&b.preventDefault()}}},[]),c=R.useCallback(function(_,b,w,v){var E={name:_,delta:b,target:w,should:v,shadowParent:Qq(w)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(O){return O!==E})},1)},[]),d=R.useCallback(function(_){n.current=Lh(_),r.current=void 0},[]),h=R.useCallback(function(_){c(_.type,cb(_),_.target,a(_,t.lockRef.current))},[]),p=R.useCallback(function(_){c(_.type,Lh(_),_.target,a(_,t.lockRef.current))},[]);R.useEffect(function(){return Ma.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,La),document.addEventListener("touchmove",l,La),document.addEventListener("touchstart",d,La),function(){Ma=Ma.filter(function(_){return _!==i}),document.removeEventListener("wheel",l,La),document.removeEventListener("touchmove",l,La),document.removeEventListener("touchstart",d,La)}},[]);var g=t.removeScrollBar,T=t.inert;return R.createElement(R.Fragment,null,T?R.createElement(i,{styles:Gq(s)}):null,g?R.createElement(Mq,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Qq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Yq=xq(FN,Kq);var $N=R.forwardRef(function(t,e){return R.createElement(Ep,qr({},t,{ref:e,sideCar:Yq}))});$N.classNames=Ep.classNames;var Xq=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fa=new WeakMap,Mh=new WeakMap,Fh={},Fg=0,qN=function(t){return t&&(t.host||qN(t.parentNode))},Jq=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=qN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Zq=function(t,e,n,r){var s=Jq(e,Array.isArray(t)?t:[t]);Fh[n]||(Fh[n]=new WeakMap);var i=Fh[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(a.has(p))d(p);else try{var g=p.getAttribute(r),T=g!==null&&g!=="false",_=(Fa.get(p)||0)+1,b=(i.get(p)||0)+1;Fa.set(p,_),i.set(p,b),o.push(p),_===1&&T&&Mh.set(p,!0),b===1&&p.setAttribute(n,"true"),T||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return d(e),a.clear(),Fg++,function(){o.forEach(function(h){var p=Fa.get(h)-1,g=i.get(h)-1;Fa.set(h,p),i.set(h,g),p||(Mh.has(h)||h.removeAttribute(r),Mh.delete(h)),g||h.removeAttribute(n)}),Fg--,Fg||(Fa=new WeakMap,Fa=new WeakMap,Mh=new WeakMap,Fh={})}},eW=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Xq(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),Zq(r,s,n,"aria-hidden")):function(){return null}};function tW(t){const e=nW(t),n=R.forwardRef((r,s)=>{const{children:i,...o}=r,a=R.Children.toArray(i),l=a.find(sW);if(l){const c=l.props.children,d=a.map(h=>h===l?R.Children.count(c)>1?R.Children.only(null):R.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:R.isValidElement(c)?R.cloneElement(c,void 0,d):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function nW(t){const e=R.forwardRef((n,r)=>{const{children:s,...i}=n;if(R.isValidElement(s)){const o=oW(s),a=iW(i,s.props);return s.type!==R.Fragment&&(a.ref=r?d0(r,o):o),R.cloneElement(s,a)}return R.Children.count(s)>1?R.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var rW=Symbol("radix.slottable");function sW(t){return R.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rW}function iW(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function oW(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ip="Dialog",[WN]=O3(Ip),[aW,Dr]=WN(Ip),GN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=R.useRef(null),l=R.useRef(null),[c,d]=j3({prop:r,defaultProp:s??!1,onChange:i,caller:Ip});return m.jsx(aW,{scope:e,triggerRef:a,contentRef:l,contentId:Pg(),titleId:Pg(),descriptionId:Pg(),open:c,onOpenChange:d,onOpenToggle:R.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};GN.displayName=Ip;var HN="DialogTrigger",lW=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(HN,n),i=va(e,s.triggerRef);return m.jsx(Ws.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":m0(s.open),...r,ref:i,onClick:Mi(t.onClick,s.onOpenToggle)})});lW.displayName=HN;var h0="DialogPortal",[uW,KN]=WN(h0,{forceMount:void 0}),QN=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Dr(h0,e);return m.jsx(uW,{scope:e,forceMount:n,children:R.Children.map(r,o=>m.jsx(wp,{present:n||i.open,children:m.jsx(LN,{asChild:!0,container:s,children:o})}))})};QN.displayName=h0;var gm="DialogOverlay",YN=R.forwardRef((t,e)=>{const n=KN(gm,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Dr(gm,t.__scopeDialog);return i.modal?m.jsx(wp,{present:r||i.open,children:m.jsx(dW,{...s,ref:e})}):null});YN.displayName=gm;var cW=tW("DialogOverlay.RemoveScroll"),dW=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(gm,n);return m.jsx($N,{as:cW,allowPinchZoom:!0,shards:[s.contentRef],children:m.jsx(Ws.div,{"data-state":m0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),la="DialogContent",XN=R.forwardRef((t,e)=>{const n=KN(la,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Dr(la,t.__scopeDialog);return m.jsx(wp,{present:r||i.open,children:i.modal?m.jsx(hW,{...s,ref:e}):m.jsx(fW,{...s,ref:e})})});XN.displayName=la;var hW=R.forwardRef((t,e)=>{const n=Dr(la,t.__scopeDialog),r=R.useRef(null),s=va(e,n.contentRef,r);return R.useEffect(()=>{const i=r.current;if(i)return eW(i)},[]),m.jsx(JN,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mi(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Mi(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Mi(t.onFocusOutside,i=>i.preventDefault())})}),fW=R.forwardRef((t,e)=>{const n=Dr(la,t.__scopeDialog),r=R.useRef(!1),s=R.useRef(!1);return m.jsx(JN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),JN=R.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Dr(la,n),l=R.useRef(null),c=va(e,l);return pq(),m.jsxs(m.Fragment,{children:[m.jsx(ON,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:m.jsx(NN,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":m0(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(mW,{titleId:a.titleId}),m.jsx(gW,{contentRef:l,descriptionId:a.descriptionId})]})]})}),f0="DialogTitle",ZN=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(f0,n);return m.jsx(Ws.h2,{id:s.titleId,...r,ref:e})});ZN.displayName=f0;var e1="DialogDescription",t1=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(e1,n);return m.jsx(Ws.p,{id:s.descriptionId,...r,ref:e})});t1.displayName=e1;var n1="DialogClose",r1=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(n1,n);return m.jsx(Ws.button,{type:"button",...r,ref:e,onClick:Mi(t.onClick,()=>s.onOpenChange(!1))})});r1.displayName=n1;function m0(t){return t?"open":"closed"}var s1="DialogTitleWarning",[W8,i1]=D3(s1,{contentName:la,titleName:f0,docsSlug:"dialog"}),mW=({titleId:t})=>{const e=i1(s1),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return R.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},pW="DialogDescriptionWarning",gW=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${i1(pW).contentName}}.`;return R.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},yW=GN,vW=QN,_W=YN,o1=XN,a1=ZN,l1=t1,wW=r1;function u1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=u1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Zi(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=u1(t))&&(r&&(r+=" "),r+=e);return r}const yu=yW,_a=G.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(vW,{children:[m.jsx(_W,{className:"fixed inset-0 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),m.jsxs(o1,{ref:r,className:Zi("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",t),...n,children:[e,m.jsxs(wW,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100 data-[state=open]:text-gray-500",children:[m.jsx(c0,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_a.displayName=o1.displayName;const wa=({className:t,...e})=>m.jsx("div",{className:Zi("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});wa.displayName="DialogHeader";const Ea=({className:t,...e})=>m.jsx("div",{className:Zi("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Ea.displayName="DialogFooter";const Ia=G.forwardRef(({className:t,...e},n)=>m.jsx(a1,{ref:n,className:Zi("text-lg font-semibold leading-none tracking-tight",t),...e}));Ia.displayName=a1.displayName;const c1=G.forwardRef(({className:t,...e},n)=>m.jsx(l1,{ref:n,className:Zi("text-sm text-gray-500",t),...e}));c1.displayName=l1.displayName;const EW=D_({name:Al().min(3,"Nome deve ter pelo menos 3 caracteres"),email:Al().email("Email invlido"),role:wL(["admin","professional","client"])});function IW({open:t,onOpenChange:e,onSubmit:n}){const[r,s]=R.useState(!1),{register:i,handleSubmit:o,formState:{errors:a},reset:l}=C_({resolver:P_(EW),defaultValues:{role:"client"}}),c=async d=>{s(!0);try{await n(d),l(),e(!1)}catch(h){console.error(h)}finally{s(!1)}};return m.jsx(yu,{open:t,onOpenChange:e,children:m.jsxs(_a,{children:[m.jsx(wa,{children:m.jsx(Ia,{children:"Convidar Novo Usurio"})}),m.jsxs("form",{onSubmit:o(c),className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),m.jsx("input",{...i("name"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500"}),a.name&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.name.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),m.jsx("input",{...i("email"),type:"email",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500"}),a.email&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.email.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Perfil (Role)"}),m.jsxs("select",{...i("role"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500",children:[m.jsx("option",{value:"client",children:"Cliente"}),m.jsx("option",{value:"professional",children:"Profissional"}),m.jsx("option",{value:"admin",children:"Administrador"})]}),a.role&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.role.message})]}),m.jsxs(Ea,{children:[m.jsx("button",{type:"button",onClick:()=>e(!1),className:"mr-3 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:r,className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:r?"Criando...":"Criar Convite"})]})]})]})})}function p0({open:t,onOpenChange:e,title:n,description:r,onConfirm:s,confirmLabel:i="Confirmar",cancelLabel:o="Cancelar",variant:a="default"}){const[l,c]=R.useState(!1),d=async()=>{c(!0);try{await s(),e(!1)}catch(h){console.error(h)}finally{c(!1)}};return m.jsx(yu,{open:t,onOpenChange:e,children:m.jsxs(_a,{className:"sm:max-w-[425px]",children:[m.jsxs(wa,{children:[m.jsx(Ia,{children:n}),m.jsx(c1,{className:"py-2 text-gray-500",children:r})]}),m.jsxs(Ea,{className:"gap-2 sm:gap-0",children:[m.jsx("button",{type:"button",onClick:()=>e(!1),disabled:l,className:"mt-2 sm:mt-0 inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto sm:text-sm",children:o}),m.jsx("button",{type:"button",onClick:d,disabled:l,className:`inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-base font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 sm:w-auto sm:text-sm disabled:opacity-50 ${a==="destructive"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-primary-600 hover:bg-primary-700 focus:ring-primary-500"}`,children:l?"Processando...":i})]})]})})}const d1=6048e5,TW=864e5,hb=Symbol.for("constructDateFrom");function eo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&hb in t?t[hb](e):t instanceof Date?new t.constructor(e):new Date(e)}function Or(t,e){return eo(e||t,t)}let xW={};function Tp(){return xW}function fd(t,e){var a,l,c,d;const n=Tp(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=Or(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function ym(t,e){return fd(t,{...e,weekStartsOn:1})}function h1(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getFullYear(),s=eo(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=ym(s),o=eo(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=ym(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function fb(t){const e=Or(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function bW(t,...e){const n=eo.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function mb(t,e){const n=Or(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function SW(t,e,n){const[r,s]=bW(n==null?void 0:n.in,t,e),i=mb(r),o=mb(s),a=+i-fb(i),l=+o-fb(o);return Math.round((a-l)/TW)}function AW(t,e){const n=h1(t,e),r=eo(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),ym(r)}function RW(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function kW(t){return!(!RW(t)&&typeof t!="number"||isNaN(+Or(t)))}function CW(t,e){const n=Or(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const PW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},NW=(t,e,n)=>{let r;const s=PW[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function jg(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const DW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VW={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},LW={date:jg({formats:DW,defaultWidth:"full"}),time:jg({formats:OW,defaultWidth:"full"}),dateTime:jg({formats:VW,defaultWidth:"full"})},MW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},FW=(t,e,n,r)=>MW[t];function qu(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const jW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},UW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},BW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$W={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WW=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},GW={ordinalNumber:WW,era:qu({values:jW,defaultWidth:"wide"}),quarter:qu({values:UW,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qu({values:BW,defaultWidth:"wide"}),day:qu({values:zW,defaultWidth:"wide"}),dayPeriod:qu({values:$W,defaultWidth:"wide",formattingValues:qW,defaultFormattingWidth:"wide"})};function Wu(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?KW(a,h=>h.test(o)):HW(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function HW(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function KW(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function QW(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const YW=/^(\d+)(th|st|nd|rd)?/i,XW=/\d+/i,JW={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZW={any:[/^b/i,/^(a|c)/i]},e8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},t8={any:[/1/i,/2/i,/3/i,/4/i]},n8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},r8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},s8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},i8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},o8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},a8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},l8={ordinalNumber:QW({matchPattern:YW,parsePattern:XW,valueCallback:t=>parseInt(t,10)}),era:Wu({matchPatterns:JW,defaultMatchWidth:"wide",parsePatterns:ZW,defaultParseWidth:"any"}),quarter:Wu({matchPatterns:e8,defaultMatchWidth:"wide",parsePatterns:t8,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Wu({matchPatterns:n8,defaultMatchWidth:"wide",parsePatterns:r8,defaultParseWidth:"any"}),day:Wu({matchPatterns:s8,defaultMatchWidth:"wide",parsePatterns:i8,defaultParseWidth:"any"}),dayPeriod:Wu({matchPatterns:o8,defaultMatchWidth:"any",parsePatterns:a8,defaultParseWidth:"any"})},u8={code:"en-US",formatDistance:NW,formatLong:LW,formatRelative:FW,localize:GW,match:l8,options:{weekStartsOn:0,firstWeekContainsDate:1}};function c8(t,e){const n=Or(t,e==null?void 0:e.in);return SW(n,CW(n))+1}function d8(t,e){const n=Or(t,e==null?void 0:e.in),r=+ym(n)-+AW(n);return Math.round(r/d1)+1}function f1(t,e){var d,h,p,g;const n=Or(t,e==null?void 0:e.in),r=n.getFullYear(),s=Tp(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(p=s.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=eo((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=fd(o,e),l=eo((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=fd(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function h8(t,e){var a,l,c,d;const n=Tp(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=f1(t,e),i=eo((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),fd(i,e)}function f8(t,e){const n=Or(t,e==null?void 0:e.in),r=+fd(n,e)-+h8(n,e);return Math.round(r/d1)+1}function qe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const si={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return qe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):qe(n+1,2)},d(t,e){return qe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return qe(t.getHours()%12||12,e.length)},H(t,e){return qe(t.getHours(),e.length)},m(t,e){return qe(t.getMinutes(),e.length)},s(t,e){return qe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return qe(s,e.length)}},ja={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pb={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return si.y(t,e)},Y:function(t,e,n,r){const s=f1(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return qe(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):qe(i,e.length)},R:function(t,e){const n=h1(t);return qe(n,e.length)},u:function(t,e){const n=t.getFullYear();return qe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return si.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return qe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=f8(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):qe(s,e.length)},I:function(t,e,n){const r=d8(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):qe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):si.d(t,e)},D:function(t,e,n){const r=c8(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):qe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return qe(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return qe(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return qe(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=ja.noon:r===0?s=ja.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=ja.evening:r>=12?s=ja.afternoon:r>=4?s=ja.morning:s=ja.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return si.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):si.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):si.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):si.s(t,e)},S:function(t,e){return si.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return yb(r);case"XXXX":case"XX":return Ao(r);case"XXXXX":case"XXX":default:return Ao(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return yb(r);case"xxxx":case"xx":return Ao(r);case"xxxxx":case"xxx":default:return Ao(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+gb(r,":");case"OOOO":default:return"GMT"+Ao(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+gb(r,":");case"zzzz":default:return"GMT"+Ao(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return qe(r,e.length)},T:function(t,e,n){return qe(+t,e.length)}};function gb(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+qe(i,2)}function yb(t,e){return t%60===0?(t>0?"-":"+")+qe(Math.abs(t)/60,2):Ao(t,e)}function Ao(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=qe(Math.trunc(r/60),2),i=qe(r%60,2);return n+s+e+i}const vb=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},m1=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},m8=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return vb(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",vb(r,e)).replace("{{time}}",m1(s,e))},p8={p:m1,P:m8},g8=/^D+$/,y8=/^Y+$/,v8=["D","DD","YY","YYYY"];function _8(t){return g8.test(t)}function w8(t){return y8.test(t)}function E8(t,e,n){const r=I8(t,e,n);if(console.warn(r),v8.includes(t))throw new RangeError(r)}function I8(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const T8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,x8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,b8=/^'([^]*?)'?$/,S8=/''/g,A8=/[a-zA-Z]/;function g0(t,e,n){var d,h,p,g;const r=Tp(),s=r.locale??u8,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,a=Or(t,n==null?void 0:n.in);if(!kW(a))throw new RangeError("Invalid time value");let l=e.match(x8).map(T=>{const _=T[0];if(_==="p"||_==="P"){const b=p8[_];return b(T,s.formatLong)}return T}).join("").match(T8).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const _=T[0];if(_==="'")return{isToken:!1,value:R8(T)};if(pb[_])return{isToken:!0,value:T};if(_.match(A8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:T}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(T=>{if(!T.isToken)return T.value;const _=T.value;(w8(_)||_8(_))&&E8(_,e,String(t));const b=pb[_[0]];return b(a,_,s.localize,c)}).join("")}function R8(t){const e=t.match(b8);return e?e[1].replace(S8,"'"):t}function k8(){const[t,e]=R.useState("users"),[n,r]=R.useState([]),[s,i]=R.useState([]),[o,a]=R.useState(!0),[l,c]=R.useState(!1),[d,h]=R.useState({open:!1,title:"",description:"",onConfirm:async()=>{}});R.useEffect(()=>{p()},[t]);const p=async()=>{a(!0);try{if(t==="users"){const v=await cr.getAll();r(v)}else{const v=await cr.getAllInvites();i(v)}}catch(v){Ie.error("Erro ao carregar dados"),console.error(v)}finally{a(!1)}},g=async v=>{try{await cr.createInvite(v),Ie.success("Convite criado com sucesso!"),t==="invites"&&p()}catch(E){Ie.error(E.message||"Erro ao criar convite")}},T=async v=>{if(confirm("Tem certeza que deseja remover este convite?"))try{await cr.deleteInvite(v),Ie.success("Convite removido!"),p()}catch{Ie.error("Erro ao remover convite")}},_=v=>{const E=v.active?"desativar":"ativar";h({open:!0,title:`${v.active?"Desativar":"Ativar"} Usurio`,description:`Tem certeza que deseja ${E} o usurio "${v.name}"? Ele ${v.active?"perder":"ter"} acesso ao sistema.`,variant:v.active?"destructive":"default",onConfirm:async()=>{await cr.update(v.uid,{active:!v.active}),Ie.success(`Usurio ${v.active?"desativado":"ativado"}!`),p()}})},b=v=>{h({open:!0,title:"Excluir Usurio",description:`Tem certeza que deseja EXCLUIR PERMANENTEMENTE o usurio "${v.name}"? Esta ao no pode ser desfeita.`,variant:"destructive",onConfirm:async()=>{await cr.deleteUser(v.uid),Ie.success("Usurio excludo!"),p()}})},w=v=>{const E={admin:"bg-purple-100 text-purple-800",professional:"bg-blue-100 text-blue-800",client:"bg-green-100 text-green-800"};return m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E[v]||"bg-gray-100 text-gray-800"}`,children:v==="professional"?"Profissional":v==="client"?"Cliente":"Administrador"})};return m.jsxs("div",{className:"space-y-6",children:[m.jsx(zd,{position:"top-right"}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Usurios"}),m.jsx("p",{className:"text-gray-500",children:"Gerencie quem tem acesso ao sistema"})]}),m.jsxs("button",{onClick:()=>c(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 flex items-center",children:[m.jsx(ud,{className:"w-5 h-5 mr-2"}),"Novo Usurio"]})]}),m.jsx("div",{className:"border-b border-gray-200",children:m.jsxs("nav",{className:"-mb-px flex space-x-8",children:[m.jsx("button",{onClick:()=>e("users"),className:Zi(t==="users"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm"),children:"Usurios Ativos"}),m.jsx("button",{onClick:()=>e("invites"),className:Zi(t==="invites"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm"),children:"Convites Pendentes"})]})}),o?m.jsx("div",{className:"flex justify-center py-12",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):t==="users"?m.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:m.jsxs("ul",{className:"divide-y divide-gray-200",children:[n.length===0&&m.jsx("p",{className:"p-6 text-center text-gray-500",children:"Nenhum usurio encontrado."}),n.map(v=>{var E;return m.jsx("li",{children:m.jsxs("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:`h-10 w-10 flex-shrink-0 rounded-full flex items-center justify-center font-bold uppercase ${v.active?"bg-gray-200 text-gray-500":"bg-red-100 text-red-400"}`,children:(E=v.name)==null?void 0:E[0]}),m.jsxs("div",{className:"ml-4",children:[m.jsx("div",{className:`text-sm font-medium ${v.active?"text-primary-600":"text-gray-400 line-through"}`,children:v.name}),m.jsx("div",{className:"text-sm text-gray-500",children:v.email})]})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[w(v.role),m.jsx("span",{className:`px-2 py-1 text-xs rounded ${v.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.active?"Ativo":"Inativo"}),m.jsx("button",{onClick:()=>_(v),className:`p-2 rounded-full transition-colors ${v.active?"text-gray-400 hover:text-red-600 hover:bg-red-50":"text-green-500 hover:text-green-700 hover:bg-green-50"}`,title:v.active?"Desativar usurio":"Ativar usurio",children:m.jsx(CN,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>b(v),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Excluir usurio",children:m.jsx(pm,{className:"w-5 h-5"})})]})]})},v.uid)})]})}):m.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:m.jsxs("ul",{className:"divide-y divide-gray-200",children:[s.length===0&&m.jsx("p",{className:"p-6 text-center text-gray-500",children:"Nenhum convite pendente."}),s.map(v=>{var E;return m.jsx("li",{children:m.jsxs("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"h-10 w-10 flex-shrink-0 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600",children:m.jsx(A3,{className:"w-5 h-5"})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.email}),m.jsxs("div",{className:"text-sm text-gray-500",children:["Para: ",v.name]})]})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[w(v.role),m.jsx("div",{className:"text-sm text-gray-400",children:(E=v.createdAt)!=null&&E.toDate?g0(v.createdAt.toDate(),"dd/MM/yyyy"):"Hoje"}),m.jsx("button",{onClick:()=>T(v.id),className:"text-red-400 hover:text-red-600",children:m.jsx(pm,{className:"w-5 h-5"})})]})]})},v.id)})]})}),m.jsx(IW,{open:l,onOpenChange:c,onSubmit:g}),m.jsx(p0,{open:d.open,onOpenChange:v=>h(E=>({...E,open:v})),title:d.title,description:d.description,onConfirm:d.onConfirm,variant:d.variant})]})}const C8=D_({name:Al().min(2,"Nome deve ter pelo menos 2 caracteres"),userId:Al().optional(),active:_L().default(!0)});function P8({open:t,onOpenChange:e,onSubmit:n,initialData:r}){const[s,i]=R.useState(!1),[o,a]=R.useState([]),{register:l,handleSubmit:c,formState:{errors:d},reset:h,setValue:p,watch:g}=C_({resolver:P_(C8),defaultValues:{active:!0}});R.useEffect(()=>{t&&(h(r||{active:!0,name:"",userId:""}),T())},[t,r,h]);const T=async()=>{try{const b=await cr.getAll();a(b.filter(w=>w.role==="client"&&w.active))}catch(b){console.error(b),Ie.error("Erro ao carregar usurios")}},_=async b=>{i(!0);try{await n(b),e(!1)}catch(w){console.error(w)}finally{i(!1)}};return m.jsx(yu,{open:t,onOpenChange:e,children:m.jsxs(_a,{children:[m.jsx(wa,{children:m.jsx(Ia,{children:r?"Editar Cliente":"Novo Cliente"})}),m.jsxs("form",{onSubmit:c(_),className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome do Cliente / Empresa"}),m.jsx("input",{...l("name"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500",placeholder:"Ex: Clinica X"}),d.name&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vincular Usurio (Login)"}),m.jsxs("select",{...l("userId"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500",children:[m.jsx("option",{value:"",children:"-- Sem vnculo --"}),o.map(b=>m.jsxs("option",{value:b.uid,children:[b.name," (",b.email,")"]},b.uid))]}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecione um usurio com perfil 'Cliente' para dar acesso a este painel."})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{id:"active",type:"checkbox",...l("active"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Cliente Ativo"})]}),m.jsxs(Ea,{children:[m.jsx("button",{type:"button",onClick:()=>e(!1),className:"mr-3 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none",children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:s,className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none disabled:opacity-50",children:s?"Salvando...":"Salvar"})]})]})]})})}function N8({open:t,onOpenChange:e,clientId:n,currentAssignees:r,onSuccess:s}){const[i,o]=R.useState(!1),[a,l]=R.useState([]),[c,d]=R.useState([]);R.useEffect(()=>{t&&(h(),d(r||[]))},[t,r]);const h=async()=>{try{const T=await cr.getAll();l(T.filter(_=>_.role==="professional"&&_.active))}catch{Ie.error("Erro ao carregar profissionais")}},p=T=>{d(_=>_.includes(T)?_.filter(b=>b!==T):[..._,T])},g=async()=>{o(!0);try{await Sr.assignProfessionals(n,c),Ie.success("Atribuies atualizadas!"),s(),e(!1)}catch{Ie.error("Erro ao salvar atribuies")}finally{o(!1)}};return m.jsx(yu,{open:t,onOpenChange:e,children:m.jsxs(_a,{className:"max-w-md",children:[m.jsx(wa,{children:m.jsx(Ia,{children:"Atribuir Profissionais"})}),m.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-2 py-4",children:[a.length===0&&m.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum profissional ativo encontrado."}),a.map(T=>m.jsxs("div",{className:`flex items-center p-3 rounded-md border cursor-pointer transition-colors ${c.includes(T.uid)?"border-primary-500 bg-primary-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>p(T.uid),children:[m.jsx("input",{type:"checkbox",checked:c.includes(T.uid),readOnly:!0,className:"h-4 w-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500"}),m.jsxs("div",{className:"ml-3",children:[m.jsx("p",{className:"text-sm font-medium text-gray-900",children:T.name}),m.jsx("p",{className:"text-xs text-gray-500",children:T.email})]})]},T.uid))]}),m.jsxs(Ea,{children:[m.jsx("button",{onClick:()=>e(!1),className:"mr-3 px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),m.jsx("button",{onClick:g,disabled:i,className:"px-4 py-2 text-sm text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50",children:i?"Salvando...":"Salvar Alteraes"})]})]})})}function _b(){const t=da(),[e,n]=R.useState([]),[r,s]=R.useState([]),[i,o]=R.useState(!0),[a,l]=R.useState(""),{profile:c}=vr(),d=(c==null?void 0:c.role)==="admin",[h,p]=R.useState(!1),[g,T]=R.useState(null),[_,b]=R.useState(!1),[w,v]=R.useState(null),[E,O]=R.useState({open:!1,title:"",description:"",onConfirm:async()=>{}});R.useEffect(()=>{L()},[c]),R.useEffect(()=>{if(!a)s(e);else{const A=a.toLowerCase();s(e.filter(D=>D.name.toLowerCase().includes(A)))}},[a,e]);const L=async()=>{if(c){o(!0);try{let A=[];c.role==="admin"?A=await Sr.getAll():c.role==="professional"&&(A=await Sr.getMyClients(c.uid)),n(A)}catch(A){Ie.error("Erro ao carregar clientes"),console.error(A)}finally{o(!1)}}},j=async A=>{try{g?(await Sr.update(g.id,A),Ie.success("Cliente atualizado!")):(await Sr.create(A),Ie.success("Cliente criado!")),T(null),L()}catch(D){Ie.error(D.message||"Erro ao salvar cliente")}},S=A=>{const D=A.active?"desativar":"ativar";O({open:!0,title:`${A.active?"Desativar":"Ativar"} Cliente`,description:`Tem certeza que deseja ${D} o cliente "${A.name}"?`,variant:A.active?"destructive":"default",onConfirm:async()=>{await Sr.update(A.id,{active:!A.active}),Ie.success(`Cliente ${A.active?"desativado":"ativado"}!`),L()}})},I=A=>{O({open:!0,title:"Excluir Cliente",description:`Tem certeza que deseja EXCLUIR PERMANENTEMENTE o cliente "${A.name}"? Todos os dados associados sero perdidos.`,variant:"destructive",onConfirm:async()=>{await Sr.delete(A.id),Ie.success("Cliente excludo!"),L()}})},C=A=>{v(A),b(!0)};return m.jsxs("div",{className:"space-y-6",children:[m.jsx(zd,{position:"top-right"}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Clientes"}),m.jsx("p",{className:"text-gray-500",children:d?"Gerencie clientes e atribuies":"Meus clientes atribudos"})]}),d&&m.jsxs("button",{onClick:()=>{T(null),p(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 flex items-center",children:[m.jsx(ud,{className:"w-5 h-5 mr-2"}),"Novo Cliente"]})]}),m.jsxs("div",{className:"flex items-center bg-white p-2 rounded-md shadow-sm border border-gray-200 w-full max-w-sm",children:[m.jsx(k3,{className:"w-5 h-5 text-gray-400 mr-2"}),m.jsx("input",{type:"text",placeholder:"Buscar por nome...",className:"flex-1 outline-none text-sm",value:a,onChange:A=>l(A.target.value)})]}),i?m.jsx("div",{className:"flex justify-center py-12",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):m.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:m.jsxs("ul",{className:"divide-y divide-gray-200",children:[r.length===0&&m.jsx("p",{className:"p-6 text-center text-gray-500",children:"Nenhum cliente encontrado."}),r.map(A=>{var D,N;return m.jsx("li",{children:m.jsxs("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"h-10 w-10 flex-shrink-0 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold uppercase",children:A.name[0]}),m.jsxs("div",{className:"ml-4",children:[m.jsx("div",{className:"text-sm font-medium text-primary-600",children:A.name}),m.jsxs("div",{className:"text-xs text-gray-400",children:["Criado em: ",(D=A.createdAt)!=null&&D.toDate?g0(A.createdAt.toDate(),"dd/MM/yyyy"):"-"]}),m.jsxs("div",{className:"flex items-center mt-1",children:[m.jsx(cd,{className:"w-3 h-3 text-gray-400 mr-1"}),m.jsxs("span",{className:"text-xs text-gray-500",children:[((N=A.assignedProfessionalIds)==null?void 0:N.length)||0," profissionais"]})]})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${A.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.active?"Ativo":"Inativo"}),d?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>t(`/clients/${A.id}`),className:"p-2 text-gray-400 hover:text-primary-600",title:"Ver Detalhes e Pendncias",children:m.jsx(Xx,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>C(A),className:"p-2 text-gray-400 hover:text-gray-600",title:"Atribuir Profissionais",children:m.jsx(cd,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>{T(A),p(!0)},className:"p-2 text-gray-400 hover:text-primary-600",title:"Editar",children:m.jsx(R3,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>S(A),className:`p-2 rounded-full transition-colors ${A.active?"text-gray-400 hover:text-red-600 hover:bg-red-50":"text-green-500 hover:text-green-700 hover:bg-green-50"}`,title:A.active?"Desativar cliente":"Ativar cliente",children:m.jsx(CN,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>I(A),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Excluir cliente",children:m.jsx(pm,{className:"w-5 h-5"})})]}):m.jsx("button",{onClick:()=>t(`/professional/clients/${A.id}`),className:"p-2 text-gray-400 hover:text-primary-600",title:"Ver detalhes",children:m.jsx(Xx,{className:"w-5 h-5"})})]})]})},A.id)})]})}),m.jsx(P8,{open:h,onOpenChange:p,onSubmit:j,initialData:g}),w&&m.jsx(N8,{open:_,onOpenChange:A=>{b(A),A||v(null)},clientId:w.id,currentAssignees:w.assignedProfessionalIds||[],onSuccess:L}),m.jsx(p0,{open:E.open,onOpenChange:A=>O(D=>({...D,open:A})),title:E.title,description:E.description,onConfirm:E.onConfirm,variant:E.variant})]})}const wb=["Contrato","Documento Pessoal","Comprovante","Relatrio","Outros"];function p1({open:t,onOpenChange:e,client:n,onSuccess:r}){const{profile:s}=vr(),[i,o]=R.useState(null),[a,l]=R.useState(wb[0]),[c,d]=R.useState(""),[h,p]=R.useState(!1),[g,T]=R.useState(0),_=w=>{w.target.files&&w.target.files[0]&&o(w.target.files[0])},b=async()=>{if(!i||!s)return;p(!0),T(0);const w={clientId:n.id,uploadedByUid:s.uid,uploadedByRole:s.role,category:a,note:c,clientUserId:n.userId,assignedProfessionalIds:n.assignedProfessionalIds};try{await Vi.upload(i,w,v=>T(v)),Ie.success("Documento enviado com sucesso!"),r(),e(!1),o(null),d(""),T(0)}catch(v){console.error(v),Ie.error("Erro ao enviar documento")}finally{p(!1)}};return m.jsx(yu,{open:t,onOpenChange:e,children:m.jsxs(_a,{className:"sm:max-w-md",children:[m.jsx(wa,{children:m.jsx(Ia,{children:"Enviar Documento"})}),m.jsxs("div",{className:"space-y-4 py-4",children:[i?m.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-md border border-blue-100",children:[m.jsxs("div",{className:"flex items-center overflow-hidden",children:[m.jsx(D8,{fileName:i.name}),m.jsxs("div",{className:"ml-3 truncate",children:[m.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:i.name}),m.jsxs("p",{className:"text-xs text-blue-700",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]}),m.jsx("button",{onClick:()=>o(null),disabled:h,className:"p-1 hover:bg-blue-100 rounded-full text-blue-500",children:m.jsx(c0,{className:"w-4 h-4"})})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg p-12 cursor-pointer hover:bg-gray-50 transition-colors relative",children:[m.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:_,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx,.xls,.xlsx"}),m.jsx(RN,{className:"w-12 h-12 text-gray-400 mb-2"}),m.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Clique ou arraste para enviar"}),m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, Imagens, Office (Max 10MB)"})]}),i&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),m.jsx("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm p-2 border",value:a,onChange:w=>l(w.target.value),disabled:h,children:wb.map(w=>m.jsx("option",{children:w},w))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observao (Opcional)"}),m.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm p-2 border",value:c,onChange:w=>d(w.target.value),placeholder:"Ex: Assinado na pgina 2...",disabled:h})]})]}),h&&m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[m.jsx("span",{children:"Enviando..."}),m.jsxs("span",{children:[g.toFixed(0),"%"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${g}%`}})})]})]}),m.jsxs(Ea,{children:[m.jsx("button",{onClick:()=>e(!1),disabled:h,className:"mr-3 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),m.jsx("button",{onClick:b,disabled:!i||h,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Enviando...":"Enviar Arquivo"})]})]})})}function D8({fileName:t}){return m.jsx(RN,{className:"w-8 h-8 text-blue-400"})}function g1({documents:t,onDelete:e,onStatusChange:n,readOnly:r=!1}){const{profile:s}=vr(),i=(s==null?void 0:s.role)==="admin",o=(s==null?void 0:s.role)==="professional",a=!r&&(i||o),l=!r&&i;return t.length===0?m.jsx("div",{className:"text-center py-10 text-gray-500",children:"Nenhum documento encontrado."}):m.jsx("div",{className:"overflow-x-auto border rounded-lg",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria / Obs"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(c=>m.jsxs("tr",{children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(_p,{className:"h-5 w-5 text-gray-400 mr-2"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",title:c.fileName,children:c.fileName}),m.jsxs("div",{className:"text-xs text-gray-500",children:[(c.fileSize/1024/1024).toFixed(2)," MB"]})]})]})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[m.jsx("div",{className:"text-sm text-gray-900",children:c.category}),m.jsx("div",{className:"text-xs text-gray-500 truncate max-w-[150px]",title:c.note,children:c.note})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx(O8,{status:c.status})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.createdAt&&c.createdAt.toDate?g0(c.createdAt.toDate(),"dd/MM/yyyy HH:mm"):"-"}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[m.jsx("a",{href:c.downloadURL||"#",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-900 p-1",title:"Baixar",children:m.jsx(b3,{className:"w-5 h-5"})}),a&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>n==null?void 0:n(c,"approved"),className:"text-green-600 hover:text-green-900 p-1",title:"Aprovar",children:m.jsx(T3,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>n==null?void 0:n(c,"rejected"),className:"text-red-500 hover:text-red-900 p-1",title:"Rejeitar",children:m.jsx(c0,{className:"w-5 h-5"})})]}),l&&m.jsx("button",{onClick:()=>e==null?void 0:e(c),className:"text-gray-400 hover:text-red-600 p-1",title:"Excluir",children:m.jsx(pm,{className:"w-5 h-5"})})]})})]},c.id))})]})})}function O8({status:t}){const e={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},n={pending:"Pendente",approved:"Aprovado",rejected:"Rejeitado"};return m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e[t]||e.pending}`,children:n[t]||t})}function y1({todos:t,onResolve:e,readOnly:n=!1}){return t.length===0?m.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[m.jsx(Yx,{className:"mx-auto h-12 w-12 text-gray-300"}),m.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhuma pendncia"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Tudo em dia por aqui!"})]}):m.jsx("div",{className:"space-y-4",children:t.map(r=>{var i,o;const s=r.status==="resolved";return m.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-sm border border-gray-200 flex items-start justify-between transition-opacity ${s?"opacity-60 bg-gray-50":""}`,children:[m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:`mt-1 ${s?"text-green-500":"text-amber-500"}`,children:s?m.jsx(Yx,{className:"w-5 h-5"}):m.jsx(AN,{className:"w-5 h-5"})}),m.jsxs("div",{children:[m.jsx("h4",{className:`text-sm font-medium ${s?"text-gray-500 line-through":"text-gray-900"}`,children:r.title}),r.description&&m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r.description}),m.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-xs text-gray-400",children:[m.jsxs("span",{className:"bg-gray-100 px-2 py-0.5 rounded",children:["Para: ",r.assignedToRole==="client"?"Cliente":"Profissional"]}),m.jsx("span",{children:""}),m.jsx("span",{children:new Date(((o=(i=r.createdAt)==null?void 0:i.toDate)==null?void 0:o.call(i))||Date.now()).toLocaleDateString()}),r.resolvedAt&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsxs("span",{className:"text-green-600",children:["Resolvido em ",new Date(r.resolvedAt.toDate()).toLocaleDateString()]})]})]})]})]}),!s&&!n&&m.jsx("button",{onClick:()=>e(r),className:"text-sm text-blue-600 hover:text-blue-800 font-medium whitespace-nowrap ml-4",children:"Marcar como resolvida"})]},r.id)})})}function V8({open:t,onOpenChange:e,client:n,onSuccess:r}){const{profile:s}=vr(),[i,o]=R.useState(""),[a,l]=R.useState(""),[c,d]=R.useState("client"),[h,p]=R.useState(!1),g=async()=>{if(!(!i||!s)){p(!0);try{await Li.create({clientId:n.id,title:i,description:a,createdByUid:s.uid,createdByRole:s.role,assignedToRole:c,clientUserId:n.userId,assignedProfessionalIds:n.assignedProfessionalIds}),Ie.success("Pendncia criada com sucesso!"),r(),e(!1),o(""),l(""),d("client")}catch(_){console.error(_),Ie.error("Erro ao criar pendncia")}finally{p(!1)}}},T=(s==null?void 0:s.role)==="admin";return m.jsx(yu,{open:t,onOpenChange:e,children:m.jsxs(_a,{className:"sm:max-w-md",children:[m.jsx(wa,{children:m.jsx(Ia,{children:"Nova Pendncia"})}),m.jsxs("div",{className:"space-y-4 py-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo"}),m.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm p-2 border",value:i,onChange:_=>o(_.target.value),placeholder:"Ex: Enviar comprovante de pagamento",disabled:h})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio (Opcional)"}),m.jsx("textarea",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm p-2 border",rows:3,value:a,onChange:_=>l(_.target.value),placeholder:"Detalhes adicionais...",disabled:h})]}),T&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atribuir para"}),m.jsxs("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm p-2 border",value:c,onChange:_=>d(_.target.value),disabled:h,children:[m.jsx("option",{value:"client",children:"Cliente"}),m.jsx("option",{value:"professional",children:"Profissional"})]})]})]}),m.jsxs(Ea,{children:[m.jsx("button",{onClick:()=>e(!1),disabled:h,className:"mr-3 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),m.jsx("button",{onClick:g,disabled:!i||h,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50",children:h?"Criando...":"Criar Pendncia"})]})]})})}function Eb(){var D,N;const{id:t}=WV(),e=da(),{profile:n}=vr(),[r,s]=R.useState(null),[i,o]=R.useState(!0),[a,l]=R.useState("overview"),[c,d]=R.useState([]),[h,p]=R.useState([]),[g,T]=R.useState(!1),[_,b]=R.useState([]),[w,v]=R.useState(!1),[E,O]=R.useState({open:!1,title:"",description:"",onConfirm:async()=>{}});R.useEffect(()=>{t&&(L(t),j(t),S(t))},[t]);const L=async k=>{var pe,Le;o(!0);try{const Me=await Sr.getById(k);if(!Me){Ie.error("Cliente no encontrado"),e("/professional/clients");return}if((n==null?void 0:n.role)==="professional"&&!((pe=Me.assignedProfessionalIds)==null?void 0:pe.includes(n.uid))){Ie.error("Voc no tem acesso a este cliente"),e("/professional/clients");return}if(s(Me),(Le=Me.assignedProfessionalIds)!=null&&Le.length){const J=(await cr.getAll()).filter(K=>{var ae;return(ae=Me.assignedProfessionalIds)==null?void 0:ae.includes(K.uid)});d(J)}}catch(Me){console.error(Me),Ie.error("Erro ao carregar detalhes")}finally{o(!1)}},j=async k=>{try{const pe=await Vi.getByClientId(k,n?{uid:n.uid,role:n.role}:void 0);p(pe)}catch(pe){console.error(pe),Ie.error("Erro ao carregar documentos")}},S=async k=>{try{const pe=await Li.getByClientId(k,n?{uid:n.uid,role:n.role}:void 0);b(pe)}catch(pe){console.error(pe),Ie.error("Erro ao carregar pendncias")}},I=async k=>{if(n)try{await Li.updateStatus(k.id,"resolved",n.uid),Ie.success("Pendncia resolvida!"),r&&S(r.id)}catch{Ie.error("Erro ao atualizar pendncia")}},C=async(k,pe)=>{try{await Vi.updateStatus(k.id,pe),Ie.success(`Documento ${pe==="approved"?"aprovado":"rejeitado"}!`),r&&j(r.id)}catch{Ie.error("Erro ao atualizar status")}},A=k=>{O({open:!0,title:"Excluir Documento",description:`Tem certeza que deseja excluir "${k.fileName}"?`,variant:"destructive",onConfirm:async()=>{r&&(await Vi.delete(k.id,k.filePath),Ie.success("Documento excludo!"),j(r.id))}})};return i?m.jsx("div",{className:"flex h-full items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):r?m.jsxs("div",{className:"space-y-6",children:[m.jsx(zd,{position:"top-right"}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500",children:m.jsx(E3,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),m.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[m.jsx("span",{className:`inline-flex px-2 text-xs font-semibold rounded-full ${r.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.active?"Ativo":"Inativo"}),m.jsx("span",{children:""}),m.jsxs("span",{children:["Cadastrado em ",((N=(D=r.createdAt)==null?void 0:D.toDate)==null?void 0:N.call(D).toLocaleDateString())||"-"]})]})]})]}),m.jsx("div",{className:"border-b border-gray-200",children:m.jsxs("nav",{className:"-mb-px flex space-x-8",children:[m.jsxs("button",{onClick:()=>l("overview"),className:`
                            whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center
                            ${a==="overview"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                        `,children:[m.jsx(kN,{className:"w-4 h-4 mr-2"}),"Viso Geral"]}),m.jsxs("button",{onClick:()=>l("tasks"),className:`
                            whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center
                            ${a==="tasks"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                        `,children:[m.jsx(mm,{className:"w-4 h-4 mr-2"}),"Pendncias",m.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:_.filter(k=>k.status==="open").length})]}),m.jsxs("button",{onClick:()=>l("documents"),className:`
                            whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center
                            ${a==="documents"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                        `,children:[m.jsx(_p,{className:"w-4 h-4 mr-2"}),"Documentos",m.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:h.length})]})]})}),m.jsxs("div",{className:"mt-6",children:[a==="overview"&&m.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaes do Cliente"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nome da Empresa"}),m.jsx("div",{className:"mt-1 text-sm text-gray-900",children:r.name})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),m.jsx("div",{className:"mt-1 text-sm text-gray-900",children:r.active?"Ativo":"Inativo"})]}),m.jsxs("div",{className:"col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:"Equipe Tcnica Atribuda"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:c.length>0?c.map(k=>m.jsxs("div",{className:"flex items-center bg-gray-50 rounded-full px-3 py-1 border border-gray-200",children:[m.jsx("div",{className:"h-6 w-6 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center text-xs font-bold mr-2",children:k.name[0]}),m.jsx("span",{className:"text-sm text-gray-700",children:k.name})]},k.uid)):m.jsx("span",{className:"text-sm text-gray-400 italic",children:"Nenhum profissional atribudo."})})]})]})]}),a==="tasks"&&m.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pendncias"}),m.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700",children:[m.jsx(ud,{className:"w-5 h-5 mr-2"}),"Nova Pendncia"]})]}),m.jsx(y1,{todos:_,onResolve:I})]}),a==="documents"&&m.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Documentos"}),m.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700",children:[m.jsx(ud,{className:"w-5 h-5 mr-2"}),"Novo Documento"]})]}),m.jsx(g1,{documents:h,onStatusChange:C,onDelete:A})]})]}),r&&m.jsx(p1,{open:g,onOpenChange:T,client:r,onSuccess:()=>j(r.id)}),r&&m.jsx(V8,{open:w,onOpenChange:v,client:r,onSuccess:()=>S(r.id)}),m.jsx(p0,{open:E.open,onOpenChange:k=>O(pe=>({...pe,open:k})),title:E.title,description:E.description,onConfirm:E.onConfirm,variant:E.variant})]}):null}function L8(){var _;const{profile:t}=vr(),[e,n]=R.useState(null),[r,s]=R.useState(!0),[i,o]=R.useState("overview"),[a,l]=R.useState([]),[c,d]=R.useState([]),[h,p]=R.useState(!1);R.useEffect(()=>{t!=null&&t.uid&&g()},[t]);const g=async()=>{s(!0);try{if(!(t!=null&&t.uid))return;const b=await Sr.getMyClientByUserId(t.uid);if(n(b),b){const w=await Li.getByClientId(b.id,{uid:t.uid,role:t.role});l(w);const v=await Vi.getByClientId(b.id,{uid:t.uid,role:t.role});d(v)}}catch(b){console.error(b),Ie.error("Erro ao carregar informaes")}finally{s(!1)}},T=async b=>{if(!(!t||!e))try{await Li.updateStatus(b.id,"resolved",t.uid),Ie.success("Tarefas atualizada!");const w=await Li.getByClientId(e.id,{uid:t.uid,role:t.role});l(w)}catch(w){console.error(w),Ie.error("Erro ao atualizar tarefa")}};return r?m.jsx("div",{className:"flex h-full items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?m.jsxs("div",{className:"space-y-6",children:[m.jsx(zd,{position:"top-right"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Meu Painel"}),m.jsxs("p",{className:"text-gray-500",children:["Bem-vindo, ",t==null?void 0:t.name]})]}),m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-bold text-primary-900",children:e.name}),m.jsx("p",{className:"text-sm text-gray-500",children:"Empresa Vinculada"})]}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${e.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.active?"Situao Regular":"Situao Irregular"})]}),m.jsx("div",{className:"border-b border-gray-200",children:m.jsxs("nav",{className:"-mb-px flex space-x-8",children:[m.jsxs("button",{onClick:()=>o("overview"),className:`
                            whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center
                            ${i==="overview"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                        `,children:[m.jsx(kN,{className:"w-4 h-4 mr-2"}),"Viso Geral"]}),m.jsxs("button",{onClick:()=>o("tasks"),className:`
                            whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center
                            ${i==="tasks"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                        `,children:[m.jsx(mm,{className:"w-4 h-4 mr-2"}),"Pendncias",m.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:a.filter(b=>b.status==="open").length})]}),m.jsxs("button",{onClick:()=>o("documents"),className:`
                            whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center
                            ${i==="documents"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                        `,children:[m.jsx(_p,{className:"w-4 h-4 mr-2"}),"Documentos",m.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:c.length})]})]})}),m.jsxs("div",{className:"mt-6",children:[i==="overview"&&m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[m.jsx("h3",{className:"text-gray-500 text-xs font-medium uppercase tracking-wider",children:"Profissionais Atendendo"}),m.jsx("div",{className:"mt-4 flex items-center",children:m.jsx("span",{className:"text-3xl font-bold text-gray-900",children:((_=e.assignedProfessionalIds)==null?void 0:_.length)||0})})]})}),i==="tasks"&&m.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Minhas Pendncias"}),m.jsx(y1,{todos:a,onResolve:T})]}),i==="documents"&&m.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Meus Documentos"}),m.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700",children:[m.jsx(ud,{className:"w-5 h-5 mr-2"}),"Novo Documento"]})]}),m.jsx(g1,{documents:c,readOnly:!0})]})]}),e&&m.jsx(p1,{open:h,onOpenChange:p,client:e,onSuccess:()=>g()})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-6",children:[m.jsx("div",{className:"bg-yellow-100 p-4 rounded-full mb-4",children:m.jsx(C3,{className:"w-12 h-12 text-yellow-600"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Pendente"}),m.jsx("p",{className:"text-gray-500 max-w-md",children:"Seu usurio foi criado com sucesso, mas ainda no identificamos um cadastro de Empresa/Cliente vinculado ao seu perfil."}),m.jsx("p",{className:"text-gray-500 max-w-md mt-2",children:"Por favor, entre em contato com o suporte ou seu gestor para realizar a vinculao."})]})}function M8(){const{profile:t}=vr(),e=Xl(),n=()=>aa.signOut();if(!t)return null;const r=({to:s,icon:i,label:o})=>{const a=e.pathname===s;return m.jsxs(y2,{to:s,className:Zi("flex items-center px-4 py-2 rounded-md transition-colors",a?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[m.jsx(i,{className:"w-5 h-5 mr-3"}),m.jsx("span",{className:"font-medium",children:o})]})};return m.jsxs("div",{className:"flex h-screen bg-gray-50",children:[m.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 hidden md:flex flex-col",children:[m.jsxs("div",{className:"p-6",children:[m.jsx("h1",{className:"text-2xl font-bold text-primary-600 tracking-tight",children:"Conexo FA"}),m.jsx("p",{className:"text-xs text-gray-400 mt-1 uppercase tracking-wider font-semibold",children:t.role==="admin"?"Administrador":t.role==="professional"?"Profissional":"Cliente"})]}),m.jsxs("nav",{className:"flex-1 px-4 space-y-1",children:[t.role!=="client"&&m.jsx(r,{to:"/",icon:Jx,label:"Incio"}),t.role==="admin"&&m.jsxs(m.Fragment,{children:[m.jsx(r,{to:"/clients",icon:cd,label:"Gesto de Clientes"}),m.jsx(r,{to:"/users",icon:x3,label:"Gesto de Usurios"})]}),t.role==="professional"&&m.jsx(r,{to:"/professional/clients",icon:cd,label:"Meus Clientes"}),t.role==="client"&&m.jsx(r,{to:"/client/home",icon:Jx,label:"Meu Painel"})]}),m.jsxs("div",{className:"p-4 border-t border-gray-100",children:[m.jsxs("div",{className:"flex items-center mb-4 px-4",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold mr-3",children:t.name[0]}),m.jsxs("div",{className:"overflow-hidden",children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),m.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.email})]})]}),m.jsxs("button",{onClick:n,className:"flex items-center w-full px-4 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[m.jsx(S3,{className:"w-5 h-5 mr-3"}),m.jsx("span",{className:"font-medium",children:"Sair"})]})]})]}),m.jsx("main",{className:"flex-1 overflow-auto",children:m.jsx("div",{className:"p-8 max-w-7xl mx-auto",children:m.jsx(WA,{})})})]})}function jh({allowedRoles:t}){const{user:e,profile:n,loading:r}=vr();return r?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e?e&&!n&&!r?m.jsx(Jh,{to:"/setup",replace:!0}):t&&n&&!t.includes(n.role)?m.jsx(Jh,{to:"/",replace:!0}):m.jsx(WA,{}):m.jsx(Jh,{to:"/login",replace:!0})}function F8(){const{setUser:t,setProfile:e,setLoading:n}=vr();R.useEffect(()=>{const r=ok(aa,async s=>{try{if(s){t(s);const i=await pp(ln(ke,"users",s.uid));i.exists()?e(i.data()):e(null)}else t(null),e(null)}catch(i){console.error("Auth init error",i),e(null)}finally{n(!1)}});return()=>r()},[t,e,n])}function j8(){return F8(),m.jsx(m2,{children:m.jsxs(a2,{children:[m.jsx(gn,{path:"/login",element:m.jsx(y3,{})}),m.jsx(gn,{path:"/setup",element:m.jsx(N3,{})}),m.jsx(gn,{element:m.jsx(jh,{}),children:m.jsxs(gn,{element:m.jsx(M8,{}),children:[m.jsx(gn,{path:"/",element:m.jsx(P3,{})}),m.jsxs(gn,{element:m.jsx(jh,{allowedRoles:["admin"]}),children:[m.jsx(gn,{path:"/users",element:m.jsx(k8,{})}),m.jsx(gn,{path:"/clients",element:m.jsx(_b,{})}),m.jsx(gn,{path:"/clients/:id",element:m.jsx(Eb,{})})]}),m.jsxs(gn,{element:m.jsx(jh,{allowedRoles:["professional"]}),children:[m.jsx(gn,{path:"/professional/clients",element:m.jsx(_b,{})}),m.jsx(gn,{path:"/professional/clients/:id",element:m.jsx(Eb,{})})]}),m.jsx(gn,{element:m.jsx(jh,{allowedRoles:["client"]}),children:m.jsx(gn,{path:"/client/home",element:m.jsx(L8,{})})})]})}),m.jsx(gn,{path:"*",element:m.jsx(Jh,{to:"/",replace:!0})})]})})}VA(document.getElementById("root")).render(m.jsx(R.StrictMode,{children:m.jsx(j8,{})}));
